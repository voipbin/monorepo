<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="./">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>Call &mdash; voipbin  documentation</title>
    
    <link rel="stylesheet" type="text/css" href="_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8e8a900e" />
      <link rel="stylesheet" type="text/css" href="_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="genindex.html" />
            <link rel="search" title="Search" href="search.html" />
            <link rel="top" title="voipbin  documentation" href="#" />
            <link rel="next" title="Conference" href="conference.html" />
            <link rel="prev" title="Common" href="common.html" />
    </head>
<body>
    <script type="text/javascript" src="_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="intro.html"
                        title="voipbin"
                        class="logo navbar-brand"
                    >
                        <img src="_static/images/voipbin-high-resolution-logo-white-transparent.png" width="45" height="80" alt="voipbin"
                            class="logo-img"
                        />
                        VoIPBin Documentation
                    </a>
                
                
                    <div class="collapse navbar-collapse justify-content-end">
                        <ul class="navbar-nav">
                            
                                
                                
                                <li class="nav-item"><a class="nav-link"  href="http://voipbin.net">Project</a></li>
                            
                                
                                
                                <li class="nav-item"><a class="nav-link"  href="https://admin.voipbin.net">Admin</a></li>
                            
                        </ul>
                    </div>
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="accesskey.html">Accesskey</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdk.html">SDK(Software Development Kit)</a></li>
<li class="toctree-l1"><a class="reference internal" href="restful_api.html">RESTful API(Application Programming Interface)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="flow.html">Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow.html#activeflow">Activeflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="variable.html">Variable</a></li>
<li class="toctree-l1"><a class="reference internal" href="webhook.html">Webhook</a></li>
<li class="toctree-l1"><a class="reference internal" href="common.html">Common</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Voice &amp; Real-Time</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Call</a></li>
<li class="toctree-l1"><a class="reference internal" href="conference.html">Conference</a></li>
<li class="toctree-l1"><a class="reference internal" href="queue.html">Queue</a></li>
<li class="toctree-l1"><a class="reference internal" href="recording.html">Recording</a></li>
<li class="toctree-l1"><a class="reference internal" href="transcribe.html">Transcribe</a></li>
<li class="toctree-l1"><a class="reference internal" href="mediastream.html">Mediastream</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Messaging</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="message.html">Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.html">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="talk.html">Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="conversation.html">Conversation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AI &amp; Automation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ai.html">AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="campaign.html">Campaign</a></li>
<li class="toctree-l1"><a class="reference internal" href="outdial.html">Outdial</a></li>
<li class="toctree-l1"><a class="reference internal" href="outplan.html">Outplan</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources &amp; Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="agent.html">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="customer.html">Customer</a></li>
<li class="toctree-l1"><a class="reference internal" href="billing_account.html">Billing Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="tag.html">Tag</a></li>
<li class="toctree-l1"><a class="reference internal" href="provider.html">Provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="route.html">Route</a></li>
<li class="toctree-l1"><a class="reference internal" href="extension.html">Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="trunk.html">Trunk</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Architecture (Deep Dive)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="websocket.html">Websocket</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help &amp; Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">Call</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
    <a class="btn btn-sm btn-light text-decoration-none" href="_sources/call.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="call">
<span id="call-main"></span><h1>Call<a class="headerlink" href="#call" title="Link to this heading"></a></h1>
<section id="overview">
<span id="call-overview"></span><h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>The VoIPBIN call API provides a straightforward and convenient way to develop high-quality call applications in the Cloud. With the VoIPBIN API, developers can leverage familiar web technologies to build scalable and feature-rich call applications, giving them the power to control inbound and outbound call flows using JSON-based VoIPBIN actions. Additionally, the API offers capabilities to record and store inbound or outbound calls, create conference calls, and send text-to-speech messages in multiple languages with different gender and accents.</p>
<p>With the VoIPBIN API you can:</p>
<ul class="simple">
<li><p>Build apps that scale with the web technologies you are already using.</p></li>
<li><p>Control the flow of inbound and outbound calls in JSON with VoIPBIN’s actions.</p></li>
<li><p>Record and store inbound or outbound calls.</p></li>
<li><p>Create conference calls.</p></li>
<li><p>Send text-to-speech messages in 50 languages with different gender and accents.</p></li>
</ul>
<section id="protocol">
<h3>Protocol<a class="headerlink" href="#protocol" title="Link to this heading"></a></h3>
<p>VoIPBIN offers support for various call/video protocols, enabling users to join the same conference room and communicate with one another seamlessly. The flexibility in protocol options ensures efficient and reliable communication between different devices and platforms.</p>
<img alt="_images/call_overview_protocol.png" src="_images/call_overview_protocol.png" />
</section>
<section id="pstn-phone-number-format">
<h3>PSTN/Phone Number Format<a class="headerlink" href="#pstn-phone-number-format" title="Link to this heading"></a></h3>
<p>In the VoIPBIN APIs, all PSTN/Phone numbers must adhere to the <a class="reference external" href="https://en.wikipedia.org/wiki/E.164">+E164</a> format. This format standardizes the representation of phone numbers to facilitate smooth communication and interoperability across different systems.</p>
<p>Key requirements for phone numbers within the VoIPBIN APIs:</p>
<ul class="simple">
<li><p>The phone number must have the ‘+’ symbol at the beginning.</p></li>
<li><p>The number should not contain any special characters, such as spaces, parentheses, or hyphens.</p></li>
</ul>
<p>For example, a US phone number should be represented as +16062067563, and a UK phone number should be represented as +442071234567.</p>
</section>
<section id="extension-number-format">
<h3>Extension Number Format<a class="headerlink" href="#extension-number-format" title="Link to this heading"></a></h3>
<p>The extension numbers used in the VoIPBIN system can be customized according to specific requirements. However, they must adhere to the following limitation:</p>
<ul class="simple">
<li><p>Extension numbers should not contain any special characters, such as spaces, parentheses, or hyphens.</p></li>
</ul>
<p>The absence of special characters ensures consistent and reliable processing of extension numbers within the VoIPBIN system, promoting smooth communication and interaction.</p>
</section>
<section id="call-lifecycle">
<h3>Call Lifecycle<a class="headerlink" href="#call-lifecycle" title="Link to this heading"></a></h3>
<p>Every call in VoIPBIN follows a predictable lifecycle from creation to termination. Understanding this lifecycle helps you build reliable applications that respond correctly to call state changes.</p>
<p><strong>State Diagram</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                               <span class="o">+--------------+</span>
                               <span class="o">|</span>   <span class="n">dialing</span>    <span class="o">|</span>
                               <span class="o">|</span> <span class="p">(</span><span class="n">call</span> <span class="n">starts</span><span class="p">)</span><span class="o">|</span>
                               <span class="o">+------+-------+</span>
                                      <span class="o">|</span>
                <span class="o">+---------------------+---------------------+</span>
                <span class="o">|</span>                     <span class="o">|</span>                     <span class="o">|</span>
                <span class="n">v</span>                     <span class="n">v</span>                     <span class="n">v</span>
         <span class="o">+------------+</span>        <span class="o">+------------+</span>        <span class="o">+------------+</span>
         <span class="o">|</span>  <span class="n">ringing</span>   <span class="o">|</span>        <span class="o">|</span> <span class="n">canceling</span>  <span class="o">|</span>        <span class="o">|</span>  <span class="n">hangup</span>    <span class="o">|</span>
         <span class="o">|</span> <span class="p">(</span><span class="n">dest</span> <span class="n">rang</span><span class="p">)</span><span class="o">|</span>        <span class="o">|</span> <span class="p">(</span><span class="n">caller</span>    <span class="o">|</span>        <span class="o">|</span> <span class="p">(</span><span class="n">failed</span><span class="p">)</span>   <span class="o">|</span>
         <span class="o">+-----+------+</span>        <span class="o">|</span>  <span class="n">cancels</span><span class="p">)</span>  <span class="o">|</span>        <span class="o">+------------+</span>
               <span class="o">|</span>               <span class="o">+-----+------+</span>
               <span class="o">|</span>                     <span class="o">|</span>
               <span class="n">v</span>                     <span class="o">|</span>
        <span class="o">+-------------+</span>              <span class="o">|</span>
        <span class="o">|</span> <span class="n">progressing</span> <span class="o">|</span>              <span class="o">|</span>
        <span class="o">|</span> <span class="p">(</span><span class="n">answered</span><span class="p">)</span>  <span class="o">|</span>              <span class="o">|</span>
        <span class="o">+------+------+</span>              <span class="o">|</span>
               <span class="o">|</span>                     <span class="o">|</span>
      <span class="o">+--------+--------+</span>            <span class="o">|</span>
      <span class="n">v</span>                 <span class="n">v</span>            <span class="o">|</span>
<span class="o">+------------+</span>   <span class="o">+------------+</span>      <span class="o">|</span>
<span class="o">|</span><span class="n">terminating</span> <span class="o">|</span>   <span class="o">|</span>  <span class="n">hangup</span>    <span class="o">|</span>      <span class="o">|</span>
<span class="o">|</span>  <span class="p">(</span><span class="n">ending</span>   <span class="o">|</span>   <span class="o">|</span>  <span class="p">(</span><span class="n">remote</span>   <span class="o">|</span>      <span class="o">|</span>
<span class="o">|</span>   <span class="n">locally</span><span class="p">)</span> <span class="o">|</span>   <span class="o">|</span>  <span class="n">hangup</span><span class="p">)</span>   <span class="o">|</span>      <span class="o">|</span>
<span class="o">+-----+------+</span>   <span class="o">+------------+</span>      <span class="o">|</span>
      <span class="o">|</span>                              <span class="o">|</span>
      <span class="o">+--------------+---------------+</span>
                     <span class="n">v</span>
              <span class="o">+------------+</span>
              <span class="o">|</span>   <span class="n">hangup</span>   <span class="o">|</span>
              <span class="o">|</span>  <span class="p">(</span><span class="n">final</span><span class="p">)</span>   <span class="o">|</span>
              <span class="o">+------------+</span>
</pre></div>
</div>
<p><strong>State Descriptions</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Status</p></th>
<th class="head"><p>What is happening</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dialing</p></td>
<td><p>Call has been created. The system is attempting to reach the
destination through the phone network.</p></td>
</tr>
<tr class="row-odd"><td><p>ringing</p></td>
<td><p>The destination device is ringing. The person being called can
now answer.</p></td>
</tr>
<tr class="row-even"><td><p>progressing</p></td>
<td><p>The call has been answered. Both parties can now hear each
other. Media (audio/video) is flowing.</p></td>
</tr>
<tr class="row-odd"><td><p>terminating</p></td>
<td><p>The system is ending the call. This happens when your
application hangs up or a flow action ends the call.</p></td>
</tr>
<tr class="row-even"><td><p>canceling</p></td>
<td><p>The caller is canceling before the destination answered.
Only happens for outgoing calls.</p></td>
</tr>
<tr class="row-odd"><td><p>hangup</p></td>
<td><p>The call has ended. This is the final state - no further
changes are possible.</p></td>
</tr>
</tbody>
</table>
<p><strong>Key Behaviors</strong></p>
<ul class="simple">
<li><p>States only move forward, never backward. A call that reached “progressing” cannot go back to “ringing”.</p></li>
<li><p>Once a call reaches “hangup”, it cannot change anymore.</p></li>
<li><p>The “canceling” state only applies to outgoing calls (when the originator hangs up before answer).</p></li>
</ul>
</section>
<section id="what-happens-at-each-stage">
<h3>What Happens At Each Stage<a class="headerlink" href="#what-happens-at-each-stage" title="Link to this heading"></a></h3>
<p><strong>During Dialing</strong></p>
<p>When you create an outbound call or receive an inbound call, the call enters the dialing state.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Your</span> <span class="n">App</span>                    <span class="n">VoIPBIN</span>                    <span class="n">Destination</span>
   <span class="o">|</span>                           <span class="o">|</span>                            <span class="o">|</span>
   <span class="o">|</span>  <span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span>           <span class="o">|</span>                            <span class="o">|</span>
   <span class="o">+--------------------------&gt;|</span>                            <span class="o">|</span>
   <span class="o">|</span>                           <span class="o">|</span>  <span class="n">SIP</span> <span class="n">INVITE</span>                <span class="o">|</span>
   <span class="o">|</span>                           <span class="o">+---------------------------&gt;|</span>
   <span class="o">|</span>                           <span class="o">|</span>                            <span class="o">|</span>
   <span class="o">|</span>  <span class="n">Call</span> <span class="nb">object</span>              <span class="o">|</span>                            <span class="o">|</span>
   <span class="o">|</span>  <span class="n">status</span><span class="p">:</span> <span class="s2">&quot;dialing&quot;</span>        <span class="o">|</span>                            <span class="o">|</span>
   <span class="o">|&lt;--------------------------+</span>                            <span class="o">|</span>
</pre></div>
</div>
<p>At this point:</p>
<ul class="simple">
<li><p>VoIPBIN is trying to reach the destination</p></li>
<li><p>No audio is flowing yet</p></li>
<li><p>The call may fail if the network is unreachable</p></li>
</ul>
<p><strong>During Ringing</strong></p>
<p>The destination device is ringing. The person can pick up the phone.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>                           <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>                           <span class="o">|</span>  <span class="mi">180</span> <span class="n">Ringing</span>               <span class="o">|</span>
<span class="o">|</span>                           <span class="o">|&lt;---------------------------+</span>
<span class="o">|</span>  <span class="n">Webhook</span><span class="p">:</span> <span class="n">call_updated</span>    <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>  <span class="n">status</span><span class="p">:</span> <span class="s2">&quot;ringing&quot;</span>        <span class="o">|</span>       <span class="n">Ring</span> <span class="n">Ring</span>            <span class="o">|</span>
<span class="o">|&lt;--------------------------+</span>                            <span class="o">|</span>
</pre></div>
</div>
<p>At this point:</p>
<ul class="simple">
<li><p>The destination phone is ringing</p></li>
<li><p>Early media (ringback tone) may be playing</p></li>
<li><p>The caller is waiting for an answer</p></li>
</ul>
<p><strong>During Progressing (Answered)</strong></p>
<p>The call has been answered. This is when real communication begins.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>                           <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>                           <span class="o">|</span>  <span class="mi">200</span> <span class="n">OK</span>                    <span class="o">|</span>
<span class="o">|</span>                           <span class="o">|&lt;---------------------------+</span>
<span class="o">|</span>  <span class="n">Webhook</span><span class="p">:</span> <span class="n">call_updated</span>    <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>  <span class="n">status</span><span class="p">:</span> <span class="s2">&quot;progressing&quot;</span>    <span class="o">|</span>   <span class="o">&lt;=====================&gt;</span>  <span class="o">|</span>
<span class="o">|&lt;--------------------------+</span>        <span class="p">(</span><span class="n">Audio</span> <span class="n">flows</span><span class="p">)</span>       <span class="o">|</span>
</pre></div>
</div>
<p>At this point:</p>
<ul class="simple">
<li><p>Both parties can hear each other</p></li>
<li><p>Flow actions start executing (if defined)</p></li>
<li><p>Recording can begin</p></li>
<li><p>Media controls (hold, mute) become available</p></li>
</ul>
<p><strong>During Hangup</strong></p>
<p>The call has ended. Check the hangup_by and hangup_reason fields to understand why.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>                           <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>                           <span class="o">|</span>  <span class="n">BYE</span>                       <span class="o">|</span>
<span class="o">|</span>                           <span class="o">|&lt;---------------------------+</span>
<span class="o">|</span>  <span class="n">Webhook</span><span class="p">:</span> <span class="n">call_updated</span>    <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>  <span class="n">status</span><span class="p">:</span> <span class="s2">&quot;hangup&quot;</span>         <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>  <span class="n">hangup_by</span><span class="p">:</span> <span class="s2">&quot;remote&quot;</span>      <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>  <span class="n">hangup_reason</span><span class="p">:</span> <span class="s2">&quot;normal&quot;</span>  <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|&lt;--------------------------+</span>                            <span class="o">|</span>
</pre></div>
</div>
</section>
<section id="understanding-hangup-reasons">
<h3>Understanding Hangup Reasons<a class="headerlink" href="#understanding-hangup-reasons" title="Link to this heading"></a></h3>
<p>When a call ends, VoIPBIN tells you why it ended. This helps you build appropriate responses for different scenarios.</p>
<p><strong>Hangup Reason Values</strong></p>
<p><strong>Hangup By Values</strong></p>
<p><strong>Common Scenarios</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Scenario</span><span class="p">:</span> <span class="n">Normal</span> <span class="n">conversation</span>
<span class="o">----------------------------</span>
<span class="n">hangup_by</span><span class="p">:</span> <span class="s2">&quot;remote&quot;</span>
<span class="n">hangup_reason</span><span class="p">:</span> <span class="s2">&quot;normal&quot;</span>
<span class="o">-&gt;</span> <span class="n">The</span> <span class="n">other</span> <span class="n">person</span> <span class="n">hung</span> <span class="n">up</span> <span class="n">after</span> <span class="n">talking</span>

<span class="n">Scenario</span><span class="p">:</span> <span class="n">Missed</span> <span class="n">call</span>
<span class="o">----------------------------</span>
<span class="n">hangup_by</span><span class="p">:</span> <span class="s2">&quot;remote&quot;</span>
<span class="n">hangup_reason</span><span class="p">:</span> <span class="s2">&quot;noanswer&quot;</span>
<span class="o">-&gt;</span> <span class="n">Phone</span> <span class="n">rang</span> <span class="n">but</span> <span class="n">nobody</span> <span class="n">answered</span>

<span class="n">Scenario</span><span class="p">:</span> <span class="n">Your</span> <span class="n">app</span> <span class="n">ended</span> <span class="n">the</span> <span class="n">call</span>
<span class="o">----------------------------</span>
<span class="n">hangup_by</span><span class="p">:</span> <span class="s2">&quot;local&quot;</span>
<span class="n">hangup_reason</span><span class="p">:</span> <span class="s2">&quot;normal&quot;</span>
<span class="o">-&gt;</span> <span class="n">Your</span> <span class="n">flow</span> <span class="n">action</span> <span class="ow">or</span> <span class="n">API</span> <span class="n">call</span> <span class="n">ended</span> <span class="n">it</span>

<span class="n">Scenario</span><span class="p">:</span> <span class="n">Network</span> <span class="n">problem</span>
<span class="o">----------------------------</span>
<span class="n">hangup_by</span><span class="p">:</span> <span class="s2">&quot;remote&quot;</span>
<span class="n">hangup_reason</span><span class="p">:</span> <span class="s2">&quot;failed&quot;</span>
<span class="o">-&gt;</span> <span class="n">Call</span> <span class="n">never</span> <span class="n">connected</span> <span class="n">due</span> <span class="n">to</span> <span class="n">network</span> <span class="n">issues</span>
</pre></div>
</div>
</section>
<section id="media-control-operations">
<h3>Media Control Operations<a class="headerlink" href="#media-control-operations" title="Link to this heading"></a></h3>
<p>Once a call is in the “progressing” state (answered), you can control the audio in several ways. Each operation is independent - you can combine them as needed.</p>
<p><strong>Hold</strong></p>
<p>Pauses the call. The other party hears silence (or music if MOH is enabled).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Before</span> <span class="n">Hold</span>                          <span class="n">After</span> <span class="n">Hold</span>
<span class="o">+---------+</span>     <span class="n">audio</span>      <span class="o">+---------+</span>     <span class="o">+---------+</span>     <span class="n">silence</span>   <span class="o">+---------+</span>
<span class="o">|</span> <span class="n">Caller</span>  <span class="o">|</span> <span class="o">&lt;============&gt;</span> <span class="o">|</span> <span class="n">VoIPBIN</span> <span class="o">|</span>     <span class="o">|</span> <span class="n">Caller</span>  <span class="o">|</span> <span class="o">------------&gt;</span> <span class="o">|</span> <span class="n">VoIPBIN</span> <span class="o">|</span>
<span class="o">+---------+</span>                <span class="o">+---------+</span>     <span class="o">+---------+</span>  <span class="p">(</span><span class="ow">or</span> <span class="n">music</span><span class="p">)</span>   <span class="o">+---------+</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Use hold when the caller needs to wait (e.g., while transferring)</p></li>
<li><p>The caller stays connected but cannot hear ongoing activity</p></li>
<li><p>Unhold resumes normal audio</p></li>
</ul>
<p><strong>Mute</strong></p>
<p>Silences audio in one or both directions without putting the call on hold.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Mute</span> <span class="s2">&quot;in&quot;</span>                    <span class="n">Mute</span> <span class="s2">&quot;out&quot;</span>                   <span class="n">Mute</span> <span class="s2">&quot;both&quot;</span>
<span class="o">+----+</span>  <span class="o">---</span><span class="n">X</span><span class="o">--&gt;</span>  <span class="o">+----+</span>     <span class="o">+----+</span>  <span class="o">&lt;--</span><span class="n">X</span><span class="o">---</span>  <span class="o">+----+</span>      <span class="o">+----+</span>  <span class="o">--</span><span class="n">X</span><span class="o">--</span>  <span class="o">+----+</span>
<span class="o">|</span> <span class="n">A</span>  <span class="o">|</span>  <span class="o">&lt;------</span>  <span class="o">|</span> <span class="n">B</span>  <span class="o">|</span>     <span class="o">|</span> <span class="n">A</span>  <span class="o">|</span>  <span class="o">-------&gt;</span> <span class="o">|</span> <span class="n">B</span>  <span class="o">|</span>      <span class="o">|</span> <span class="n">A</span>  <span class="o">|</span>  <span class="o">--</span><span class="n">X</span><span class="o">--</span>  <span class="o">|</span> <span class="n">B</span>  <span class="o">|</span>
<span class="o">+----+</span>           <span class="o">+----+</span>     <span class="o">+----+</span>           <span class="o">+----+</span>      <span class="o">+----+</span>         <span class="o">+----+</span>
<span class="n">A</span> <span class="n">cannot</span> <span class="n">hear</span> <span class="n">B</span>            <span class="n">A</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">heard</span>           <span class="n">Complete</span> <span class="n">silence</span>
</pre></div>
</div>
<ul class="simple">
<li><p>“in”: The call cannot hear incoming audio</p></li>
<li><p>“out”: The call’s audio is not sent to others</p></li>
<li><p>“both”: Complete silence in both directions</p></li>
</ul>
<p><strong>Recording</strong></p>
<p>Captures the call audio for later playback.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+---------+</span>         <span class="o">+---------+</span>         <span class="o">+---------+</span>
<span class="o">|</span> <span class="n">Caller</span>  <span class="o">|</span> <span class="o">&lt;=====&gt;</span> <span class="o">|</span> <span class="n">VoIPBIN</span> <span class="o">|</span> <span class="o">&lt;=====&gt;</span> <span class="o">|</span>  <span class="n">Dest</span>   <span class="o">|</span>
<span class="o">+---------+</span>         <span class="o">+----+----+</span>         <span class="o">+---------+</span>
                         <span class="o">|</span>
                         <span class="n">v</span> <span class="p">(</span><span class="n">recording</span><span class="p">)</span>
                    <span class="o">+---------+</span>
                    <span class="o">|</span>  <span class="n">File</span>   <span class="o">|</span>
                    <span class="o">+---------+</span>
</pre></div>
</div>
<ul class="simple">
<li><p>recording_id shows the current recording (if active)</p></li>
<li><p>recording_ids lists all recordings made during this call’s lifetime</p></li>
<li><p>You can start and stop recording multiple times in one call</p></li>
</ul>
</section>
<section id="call-chaining">
<h3>Call Chaining<a class="headerlink" href="#call-chaining" title="Link to this heading"></a></h3>
<p>VoIPBIN’s call concept differs from traditional 1:1 calls. A single logical conversation may involve multiple call objects linked together.</p>
<p><strong>The Two-Call Model</strong></p>
<p>When you make a call from A to B through VoIPBIN, there are actually two separate calls:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Traditional</span> <span class="n">View</span><span class="p">:</span>     <span class="n">A</span> <span class="o">-----------------------&gt;</span> <span class="n">B</span>

<span class="n">VoIPBIN</span> <span class="n">Reality</span><span class="p">:</span>      <span class="n">A</span> <span class="o">&lt;---</span> <span class="n">Call</span> <span class="mi">1</span> <span class="o">---&gt;</span> <span class="n">VoIPBIN</span> <span class="o">&lt;---</span> <span class="n">Call</span> <span class="mi">2</span> <span class="o">---&gt;</span> <span class="n">B</span>
                               <span class="o">|</span>                        <span class="o">|</span>
                               <span class="o">+------------------------+</span>
                                      <span class="p">(</span><span class="n">bridged</span> <span class="n">audio</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Why Two Calls?</strong></p>
<p>This design enables powerful features:</p>
<ul class="simple">
<li><p><strong>Recording</strong>: VoIPBIN can record both sides independently</p></li>
<li><p><strong>Conferencing</strong>: Add more parties without changing the original calls</p></li>
<li><p><strong>Transfer</strong>: Move calls between agents without dropping the caller</p></li>
<li><p><strong>Flow Control</strong>: Run different actions on each call leg</p></li>
</ul>
<p><strong>Master and Chained Calls</strong></p>
<p>When calls are related, they form a chain:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+-------------------------------------------------------+</span>
<span class="o">|</span>                    <span class="n">Master</span> <span class="n">Call</span>                        <span class="o">|</span>
<span class="o">|</span>  <span class="n">master_call_id</span><span class="p">:</span> <span class="mi">00000000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">000000000000</span> <span class="o">|</span>
<span class="o">|</span>  <span class="n">chained_call_ids</span><span class="p">:</span> <span class="p">[</span><span class="n">call</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="nb">id</span><span class="p">,</span> <span class="n">call</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="nb">id</span><span class="p">]</span>             <span class="o">|</span>
<span class="o">+-------------------------+-----------------------------+</span>
                          <span class="o">|</span>
          <span class="o">+---------------+---------------+</span>
          <span class="n">v</span>               <span class="n">v</span>               <span class="n">v</span>
    <span class="o">+----------+</span>    <span class="o">+----------+</span>    <span class="o">+----------+</span>
    <span class="o">|</span> <span class="n">Call</span> <span class="mi">2</span>   <span class="o">|</span>    <span class="o">|</span> <span class="n">Call</span> <span class="mi">3</span>   <span class="o">|</span>    <span class="o">|</span> <span class="n">Call</span> <span class="mi">4</span>   <span class="o">|</span>
    <span class="o">|</span> <span class="n">master</span><span class="p">:</span>  <span class="o">|</span>    <span class="o">|</span> <span class="n">master</span><span class="p">:</span>  <span class="o">|</span>    <span class="o">|</span> <span class="n">master</span><span class="p">:</span>  <span class="o">|</span>
    <span class="o">|</span> <span class="n">call</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="nb">id</span><span class="o">|</span>    <span class="o">|</span> <span class="n">call</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="nb">id</span><span class="o">|</span>    <span class="o">|</span> <span class="n">call</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="nb">id</span><span class="o">|</span>
    <span class="o">+----------+</span>    <span class="o">+----------+</span>    <span class="o">+----------+</span>
</pre></div>
</div>
<p><strong>Chaining Behaviors</strong></p>
<ul class="simple">
<li><p>When the master call hangs up, all chained calls automatically hang up</p></li>
<li><p>Chained calls can only be added while the master is in dialing, ringing, or progressing state</p></li>
<li><p>Each chained call tracks its master via the master_call_id field</p></li>
</ul>
<p><strong>Common Use Case: Transfer</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Step</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Caller</span> <span class="ow">and</span> <span class="n">Agent</span> <span class="n">talking</span>
<span class="o">+--------+</span>       <span class="o">+---------+</span>       <span class="o">+--------+</span>
<span class="o">|</span> <span class="n">Caller</span> <span class="o">|&lt;-----&gt;|</span> <span class="n">VoIPBIN</span> <span class="o">|&lt;-----&gt;|</span> <span class="n">Agent</span>  <span class="o">|</span>
<span class="o">+--------+</span>       <span class="o">+----+----+</span>       <span class="o">+--------+</span>
                      <span class="o">|</span>
                 <span class="n">Master</span> <span class="n">Call</span>

<span class="n">Step</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Agent</span> <span class="n">initiates</span> <span class="n">transfer</span> <span class="n">to</span> <span class="n">Supervisor</span>
<span class="o">+--------+</span>       <span class="o">+---------+</span>       <span class="o">+--------+</span>
<span class="o">|</span> <span class="n">Caller</span> <span class="o">|&lt;-----&gt;|</span> <span class="n">VoIPBIN</span> <span class="o">|</span>       <span class="o">|</span> <span class="n">Agent</span>  <span class="o">|</span> <span class="p">(</span><span class="n">on</span> <span class="n">hold</span><span class="p">)</span>
<span class="o">+--------+</span>       <span class="o">+----+----+</span>       <span class="o">+--------+</span>
                      <span class="o">|</span>
                      <span class="o">+-----------&gt;</span> <span class="o">+------------+</span>
                      <span class="o">|</span>            <span class="o">|</span> <span class="n">Supervisor</span> <span class="o">|</span> <span class="p">(</span><span class="n">ringing</span><span class="p">)</span>
                 <span class="n">Chained</span> <span class="n">Call</span>      <span class="o">+------------+</span>

<span class="n">Step</span> <span class="mi">3</span><span class="p">:</span> <span class="n">Supervisor</span> <span class="n">answers</span><span class="p">,</span> <span class="n">Agent</span> <span class="n">drops</span>
<span class="o">+--------+</span>       <span class="o">+---------+</span>       <span class="o">+------------+</span>
<span class="o">|</span> <span class="n">Caller</span> <span class="o">|&lt;-----&gt;|</span> <span class="n">VoIPBIN</span> <span class="o">|&lt;-----&gt;|</span> <span class="n">Supervisor</span> <span class="o">|</span>
<span class="o">+--------+</span>       <span class="o">+---------+</span>       <span class="o">+------------+</span>
</pre></div>
</div>
<p><strong>Multi-Party Chaining (3+ Parties)</strong></p>
<p>Call chaining supports more than two parties. Each chained call connects to the master:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+--------+</span>       <span class="o">+---------+</span>       <span class="o">+---------+</span>
<span class="o">|</span> <span class="n">Caller</span> <span class="o">|&lt;-----&gt;|</span> <span class="n">VoIPBIN</span> <span class="o">|&lt;-----&gt;|</span> <span class="n">Agent</span> <span class="mi">1</span> <span class="o">|</span>
<span class="o">+--------+</span>       <span class="o">+----+----+</span>       <span class="o">+---------+</span>
                      <span class="o">|</span>
                      <span class="o">+------------&gt;+---------+</span>
                      <span class="o">|</span>             <span class="o">|</span> <span class="n">Agent</span> <span class="mi">2</span> <span class="o">|</span>
                      <span class="o">|</span>             <span class="o">+---------+</span>
                      <span class="o">|</span>
                      <span class="o">+------------&gt;+------------+</span>
                                    <span class="o">|</span> <span class="n">Supervisor</span> <span class="o">|</span>
                                    <span class="o">+------------+</span>

<span class="n">Master</span><span class="p">:</span> <span class="n">Caller</span><span class="s1">&#39;s call</span>
<span class="n">Chained</span><span class="p">:</span> <span class="n">Agent</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Agent</span> <span class="mi">2</span><span class="p">,</span> <span class="n">Supervisor</span> <span class="p">(</span><span class="nb">all</span> <span class="n">linked</span> <span class="n">to</span> <span class="n">master</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Chaining vs Conference Decision Guide</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                Need multiple parties?
                       |
          +------------+------------+
          |                         |
     Sequential?               Simultaneous?
     (one at a time)          (all at once)
          |                         |
    +-----+-----+             +-----+-----+
    |           |             |           |
   Yes         No            Yes         No
    |           |             |           |
    v           |             v           |
[Chaining]      |       [Conference]      |
                |                         |
           Need transfers?                |
                |                         |
          +-----+-----+                   |
          |           |                   |
         Yes         No                   |
          |           +-------------------+
          v                   |
      [Chaining]              v
                        [Conference]
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Aspect</p></th>
<th class="head"><p>Call Chaining</p></th>
<th class="head"><p>Conference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Parties</p></td>
<td><p>Sequential (transfer model)</p></td>
<td><p>Simultaneous (meeting model)</p></td>
</tr>
<tr class="row-odd"><td><p>Audio</p></td>
<td><p>Bridged between pairs</p></td>
<td><p>Mixed for all participants</p></td>
</tr>
<tr class="row-even"><td><p>Master Control</p></td>
<td><p>Master hangup ends all</p></td>
<td><p>Host controls conference</p></td>
</tr>
<tr class="row-odd"><td><p>Best For</p></td>
<td><p>Transfers, escalation, queues</p></td>
<td><p>Meetings, group calls</p></td>
</tr>
</tbody>
</table>
</section>
<section id="timestamps-explained">
<h3>Timestamps Explained<a class="headerlink" href="#timestamps-explained" title="Link to this heading"></a></h3>
<p>Each call tracks important moments in its lifecycle:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Timeline</span> <span class="n">of</span> <span class="n">a</span> <span class="n">successful</span> <span class="n">call</span><span class="p">:</span>

<span class="o">|</span> <span class="n">tm_create</span>                    <span class="n">tm_ringing</span>          <span class="n">tm_progressing</span>              <span class="n">tm_hangup</span>
<span class="o">|</span>     <span class="o">|</span>                            <span class="o">|</span>                    <span class="o">|</span>                          <span class="o">|</span>
<span class="n">v</span>     <span class="n">v</span>                            <span class="n">v</span>                    <span class="n">v</span>                          <span class="n">v</span>
<span class="o">------</span><span class="n">o</span><span class="o">----------------------------</span><span class="n">o</span><span class="o">--------------------</span><span class="n">o</span><span class="o">--------------------------</span><span class="n">o</span><span class="o">------&gt;</span>
      <span class="o">|</span>                            <span class="o">|</span>                    <span class="o">|</span>                          <span class="o">|</span>
      <span class="o">|&lt;---</span> <span class="n">dialing</span> <span class="o">--------------&gt;|&lt;---</span> <span class="n">ringing</span> <span class="o">------&gt;|&lt;----</span> <span class="n">progressing</span> <span class="o">-------&gt;|</span>
      <span class="o">|</span>                            <span class="o">|</span>                    <span class="o">|</span>                          <span class="o">|</span>
   <span class="n">Call</span> <span class="n">created</span>              <span class="n">Phone</span> <span class="n">started</span>           <span class="n">Call</span> <span class="n">answered</span>            <span class="n">Call</span> <span class="n">ended</span>
                               <span class="n">ringing</span>
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Timestamp</p></th>
<th class="head"><p>When it’s set</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tm_create</p></td>
<td><p>When the call object was created in VoIPBIN</p></td>
</tr>
<tr class="row-odd"><td><p>tm_ringing</p></td>
<td><p>When the destination phone started ringing</p></td>
</tr>
<tr class="row-even"><td><p>tm_progressing</p></td>
<td><p>When the call was answered</p></td>
</tr>
<tr class="row-odd"><td><p>tm_hangup</p></td>
<td><p>When the call ended</p></td>
</tr>
<tr class="row-even"><td><p>tm_update</p></td>
<td><p>Last time any call property changed</p></td>
</tr>
</tbody>
</table>
<p><strong>Calculating Durations</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Ring</span> <span class="n">duration</span> <span class="o">=</span> <span class="n">tm_progressing</span> <span class="o">-</span> <span class="n">tm_ringing</span>
<span class="n">Talk</span> <span class="n">duration</span> <span class="o">=</span> <span class="n">tm_hangup</span> <span class="o">-</span> <span class="n">tm_progressing</span>
<span class="n">Total</span> <span class="n">duration</span> <span class="o">=</span> <span class="n">tm_hangup</span> <span class="o">-</span> <span class="n">tm_create</span>
</pre></div>
</div>
</section>
<section id="route-failover">
<h3>Route Failover<a class="headerlink" href="#route-failover" title="Link to this heading"></a></h3>
<p>When an outgoing call fails during dialing or ringing, VoIPBIN can automatically try alternate routes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>+-----------------------------------------------------------------+
|                       Call Attempt Flow                         |
+-----------------------------------------------------------------+

                          Create Call
                               |
                               v
                       +--------------+
                       |   Route 1    |
                       |  (Primary)   |
                       +------+-------+
                              |
                      +-------+-------+
                      v               v
                 Connected?       Failed?
                      |               |
                      v               v
                  Success      +--------------+
                               |   Route 2    |
                               |  (Backup)    |
                               +------+-------+
                                      |
                              +-------+-------+
                              v               v
                         Connected?       Failed?
                              |               |
                              v               v
                          Success      +--------------+
                                       |   Route 3    |
                                       |  (Last try)  |
                                       +------+-------+
                                              |
                                              v
                                        Final Result
</pre></div>
</div>
<p><strong>Failover Rules</strong></p>
<p>Not all failures trigger failover. VoIPBIN only tries the next route when recovery is possible:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Hangup Reason</p></th>
<th class="head"><p>Failover</p></th>
<th class="head"><p>Why</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>failed</p></td>
<td><p>Yes</p></td>
<td><p>Network issue - another route might work</p></td>
</tr>
<tr class="row-odd"><td><p>busy</p></td>
<td><p>No</p></td>
<td><p>The person is busy - trying again won’t help</p></td>
</tr>
<tr class="row-even"><td><p>noanswer</p></td>
<td><p>No</p></td>
<td><p>They didn’t answer - their choice</p></td>
</tr>
<tr class="row-odd"><td><p>cancel</p></td>
<td><p>No</p></td>
<td><p>Caller cancelled - no need to retry</p></td>
</tr>
<tr class="row-even"><td><p>normal</p></td>
<td><p>No</p></td>
<td><p>Call succeeded - nothing to retry</p></td>
</tr>
</tbody>
</table>
<p><strong>No Failover Cases</strong></p>
<p>Failover is disabled in these situations:</p>
<ul class="simple">
<li><p>Incoming calls (the route is fixed by the caller)</p></li>
<li><p>Conference calls</p></li>
<li><p>Calls where flow execution already started (early_execution flag)</p></li>
</ul>
</section>
<section id="incoming-call">
<h3>Incoming call<a class="headerlink" href="#incoming-call" title="Link to this heading"></a></h3>
<p>The VoIPBIN system provides the functionality to receive incoming calls from external parties. This feature allows users to accept and handle incoming calls through their VoIP services. Incoming calls are crucial for various communication applications and call center setups as they enable users to receive inquiries, provide support, and engage with customers, clients, or other users.
When an incoming call is received, the VoIPBIN system processes the call request and prepares for call handling based on the specified parameters and configurations.</p>
</section>
<section id="execution-of-call-flow-for-incoming-call">
<h3>Execution of Call Flow for incoming call<a class="headerlink" href="#execution-of-call-flow-for-incoming-call" title="Link to this heading"></a></h3>
<p>The execution of the call flow for incoming calls involves a simple yet effective sequence of actions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">External</span> <span class="n">Caller</span>                <span class="n">VoIPBIN</span>                    <span class="n">Your</span> <span class="n">Flow</span>
      <span class="o">|</span>                           <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|</span>  <span class="n">INVITE</span> <span class="p">(</span><span class="n">call</span> <span class="n">request</span><span class="p">)</span>    <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">+--------------------------&gt;|</span>                           <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">|</span>  <span class="n">Lookup</span> <span class="n">destination</span>       <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">|</span>  <span class="n">Find</span> <span class="n">matching</span> <span class="n">flow</span>       <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|</span>  <span class="mi">100</span> <span class="n">Trying</span>               <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|&lt;--------------------------+</span>                           <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">|</span>  <span class="n">Execute</span> <span class="n">flow</span> <span class="n">actions</span>     <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">+--------------------------&gt;|</span>
      <span class="o">|</span>  <span class="mi">180</span> <span class="n">Ringing</span> <span class="o">/</span> <span class="mi">200</span> <span class="n">OK</span>     <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|&lt;--------------------------+&lt;--------------------------+</span>
      <span class="o">|</span>                           <span class="o">|</span>                           <span class="o">|</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Call Verification</strong>: When an incoming call is received, the VoIPBIN system verifies the call’s authenticity and checks for any potential security risks, such as spoofed or fraudulent calls. This verification process ensures that legitimate calls are allowed to proceed.</p></li>
<li><p><strong>Determine Call Flow</strong>: After successful verification, the system determines the appropriate call flow based on the destination of the incoming call. The call flow includes a set of predefined actions and configurations tailored to handle calls directed to a specific user, department, or interactive voice response (IVR) system.</p></li>
<li><p><strong>Execute Call Flow</strong>: Once the call flow is determined, the system proceeds to execute it without delay. The call flow actions are triggered in accordance with the predefined configuration for the call destination.</p></li>
<li><p><strong>End the Call</strong>: After executing the call flow actions, the system initiates the process of ending the call. The call is terminated, and the connection with the external party is disconnected.</p></li>
</ul>
<p>By following this streamlined call flow process, the VoIPBIN system efficiently handles incoming calls, ensures their secure and verified handling, and executes the appropriate flow actions based on the call destination. After executing the call flow, the system promptly ends the call, completing the call handling process for the incoming call. Customizable flow actions allow users to tailor the call handling process according to their application’s needs, optimizing user experience and call management efficiency.</p>
<img alt="_images/call_incoming.png" src="_images/call_incoming.png" />
</section>
<section id="outgoing-call">
<h3>Outgoing call<a class="headerlink" href="#outgoing-call" title="Link to this heading"></a></h3>
<p>The VoIPBIN system offers the outgoing call feature, enabling users to initiate calls to external parties through their VoIP services. This feature is commonly used in various communication applications and call center setups to establish connections with customers, clients, or other users outside the organization.
To utilize the outgoing call feature, users need to provide the necessary call parameters, such as the destination phone number, caller ID information, and any additional call settings. These parameters are submitted to the VoIPBIN system, which then processes the request and attempts to establish a connection with the specified destination.</p>
</section>
<section id="execution-of-call-flow-for-outgoing-call">
<h3>Execution of Call Flow for outgoing call<a class="headerlink" href="#execution-of-call-flow-for-outgoing-call" title="Link to this heading"></a></h3>
<p>Once the outgoing call request is initiated, the VoIPBIN system starts the process of connecting to the destination phone number. During this phase, the system waits for the called party to answer the call. The call flow refers to the sequence of actions and events that occur from the moment the call is initiated until it is successfully answered or terminated.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Your</span> <span class="n">Application</span>               <span class="n">VoIPBIN</span>                    <span class="n">Destination</span>
      <span class="o">|</span>                           <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|</span>  <span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span>           <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|</span>  <span class="p">(</span><span class="k">with</span> <span class="n">flow</span> <span class="n">actions</span><span class="p">)</span>      <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">+--------------------------&gt;|</span>                           <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">|</span>  <span class="n">INVITE</span>                   <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">+--------------------------&gt;|</span>
      <span class="o">|</span>  <span class="n">Call</span> <span class="n">created</span>             <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|</span>  <span class="n">status</span><span class="p">:</span> <span class="s2">&quot;dialing&quot;</span>        <span class="o">|</span>  <span class="mi">180</span> <span class="n">Ringing</span>              <span class="o">|</span>
      <span class="o">|&lt;--------------------------+&lt;--------------------------+</span>
      <span class="o">|</span>                           <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|</span>  <span class="n">Webhook</span><span class="p">:</span> <span class="s2">&quot;ringing&quot;</span>       <span class="o">|</span>  <span class="mi">200</span> <span class="n">OK</span> <span class="p">(</span><span class="n">answered</span><span class="p">)</span>        <span class="o">|</span>
      <span class="o">|&lt;--------------------------+&lt;--------------------------+</span>
      <span class="o">|</span>                           <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|</span>  <span class="n">Webhook</span><span class="p">:</span> <span class="s2">&quot;progressing&quot;</span>   <span class="o">|</span>  <span class="o">&lt;=====================&gt;</span>  <span class="o">|</span>
      <span class="o">|&lt;--------------------------+</span>  <span class="n">Execute</span> <span class="n">flow</span> <span class="n">actions</span>     <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">|</span>                           <span class="o">|</span>
</pre></div>
</div>
<p>The call flow execution occurs as follows:</p>
<ul class="simple">
<li><p><strong>Initiation</strong>: The user triggers the outgoing call request, providing the necessary call parameters.</p></li>
<li><p><strong>Call Setup</strong>: The VoIPBIN system processes the request and establishes a connection with the destination phone number.</p></li>
<li><p><strong>Wait for Call Answer</strong>: After the call setup, the system waits for the called party to answer the call. This waiting period involves ringing the called party’s phone and monitoring the call status.</p></li>
<li><p><strong>Call Answered</strong>: Once the called party answers the outgoing call, the system proceeds to execute the predefined call flow actions.</p></li>
<li><p><strong>Flow Actions Execution</strong>: The call flow actions are a set of customizable operations that are executed upon call answer. These actions can include call recording, call routing, call analytics, notifications, and post-call actions, among others.</p></li>
</ul>
<p>The call flow execution is critical for ensuring a smooth and efficient communication experience. By customizing the flow actions, users can tailor the call handling process to meet the specific requirements of their application or service, enhancing user engagement and overall call management.</p>
<img alt="_images/call_outgoing.png" src="_images/call_outgoing.png" />
</section>
<section id="error-handling-and-termination">
<h3>Error handling and Termination<a class="headerlink" href="#error-handling-and-termination" title="Link to this heading"></a></h3>
<p>During the incoming/outgoing call process, various errors may occur, such as call failures or network issues.
The VoIPBIN system have robust error handling mechanisms to gracefully manage such situations. In case of a failed call attempt or call rejection, the system log relevant information for further analysis or reporting purposes.</p>
<p><strong>Common Error Scenarios</strong></p>
</section>
<section id="call-concept">
<h3>Call concept<a class="headerlink" href="#call-concept" title="Link to this heading"></a></h3>
<p>The concept of a call in VoIPBIN departs from the traditional 1:1 call model. Here’s an overview:</p>
<p>In VoIPBIN, a call includes source, destination, and additional metadata. Moreover, the call can be associated with multiple other calls, creating a dynamic journey that goes beyond the standard 1:1 connection. Envision a call’s trajectory as it connects to an agent and then diverges to another destination.</p>
<p>In VoIPBIN, the conventional call scenario A -&gt; B is delineated by two distinct calls:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span>            <span class="n">VoIPBIN</span>            <span class="n">B</span>
<span class="o">|&lt;--</span> <span class="n">Call</span> <span class="mi">1</span> <span class="o">---&gt;|</span>               <span class="o">|</span>
<span class="o">|</span>               <span class="o">|&lt;---</span> <span class="n">Call</span> <span class="mi">2</span> <span class="o">--&gt;|</span>
<span class="o">|&lt;-----</span><span class="n">RTP</span><span class="o">-----&gt;|&lt;-----</span><span class="n">RTP</span><span class="o">-----&gt;|</span>
</pre></div>
</div>
<section id="comparison-traditional-call-concept-vs-voipbin-call-concept">
<h4>Comparison: Traditional Call Concept vs VoIPBIN Call Concept<a class="headerlink" href="#comparison-traditional-call-concept-vs-voipbin-call-concept" title="Link to this heading"></a></h4>
<p>Traditional Call Concept</p>
<ul class="simple">
<li><p>Follows a 1:1 model where a call is a direct connection between a source and a destination.</p></li>
<li><p>Typically involves a straightforward flow from the caller to the recipient.</p></li>
<li><p>Limited in handling complex call journeys or interactions with multiple parties.</p></li>
</ul>
<p>VoIPBIN Call Concept</p>
<ul class="simple">
<li><p>Deviates from the traditional 1:1 model, allowing for more intricate call structures.</p></li>
<li><p>Encompasses source, destination, and additional metadata in a call.</p></li>
<li><p>Permits connections to multiple other calls, creating dynamic call journeys.</p></li>
<li><p>Visualizes a call’s path, which may involve connecting to an agent and branching to additional destinations.</p></li>
</ul>
<p>In summary, while the traditional call concept adheres to a simple point-to-point model, the VoIPBIN call concept introduces a more flexible and multifaceted approach, accommodating diverse call scenarios and interactions.</p>
</section>
</section>
<section id="related-documentation">
<h3>Related Documentation<a class="headerlink" href="#related-documentation" title="Link to this heading"></a></h3>
<p>Calls integrate with many VoIPBIN features. Use these links for detailed information:</p>
<p><strong>Recording a Call</strong></p>
<p>Capture call audio for compliance, training, or analysis.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Call</span>                              <span class="n">Recording</span>
<span class="o">+------------+</span>                    <span class="o">+------------+</span>
<span class="o">|</span> <span class="n">progressing</span><span class="o">|---</span><span class="n">recording_start</span><span class="o">-&gt;|</span> <span class="n">recording</span>  <span class="o">|</span>
<span class="o">|</span>            <span class="o">|</span>                    <span class="o">|</span>            <span class="o">|</span>
<span class="o">|</span>            <span class="o">|&lt;--</span><span class="n">recording_id</span><span class="o">-----|</span> <span class="n">available</span>  <span class="o">|</span>
<span class="o">+------------+</span>                    <span class="o">+------------+</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="recording_overview.html#recording-overview"><span class="std std-ref">Recording Overview</span></a> for recording lifecycle, storage, and best practices.</p>
<p><strong>Transcribing a Call</strong></p>
<p>Convert call audio to text in real-time.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Call</span>                              <span class="n">Transcription</span>
<span class="o">+------------+</span>                    <span class="o">+---------------+</span>
<span class="o">|</span> <span class="n">progressing</span><span class="o">|--</span><span class="n">transcribe_start</span><span class="o">-&gt;|</span> <span class="n">transcribing</span>  <span class="o">|</span>
<span class="o">|</span>            <span class="o">|</span>                    <span class="o">|</span>               <span class="o">|</span>
<span class="o">|</span>            <span class="o">|&lt;--</span><span class="n">transcript</span> <span class="n">events</span><span class="o">|</span> <span class="p">(</span><span class="n">streaming</span><span class="p">)</span>   <span class="o">|</span>
<span class="o">+------------+</span>                    <span class="o">+---------------+</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="transcribe_overview.html#transcribe-overview"><span class="std std-ref">Transcribe Overview</span></a> for transcription delivery and language support.</p>
<p><strong>Streaming Call Audio</strong></p>
<p>Access raw call audio via WebSocket for AI, analysis, or custom processing.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Call</span>                              <span class="n">Your</span> <span class="n">App</span>
<span class="o">+------------+</span>                    <span class="o">+---------------+</span>
<span class="o">|</span> <span class="n">progressing</span><span class="o">|&lt;==</span> <span class="n">WebSocket</span> <span class="o">====&gt;|</span>  <span class="n">AI</span> <span class="o">/</span> <span class="n">STT</span>     <span class="o">|</span>
<span class="o">|</span>            <span class="o">|</span>   <span class="p">(</span><span class="n">audio</span> <span class="n">stream</span><span class="p">)</span>  <span class="o">|</span>  <span class="n">Processing</span>   <span class="o">|</span>
<span class="o">+------------+</span>                    <span class="o">+---------------+</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="mediastream_overview.html#mediastream-overview"><span class="std std-ref">Media Stream Overview</span></a> for encapsulation types and integration patterns.</p>
<p><strong>Queuing a Call</strong></p>
<p>Route calls through agent queues for call center scenarios.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Call</span>                              <span class="n">Queue</span>
<span class="o">+------------+</span>                    <span class="o">+---------------+</span>
<span class="o">|</span>  <span class="n">incoming</span>  <span class="o">|---</span><span class="n">queue</span> <span class="n">action</span><span class="o">----&gt;|</span> <span class="n">waiting</span>       <span class="o">|</span>
<span class="o">|</span>            <span class="o">|</span>                    <span class="o">|</span>               <span class="o">|</span>
<span class="o">|</span>            <span class="o">|&lt;--</span><span class="n">agent</span> <span class="n">connected</span><span class="o">--|</span> <span class="n">service</span>       <span class="o">|</span>
<span class="o">+------------+</span>                    <span class="o">+---------------+</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="queue_overview.html#queue-overview"><span class="std std-ref">Queue Overview</span></a> for queue management and agent matching.</p>
<p><strong>Adding to Conference</strong></p>
<p>Join a call to a multi-party conference.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Call</span>                              <span class="n">Conference</span>
<span class="o">+------------+</span>                    <span class="o">+---------------+</span>
<span class="o">|</span> <span class="n">progressing</span><span class="o">|--</span><span class="n">join</span> <span class="n">action</span><span class="o">------&gt;|</span> <span class="n">progressing</span>   <span class="o">|</span>
<span class="o">|</span>            <span class="o">|</span>                    <span class="o">|</span>               <span class="o">|</span>
<span class="o">|</span>            <span class="o">|&lt;--</span><span class="n">audio</span> <span class="n">mixed</span><span class="o">------|</span> <span class="p">(</span><span class="nb">all</span> <span class="n">parties</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+------------+</span>                    <span class="o">+---------------+</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="conference_overview.html#conference-overview"><span class="std std-ref">Conference Overview</span></a> for conference types and participant management.</p>
</section>
</section>
<section id="transfer">
<span id="call-transfer"></span><h2>Transfer<a class="headerlink" href="#transfer" title="Link to this heading"></a></h2>
<p>CPaaS, or Communications Platform as a Service, is a cloud-based technology that allows developers to add real-time communication features to their applications, such as voice and messaging capabilities.
Call transfer is a common feature in CPaaS that allows an ongoing phone call to be transferred from one person to another, or from one device to another, without disrupting the conversation.</p>
<p>There are two main types of call transfer in CPaaS: blind transfer and attended transfer.</p>
<p>In both types of call transfer, the transfer can be done manually by the person initiating the transfer, or it can be automated using CPaaS software. Automated transfer is typically done using rules-based routing, which determines the appropriate person or device to transfer the call to based on predefined rules or criteria.</p>
<p>Call transfer is just one of many features available in CPaaS technology, which can help improve call handling, reduce call times, and improve overall customer service.</p>
<section id="blind-transfer">
<span id="call-transfer-blind-transfer"></span><h3>Blind Transfer<a class="headerlink" href="#blind-transfer" title="Link to this heading"></a></h3>
<p>Blind transfer is the simplest type of call transfer. In this type of transfer, the person initiating the transfer simply transfers the call to another person or phone number without first speaking to them. This is useful when the person receiving the call is known to be available and ready to take the call. Blind transfer is commonly used in call center environments where a caller needs to be routed to the appropriate agent or department.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Caller</span>           <span class="n">VoIPBIN</span>        <span class="n">Transferer</span>        <span class="n">Transferee</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>    <span class="n">Call</span> <span class="ow">in</span>       <span class="o">|</span> <span class="n">Call</span> <span class="ow">in</span>        <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>    <span class="n">progress</span>      <span class="o">|</span> <span class="n">progress</span>       <span class="o">|</span>                <span class="o">|</span>
<span class="o">|&lt;----------------&gt;|&lt;--------------&gt;|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Send</span> <span class="n">transfer</span>  <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Request</span>        <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|&lt;---------------|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Dial</span>           <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|--------------------------------&gt;|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>   <span class="n">Ring</span>           <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|&lt;-----------------|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Hangup</span>         <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|---------------&gt;|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>     <span class="n">Answer</span>     <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|&lt;--------------------------------|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>  <span class="n">Stop</span> <span class="n">ring</span>       <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|&lt;-----------------|</span>                <span class="o">|</span>                <span class="o">|</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The Caller initiates a call to the VoIPBIN and the call is in progress.</p></li>
<li><p>The Transferer, who is already on a call, decides to transfer the Caller to the Transferee.</p></li>
<li><p>The Transferer sends a transfer request to the VoIPBIN, indicating the Transferee’s number.</p></li>
<li><p>The VoIPBIN dials to the Transferee.</p></li>
<li><p>The VoIPBIN hangs up the transferer right after dials to the transferee.</p></li>
<li><p>The Transferee answers the call and is connected to the Caller.</p></li>
</ul>
<p>This is the basic process of an blind transfer using a CPaaS like VoIPBIN.</p>
</section>
<section id="attended-transfer">
<span id="call-transfer-attended-transfer"></span><h3>Attended Transfer<a class="headerlink" href="#attended-transfer" title="Link to this heading"></a></h3>
<p>Attended transfer, also known as consultative transfer, involves the person initiating the transfer first speaking to the person who will be taking the call. This allows the person initiating the transfer to provide context or information about the caller or the reason for the transfer. Once the person who will be taking the call is ready, the transfer is initiated and the original caller is connected to the new person or device. Attended transfer is commonly used in situations where the person receiving the call may need more information before taking the call, such as when transferring a call to a supervisor or manager.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Caller</span>           <span class="n">VoIPBIN</span>        <span class="n">Transferer</span>        <span class="n">Transferee</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>    <span class="n">Call</span> <span class="ow">in</span>       <span class="o">|</span> <span class="n">Call</span> <span class="ow">in</span>        <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>    <span class="n">progress</span>      <span class="o">|</span> <span class="n">progress</span>       <span class="o">|</span>                <span class="o">|</span>
<span class="o">|&lt;----------------&gt;|&lt;--------------&gt;|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Send</span> <span class="n">transfer</span>  <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Request</span>        <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|&lt;---------------|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Dial</span>           <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|--------------------------------&gt;|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>   <span class="n">MOH</span><span class="o">/</span><span class="n">Mute</span>       <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|&lt;-----------------|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>    <span class="n">Answer</span>      <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|&lt;--------------------------------|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Call</span> <span class="ow">in</span>        <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">progress</span>       <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|&lt;--------------&gt;|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span> <span class="n">Call</span> <span class="ow">in</span>        <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span> <span class="n">progress</span>       <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|&lt;-------------------------------&gt;|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Hangup</span>         <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|&lt;---------------|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>  <span class="n">MOH</span> <span class="n">off</span><span class="o">/</span><span class="n">Unmute</span>  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|&lt;-----------------|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>    <span class="n">Call</span> <span class="ow">in</span>       <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>    <span class="n">progress</span>      <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|&lt;----------------&gt;|</span>                <span class="o">|</span>                <span class="o">|</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The Caller initiates a call to the VoIPBIN, and the call is in progress with transferer.</p></li>
<li><p>The Transferer, who is already on a call, decides to transfer the Caller to the Transferee.</p></li>
<li><p>The Transferer sends a transfer request to the VoIPBIN, indicating the Transferee’s number.</p></li>
<li><p>The VoIPBIN dials to the Transferee.</p></li>
<li><p>The VoIPBIN puts the Caller on music on hold and mute.</p></li>
<li><p>The Transferee answers the call and is connected to the Transferer and talk to each other.</p></li>
<li><p>The Transferer drops out of the call.</p></li>
<li><p>The VoIPBIN turn off the Caller’s Music on hold and the Caller and Transferee can now hear each other.</p></li>
</ul>
<p>This is the basic process of an attended transfer using a CPaaS like VoIPBIN. It allows for seamless communication between parties and can help businesses manage their incoming calls more efficiently.</p>
</section>
</section>
<section id="groupcall">
<span id="call-groupcall"></span><h2>Groupcall<a class="headerlink" href="#groupcall" title="Link to this heading"></a></h2>
<p>The Groupcall feature in VoIPBIN is a blast calling functionality that enables team members to communicate in real-time. When a Group Call is initiated, an alert is sent to all team members, allowing them to join the call with a single click. The feature uses VoIP technology to enable high-quality audio communication and offers benefits such as increased productivity, improved collaboration, and enhanced connectivity.</p>
<section id="ringall">
<h3>Ringall<a class="headerlink" href="#ringall" title="Link to this heading"></a></h3>
<p>Ringall send the dial request to the all of destinations.</p>
<p>The ringall ring method is a way to make calls to multiple destinations simultaneously. When you initiate a groupcall using the ringall method, VoIPBIN will place calls to all of the destinations on your list at once.
This means that each destination’s phone will start ringing simultaneously, and the person who answers first will begin executing the call flow specified for that groupcall, while all other destinations that have not yet been answered will be hung up immediately.
This ensures that only one call is active at a time and the call flow is executed by the person who answered first.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Client</span>           <span class="n">VoIPBIN</span>        <span class="n">Destination</span><span class="o">-</span><span class="mi">1</span>    <span class="n">Destination</span><span class="o">-</span><span class="mi">2</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>    <span class="n">Groupcall</span>     <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>    <span class="n">request</span>       <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|-----------------&gt;|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Dial</span>           <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|---------------&gt;|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Dial</span>           <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|--------------------------------&gt;|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>         <span class="n">Answer</span> <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|&lt;--------------------------------|</span>
<span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span> <span class="n">Cancel</span>         <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|---------------&gt;|</span>                <span class="o">|</span>
</pre></div>
</div>
<p>The diagram shows the sequence of events for a Group Call request in VoIPBIN with two destination endpoints, Destination-1 and Destination-2.
* The Client initiates the Group Call request by sending a request message to the VoIPBIN server.
* The server then sends a Dial message to Destination-1 and Destination-2 to establish the call.
* After Destination-2 answers the call, it sends an Answer message back to the server.
* The VoIPBIN cancels the call to Destination-1 by sending a Cancel message to Destination-1.</p>
</section>
<section id="linear">
<h3>Linear<a class="headerlink" href="#linear" title="Link to this heading"></a></h3>
<p>The linear ring method is a way to call a list of destinations one by one, in a specific order.</p>
<p>When you initiate a groupcall using the linear method, VoIPBIN will call the first destination on your list. If that destination does not answer, VoIPBIN will move on to the next destination on the list and call it instead.
This process will continue until one of the destinations answers the call, at which point the call flow specified for the groupcall will be executed. If all of the destinations on the list have been called and none of them have answered, the call will end without any further action.</p>
<p>The linear method is useful when you want to call a list of destinations in a specific order and don’t want to simultaneously ring all destinations at once.</p>
<p>For example, you might use the linear method for a sales team to call potential clients one by one, in a specific order based on priority.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">groupcall1</span>            <span class="n">destinationA</span>       <span class="n">destinationB</span>        <span class="n">destinationC</span>
    <span class="o">|-----</span> <span class="n">ring</span> <span class="o">----------&gt;|</span>                   <span class="o">|</span>                   <span class="o">|</span>
    <span class="o">|&lt;----</span> <span class="n">no</span> <span class="n">answer</span> <span class="o">------|</span>                   <span class="o">|</span>                   <span class="o">|</span>
    <span class="o">|</span>                      <span class="o">|</span>                   <span class="o">|</span>                   <span class="o">|</span>
    <span class="o">|-----</span> <span class="n">ring</span> <span class="o">------------------------------&gt;|</span>                   <span class="o">|</span>
    <span class="o">|&lt;----</span> <span class="n">no</span> <span class="n">answer</span> <span class="o">--------------------------|</span>                   <span class="o">|</span>
    <span class="o">|</span>                      <span class="o">|</span>                   <span class="o">|</span>                   <span class="o">|</span>
    <span class="o">|-----</span> <span class="n">ring</span> <span class="o">--------------------------------------------------&gt;|</span>
    <span class="o">|&lt;----</span> <span class="n">answer</span> <span class="o">-------------------------------------------------|</span>
</pre></div>
</div>
</section>
<section id="nested-groupcall">
<h3>Nested groupcall<a class="headerlink" href="#nested-groupcall" title="Link to this heading"></a></h3>
<p>A nested groupcall is a groupcall that is included as one of the destinations in another groupcall. When a groupcall with a nested groupcall is initiated, the nested groupcall is also initiated, creating a “nested” groupcall within the main groupcall.</p>
<p>For example, let’s say you have a groupcall with the following list of destinations: Destination A, Destination B, and Destination C. Destination C is a nested groupcall that includes its own list of destinations: Destination X and Destination Y.</p>
<p>When you initiate the main groupcall, VoIPBIN will begin calling Destination A and Destination B simultaneously according to the ring method you’ve specified (either ringall or linear). When it reaches Destination C, the nested groupcall is initiated and VoIPBIN will begin calling Destination X and Destination Y according to the ring method specified in the nested groupcall.</p>
<p>Once a destination in the nested groupcall has answered the call, the flow specified for that groupcall is executed. The child groupcall informs the master groupcall that it has answered call. The master groupcall then hangs up any remaining calls that have not yet been answered in the child groupcall, and stops calling the remaining destinations in the main groupcall list.</p>
<p>In VoIPBIN, the main groupcall is considered the “master” groupcall and the nested groupcall is considered a “chained” groupcall. Each chained groupcall is assigned a unique ID, and the IDs of all chained groupcalls are stored in a list within the master groupcall. This allows VoIPBIN to keep track of all nested groupcalls and their current status within the main call.</p>
<p>It is also possible to have chained groupcalls within chained groupcalls, creating multiple levels of nesting. This means that a nested groupcall can itself include another groupcall as one of its destinations, forming a chain of groupcalls. The nested groupcalls can continue to be chained in a cascading manner, allowing for complex call flows and routing scenarios.</p>
<p>For example, the main groupcall may include a chained groupcall as one of its destinations, and that chained groupcall may, in turn, include another chained groupcall within it. This nesting can extend to multiple levels, providing a highly flexible and customizable approach to call routing and management.</p>
<p>By allowing nested and chained groupcalls, VoIPBIN empowers users to design and implement intricate call flows that cater to their specific needs. This functionality opens up possibilities for applications such as multi-level call routing, call forwarding to different departments or teams, and advanced call handling scenarios.</p>
<p>The ability to include nested groupcalls within a main groupcall is a powerful feature that allows for more complex call flows and routing strategies. It can be used, for example, to create more sophisticated call routing trees that can handle a wide range of call scenarios and use cases.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">groupcall1</span>            <span class="n">destinationA</span>        <span class="n">destinationB</span>        <span class="n">destinationC</span>
    <span class="o">|-----</span> <span class="n">ring</span> <span class="o">----------&gt;|</span>                   <span class="o">|</span>       <span class="p">(</span><span class="n">groupcall</span> <span class="n">destination</span> <span class="n">linear</span><span class="p">)</span>
    <span class="o">|-----</span> <span class="n">ring</span> <span class="o">------------------------------&gt;|</span>                   <span class="o">|</span>                         <span class="n">groupcall2</span>        <span class="n">destinationX</span>        <span class="n">destinationY</span>
    <span class="o">|-----</span> <span class="n">ring</span> <span class="o">--------------------------------------------------&gt;|--</span> <span class="n">start</span> <span class="n">a</span> <span class="n">nested</span> <span class="n">groupcall</span><span class="o">--&gt;|</span>                 <span class="o">|</span>                   <span class="o">|</span>
    <span class="o">|</span>                      <span class="o">|</span>                   <span class="o">|</span>                                                  <span class="o">|-----</span> <span class="n">ring</span> <span class="o">-----&gt;|</span>                   <span class="o">|</span>
    <span class="o">|</span>                      <span class="o">|</span>                   <span class="o">|</span>                                                  <span class="o">|&lt;--</span> <span class="n">no</span> <span class="n">answer</span> <span class="o">---|</span>                   <span class="o">|</span>
    <span class="o">|</span>                      <span class="o">|</span>                   <span class="o">|</span>                                                  <span class="o">|-----</span> <span class="n">ring</span> <span class="o">-------------------------&gt;|</span>
    <span class="o">|</span>                      <span class="o">|</span>                   <span class="o">|</span>                                                  <span class="o">|&lt;--</span> <span class="n">answer</span> <span class="o">--------------------------|</span>
    <span class="o">|&lt;----------------------------------------</span> <span class="n">inform</span> <span class="n">that</span> <span class="n">groupcall2</span> <span class="n">got</span> <span class="n">answered</span> <span class="n">call</span> <span class="o">----------|</span>
    <span class="o">|-----</span> <span class="n">cancel</span> <span class="o">--------&gt;|</span>                   <span class="o">|</span>
    <span class="o">|-----</span> <span class="n">cancel</span> <span class="o">----------------------------&gt;|</span>
</pre></div>
</div>
</section>
</section>
<section id="struct-call">
<span id="call-struct-call"></span><h2>Struct Call<a class="headerlink" href="#struct-call" title="Link to this heading"></a></h2>
<section id="call-struct-call-call">
<span id="id1"></span><h3>Call<a class="headerlink" href="#call-struct-call-call" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;flow_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;master_call_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;chained_call_ids&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">],</span>
    <span class="s2">&quot;recording_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;recording_ids&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">],</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="o">...</span>
    <span class="p">},</span>
    <span class="s2">&quot;destination&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="o">...</span>
    <span class="p">},</span>
    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="o">...</span>
    <span class="p">},</span>
    <span class="s2">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hangup_by&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hangup_reason&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_create&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_update&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_progressing&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_ringing&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_hangup&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>id: Call’s ID.</p></li>
<li><p>flow_id: Call’s flow id.</p></li>
<li><p><em>type</em>: Call’s type. See detail <a class="reference internal" href="call_struct_call.html#call-struct-call-type"><span class="std std-ref">here</span></a>.</p></li>
<li><p>master_call_id: Master call’s id. If the master_call_id set, it follows master call’s hangup.</p></li>
<li><p>chained_call_ids: List of chained call ids. If the call hangs up, the chained call also will hangup.</p></li>
<li><p>recording_id: Shows currently recording id.</p></li>
<li><p>recording_ids: List of recording ids.</p></li>
<li><p><em>source</em>: Source address info. See detail <a class="reference internal" href="common_struct_address.html#common-struct-address-address"><span class="std std-ref">here</span></a>.</p></li>
<li><p><em>destination</em>: Destination address info. See detail <a class="reference internal" href="common_struct_address.html#common-struct-address-address"><span class="std std-ref">here</span></a>.</p></li>
<li><p><em>status</em>: Call’s status. See detail <a class="reference internal" href="call_struct_call.html#call-struct-call-status"><span class="std std-ref">here</span></a>.</p></li>
<li><p><em>action</em>: Call’s current action. See detail <a class="reference internal" href="flow_struct_action.html#flow-struct-action"><span class="std std-ref">here</span></a>.</p></li>
<li><p><em>direction</em>: Call’s direction. See detail <a class="reference internal" href="call_struct_call.html#call-struct-call-direction"><span class="std std-ref">here</span></a>.</p></li>
<li><p><em>hangup_by</em>: Shows call’s hangup end. See detail <a class="reference internal" href="call_struct_call.html#call-struct-call-hangupby"><span class="std std-ref">here</span></a>.</p></li>
<li><p><em>hangup_reason</em>: Show call’s hangup reason. See detail <a class="reference internal" href="call_struct_call.html#call-struct-call-hangupreason"><span class="std std-ref">here</span></a>.</p></li>
</ul>
<section id="example">
<h4>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;d9d32881-12fd-4b19-a6b2-6d5b6b6acf76&quot;</span><span class="p">,</span>
    <span class="s2">&quot;flow_id&quot;</span><span class="p">:</span> <span class="s2">&quot;4553c074-c88d-49e5-9d47-5c01598ac099&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;flow&quot;</span><span class="p">,</span>
    <span class="s2">&quot;master_call_id&quot;</span><span class="p">:</span> <span class="s2">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;chained_call_ids&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s2">&quot;recording_id&quot;</span><span class="p">:</span> <span class="s2">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;recording_ids&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span>
        <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15551234567&quot;</span><span class="p">,</span>
        <span class="s2">&quot;target_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;destination&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span>
        <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15559876543&quot;</span><span class="p">,</span>
        <span class="s2">&quot;target_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;hangup&quot;</span><span class="p">,</span>
    <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;0db08d32-b7d7-470d-8bda-9feff0877077&quot;</span><span class="p">,</span>
        <span class="s2">&quot;next_id&quot;</span><span class="p">:</span> <span class="s2">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello. Thank you for calling. How can I help you today?&quot;</span><span class="p">,</span>
            <span class="s2">&quot;gender&quot;</span><span class="p">:</span> <span class="s2">&quot;female&quot;</span><span class="p">,</span>
            <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;tm_execute&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-05-01 15:10:38.785510878&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;outgoing&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hangup_by&quot;</span><span class="p">:</span> <span class="s2">&quot;local&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hangup_reason&quot;</span><span class="p">:</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_create&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-05-01 15:10:23.414798&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_update&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-05-01 15:10:44.781000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_progressing&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-05-01 15:10:38.721000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_ringing&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-05-01 15:10:26.978000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_hangup&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-05-01 15:10:44.781000&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="type">
<span id="call-struct-call-type"></span><h3>Type<a class="headerlink" href="#type" title="Link to this heading"></a></h3>
<p>Call’s type.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>flow</p></td>
<td><p>Executing the call-flow</p></td>
</tr>
<tr class="row-odd"><td><p>conference</p></td>
<td><p>Conference call.</p></td>
</tr>
<tr class="row-even"><td><p>sip-service</p></td>
<td><p>sip-service call. Will execute the corresponding the pre-defined sip-service by the destination.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="status">
<span id="call-struct-call-status"></span><h3>Status<a class="headerlink" href="#status" title="Link to this heading"></a></h3>
<p>Call’s status.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Status</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dialing</p></td>
<td><p>The call is created. We are dialing to the destination.</p></td>
</tr>
<tr class="row-odd"><td><p>ringing</p></td>
<td><p>The destination has confirmed that the call is ringng.</p></td>
</tr>
<tr class="row-even"><td><p>progressing</p></td>
<td><p>The call has answered. The both endpoints are talking to each other.</p></td>
</tr>
<tr class="row-odd"><td><p>terminating</p></td>
<td><p>The call is terminating.</p></td>
</tr>
<tr class="row-even"><td><p>canceling</p></td>
<td><p>The call originator is canceling the call.</p></td>
</tr>
<tr class="row-odd"><td><p>hangup</p></td>
<td><p>The call has been completed.</p></td>
</tr>
</tbody>
</table>
<p><strong>state diagram</strong></p>
<img alt="_images/call_struct_status.png" src="_images/call_struct_status.png" />
</section>
<section id="direction">
<span id="call-struct-call-direction"></span><h3>Direction<a class="headerlink" href="#direction" title="Link to this heading"></a></h3>
<p>Call’s direction.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Direction</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>incoming</p></td>
<td><p>The call was coming from the outside of VoIPBIN.</p></td>
</tr>
<tr class="row-odd"><td><p>outgoing</p></td>
<td><p>The call was generated by VoIPBIN.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="hangup-by">
<span id="call-struct-call-hangupby"></span><h3>Hangup by<a class="headerlink" href="#hangup-by" title="Link to this heading"></a></h3>
<p>The Hangup by shows which endpoint sent the hangup request first.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>hangup by</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>remote</p></td>
<td><p>The remote end hangup the call first.</p></td>
</tr>
<tr class="row-odd"><td><p>local</p></td>
<td><p>The local end hangup the call first.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="hangup-reason">
<span id="call-struct-call-hangupreason"></span><h3>Hangup reason<a class="headerlink" href="#hangup-reason" title="Link to this heading"></a></h3>
<p>Shows why the call was hungup.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Reason</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>normal</p></td>
<td><p>The call has ended after answer.</p></td>
</tr>
<tr class="row-odd"><td><p>failed</p></td>
<td><p>The call attempt(signal) was not reached to the phone network.</p></td>
</tr>
<tr class="row-even"><td><p>busy</p></td>
<td><p>The destination is on the line with another caller.</p></td>
</tr>
<tr class="row-odd"><td><p>cancel</p></td>
<td><p>Call was cancelled by the originator before it was answered.</p></td>
</tr>
<tr class="row-even"><td><p>timeout</p></td>
<td><p>Call reached max call duration after it was answered.</p></td>
</tr>
<tr class="row-odd"><td><p>noanswer</p></td>
<td><p>Destination didn’t answer until destination’s timeout.</p></td>
</tr>
<tr class="row-even"><td><p>dialout</p></td>
<td><p>The call reached dialing timeout before it was answered. This timeout is fired by our time out(outgoing call).</p></td>
</tr>
<tr class="row-odd"><td><p>amd</p></td>
<td><p>Hangup caused by the action type amd. The call’s amd action result hung up the call.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="struct-groupcall">
<span id="call-struct-groupcall"></span><h2>Struct Groupcall<a class="headerlink" href="#struct-groupcall" title="Link to this heading"></a></h2>
<section id="call-struct-groupcall-groupcall">
<span id="id2"></span><h3>Groupcall<a class="headerlink" href="#call-struct-groupcall-groupcall" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="o">...</span>
    <span class="p">},</span>
    <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="o">...</span>
        <span class="p">},</span>
        <span class="o">...</span>
    <span class="p">],</span>
    <span class="s2">&quot;ring_method&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;answer_method&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;answer_call_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;call_ids&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
       <span class="o">...</span>
    <span class="p">],</span>
    <span class="s2">&quot;tm_create&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_update&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_delete&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>id: Groupcall’s ID.</p></li>
<li><p>customer_id: Customer’s ID</p></li>
<li><p><em>source</em>: Source address info. See detail <a class="reference internal" href="common_struct_address.html#common-struct-address-address"><span class="std std-ref">here</span></a>.</p></li>
<li><p><em>destinations</em>: List of destination addresses info. See detail <a class="reference internal" href="common_struct_address.html#common-struct-address-address"><span class="std std-ref">here</span></a>.</p></li>
<li><p><em>ring_method</em>: Ring method. See detail <a class="reference internal" href="call_struct_groupcall.html#call-struct-groupcall-ring-method"><span class="std std-ref">here</span></a></p></li>
<li><p><em>answer_method</em>: Answering method. See detail <a class="reference internal" href="call_struct_groupcall.html#call-struct-groupcall-answer-method"><span class="std std-ref">here</span></a></p></li>
<li><p>answer_call_id: Represents answered call id.</p></li>
<li><p>call_ids: List of created call ids.</p></li>
</ul>
<section id="id3">
<h4>Example<a class="headerlink" href="#id3" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;d8596b14-4d8e-4a86-afde-642b46d59ac7&quot;</span><span class="p">,</span>
    <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="s2">&quot;5e4a0680-804e-11ec-8477-2fea5968d85b&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span>
        <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15551234567&quot;</span><span class="p">,</span>
        <span class="s2">&quot;target_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;endpoint&quot;</span><span class="p">,</span>
            <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;test11@test&quot;</span><span class="p">,</span>
            <span class="s2">&quot;target_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;endpoint&quot;</span><span class="p">,</span>
            <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;test12@test&quot;</span><span class="p">,</span>
            <span class="s2">&quot;target_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;ring_method&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;answer_method&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;answer_call_id&quot;</span><span class="p">:</span> <span class="s2">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;call_ids&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;3c77eb43-2098-4890-bb6c-5af0707ba4a6&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;tm_create&quot;</span><span class="p">:</span> <span class="s2">&quot;2023-04-21 15:33:28.569053&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_update&quot;</span><span class="p">:</span> <span class="s2">&quot;9999-01-01 00:00:00.000000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_delete&quot;</span><span class="p">:</span> <span class="s2">&quot;9999-01-01 00:00:00.000000&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="ring-method">
<span id="call-struct-groupcall-ring-method"></span><h3>Ring method<a class="headerlink" href="#ring-method" title="Link to this heading"></a></h3>
<p>Groupcall’s ringing method.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ring_all</p></td>
<td><p>Make a call to the all destinations at once.</p></td>
</tr>
<tr class="row-odd"><td><p>linear</p></td>
<td><p>Make a call to the destination one-by-one in a linear.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="answer-method">
<span id="call-struct-groupcall-answer-method"></span><h3>Answer method<a class="headerlink" href="#answer-method" title="Link to this heading"></a></h3>
<p>Call’s status.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>hangup_others</p></td>
<td><p>Hang up the other calls.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tutorial">
<span id="call-tutorial"></span><h2>Tutorial<a class="headerlink" href="#tutorial" title="Link to this heading"></a></h2>
<section id="simple-outbound-call-with-tts">
<h3>Simple outbound call with TTS<a class="headerlink" href="#simple-outbound-call-with-tts" title="Link to this heading"></a></h3>
<p>Making an outbound call with TTS(Text-to-Speech) action.
When the destination answer the call, it will speak the given text message.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl --location --request POST &#39;https://api.voipbin.net/v1.0/calls?token=&lt;YOUR_AUTH_TOKEN&gt;&#39; \
    --header &#39;Content-Type: application/json&#39; \
    --data-raw &#39;{
        &quot;source&quot;: {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15551234567&quot;
        },
        &quot;destinations&quot;: [
            {
                &quot;type&quot;: &quot;tel&quot;,
                &quot;target&quot;: &quot;+15559876543&quot;
            }
        ],
        &quot;actions&quot;: [
            {
                &quot;type&quot;: &quot;talk&quot;,
                &quot;option&quot;: {
                    &quot;text&quot;: &quot;hello. welcome to voipbin. This is test message. This audio file is generated dynamically by the tts module. Please enjoy the voipbin service. Thank you. Bye&quot;,
                    &quot;gender&quot;: &quot;female&quot;,
                    &quot;language&quot;: &quot;en-US&quot;
                }
            }
        ]
    }&#39;
</pre></div>
</div>
</section>
<section id="simple-outbound-call-with-media-file-play">
<h3>Simple outbound call with media file play<a class="headerlink" href="#simple-outbound-call-with-media-file-play" title="Link to this heading"></a></h3>
<p>Making an outbound call with media file play action.
When the destination answer the call, it will play the given media file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl --location --request POST &#39;https://api.voipbin.net/v1.0/calls?token=&lt;YOUR_AUTH_TOKEN&gt;&#39; \
--header &#39;Content-Type: application/json&#39; \
--data-raw &#39;{
    &quot;source&quot;: {
        &quot;type&quot;: &quot;tel&quot;,
        &quot;target&quot;: &quot;+15551234567&quot;
    },
    &quot;destinations&quot;: [
        {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15559876543&quot;
        }
    ],
    &quot;actions&quot;: [
        {
            &quot;type&quot;: &quot;play&quot;,
            &quot;option&quot;: {
                &quot;stream_urls&quot;: [
                    &quot;https://github.com/pchero/asterisk-medias/raw/master/samples_codec/pcm_samples/example-mono_16bit_8khz_pcm.wav&quot;
                ]
            }
        }
    ]
}&#39;

[
    {
        &quot;id&quot;: &quot;a023bfa8-1091-4e94-8eaa-7f01fbecc71a&quot;,
        &quot;user_id&quot;: 1,
        &quot;flow_id&quot;: &quot;f089791a-ac78-4ea0-be88-8a8e131f9fc5&quot;,
        &quot;conf_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
        &quot;type&quot;: &quot;flow&quot;,
        &quot;master_call_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
        &quot;chained_call_ids&quot;: [],
        &quot;recording_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
        &quot;recording_ids&quot;: [],
        &quot;source&quot;: {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15551234567&quot;,
            &quot;name&quot;: &quot;&quot;
        },
        &quot;destination&quot;: {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15559876543&quot;,
            &quot;name&quot;: &quot;&quot;
        },
        &quot;status&quot;: &quot;dialing&quot;,
        &quot;direction&quot;: &quot;outgoing&quot;,
        &quot;hangup_by&quot;: &quot;&quot;,
        &quot;hangup_reason&quot;: &quot;&quot;,
        &quot;tm_create&quot;: &quot;2021-02-04 04:44:20.904662&quot;,
        &quot;tm_update&quot;: &quot;&quot;,
        &quot;tm_progressing&quot;: &quot;&quot;,
        &quot;tm_ringing&quot;: &quot;&quot;,
        &quot;tm_hangup&quot;: &quot;&quot;
    }
]
</pre></div>
</div>
</section>
<section id="simple-outbound-call-with-tts-and-connect">
<h3>Simple outbound call with TTS and connect<a class="headerlink" href="#simple-outbound-call-with-tts-and-connect" title="Link to this heading"></a></h3>
<p>Making an outbound call with TTS(Text-to-Speech) and connect to other destination.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -k --location --request POST &#39;https://api.voipbin.net/v1.0/calls?token=&lt;YOUR_AUTH_TOKEN&gt;&#39; \
--header &#39;Content-Type: application/json&#39; \
--header &#39;Cookie: token=&lt;YOUR_AUTH_TOKEN&gt;&#39; \
--data-raw &#39;{
    &quot;source&quot;: {
        &quot;type&quot;: &quot;tel&quot;,
        &quot;target&quot;: &quot;+15559876543&quot;
    },
    &quot;destinations&quot;: [
        {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15559876543&quot;
        }
    ],
    &quot;actions&quot;: [
        {
            &quot;type&quot;: &quot;talk&quot;,
            &quot;option&quot;: {
                &quot;text&quot;: &quot;hello. welcome to voipbin. This is test message. This audio file is generated dynamically by the tts module. Please enjoy the voipbin service.&quot;,
                &quot;gender&quot;: &quot;female&quot;,
                &quot;language&quot;: &quot;en-US&quot;
            }
        },
        {
            &quot;type&quot;: &quot;connect&quot;,
            &quot;option&quot;: {
                &quot;source&quot;: {
                    &quot;type&quot;: &quot;tel&quot;,
                    &quot;target&quot;: &quot;+15559876543&quot;
                },
                &quot;destinations&quot;: [
                    {
                        &quot;type&quot;: &quot;tel&quot;,
                        &quot;target&quot;: &quot;+15551111111&quot;
                    }
                ]
            }
        }
    ]
}&#39;

[
    {
        &quot;id&quot;: &quot;9f6265bc-6b59-4e80-a906-2679aca11455&quot;,
        &quot;user_id&quot;: 1,
        &quot;flow_id&quot;: &quot;d665fbc0-6dd8-44bc-99ea-2ae54bc59428&quot;,
        &quot;conf_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
        &quot;type&quot;: &quot;flow&quot;,
        &quot;master_call_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
        &quot;chained_call_ids&quot;: [],
        &quot;recording_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
        &quot;recording_ids&quot;: [],
        &quot;source&quot;: {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15559876543&quot;,
            &quot;name&quot;: &quot;&quot;
        },
        &quot;destination&quot;: {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15559876543&quot;,
            &quot;name&quot;: &quot;&quot;
        },
        &quot;status&quot;: &quot;dialing&quot;,
        &quot;direction&quot;: &quot;outgoing&quot;,
        &quot;hangup_by&quot;: &quot;&quot;,
        &quot;hangup_reason&quot;: &quot;&quot;,
        &quot;tm_create&quot;: &quot;2021-02-06 09:52:49.941865&quot;,
        &quot;tm_update&quot;: &quot;&quot;,
        &quot;tm_progressing&quot;: &quot;&quot;,
        &quot;tm_ringing&quot;: &quot;&quot;,
        &quot;tm_hangup&quot;: &quot;&quot;
    }
]
</pre></div>
</div>
</section>
<section id="simple-outbound-call-with-talk-and-digits-send">
<h3>Simple outbound call with talk and digits_send<a class="headerlink" href="#simple-outbound-call-with-talk-and-digits-send" title="Link to this heading"></a></h3>
<p>Making an outbound call. After answer the call, it will play the TTS and then send the DTMFs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span>
        <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15551234567&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span>
            <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15559876543&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;This is dtmf send test call. Please wait.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;gender&quot;</span><span class="p">:</span> <span class="s2">&quot;female&quot;</span><span class="p">,</span>
                <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;dtmf_send&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;dtmfs&quot;</span><span class="p">:</span> <span class="s2">&quot;1234567890&quot;</span><span class="p">,</span>
                <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
                <span class="s2">&quot;interval&quot;</span><span class="p">:</span> <span class="mi">500</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Thank you. DTMF send test has done.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;gender&quot;</span><span class="p">:</span> <span class="s2">&quot;female&quot;</span><span class="p">,</span>
                <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>

<span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;d7520a58-0b07-4dd7-ab72-a4e2d1979ec0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;user_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;flow_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0f4bd9bc-9df5-4a5b-9465-2189822a3019&quot;</span><span class="p">,</span>
        <span class="s2">&quot;conf_id&quot;</span><span class="p">:</span> <span class="s2">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;flow&quot;</span><span class="p">,</span>
        <span class="s2">&quot;master_call_id&quot;</span><span class="p">:</span> <span class="s2">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="p">,</span>
        <span class="s2">&quot;chained_call_ids&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;recording_id&quot;</span><span class="p">:</span> <span class="s2">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="p">,</span>
        <span class="s2">&quot;recording_ids&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span>
            <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15551234567&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;destination&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span>
            <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15559876543&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;dialing&quot;</span><span class="p">,</span>
        <span class="s2">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;outgoing&quot;</span><span class="p">,</span>
        <span class="s2">&quot;hangup_by&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;hangup_reason&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tm_create&quot;</span><span class="p">:</span> <span class="s2">&quot;2021-02-08 03:59:33.281711&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tm_update&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tm_progressing&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tm_ringing&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tm_hangup&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="simple-outbound-call-with-branch">
<h3>Simple outbound call with Branch<a class="headerlink" href="#simple-outbound-call-with-branch" title="Link to this heading"></a></h3>
<p>Making an outbound call with brach. It will get the digits from the call and will execute the branch.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>              <span class="n">Start</span>
                <span class="o">|</span>
                <span class="o">|</span>
<span class="o">------------&gt;</span>  <span class="n">Talk</span><span class="p">(</span><span class="s2">&quot;Press 1 for show must go on. Press 2 for bohemian rhapsody. Press 3 for another one bites the dust&quot;</span><span class="p">)</span>
<span class="o">|</span>               <span class="o">|</span>
<span class="o">|</span>               <span class="o">|</span>
<span class="o">|</span>              <span class="n">Digit</span><span class="p">(</span><span class="n">DTMF</span><span class="p">)</span> <span class="n">receive</span>
<span class="o">|</span>               <span class="o">|</span>
<span class="o">|</span>               <span class="o">|</span>
<span class="o">|</span>       <span class="o">-----------------------------------------------</span>
<span class="o">|</span>       <span class="o">|</span>           <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>     <span class="n">default</span>      <span class="s2">&quot;1&quot;</span>              <span class="s2">&quot;2&quot;</span>              <span class="s2">&quot;3&quot;</span>
<span class="o">|</span>       <span class="o">|</span>           <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>       <span class="o">|</span>           <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>       <span class="o">|</span>          <span class="n">Talk</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>        <span class="n">Talk</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>        <span class="n">Talk</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="o">|</span>       <span class="o">|</span>           <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>       <span class="o">|</span>           <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span>       <span class="o">|</span>          <span class="n">Hangup</span>          <span class="n">Hangup</span>           <span class="n">Hangup</span>
<span class="o">|</span>       <span class="o">|</span>
<span class="o">|</span>       <span class="o">|</span>
<span class="o">|</span>      <span class="n">Talk</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="o">|</span>       <span class="o">|</span>
<span class="o">----</span><span class="n">goto</span><span class="p">(</span><span class="n">loop</span> <span class="mi">2</span> <span class="n">times</span><span class="p">)</span>
        <span class="o">|</span>
        <span class="o">|</span>
       <span class="n">Talk</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="o">|</span>
        <span class="o">|</span>
       <span class="n">Hangup</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl --location --request POST &#39;https://api.voipbin.net/v1.0/calls?token=&lt;YOUR_AUTH_TOKEN&gt;&#39; \
--header &#39;Content-Type: application/json&#39; \
--header &#39;Cookie: token=&lt;YOUR_AUTH_TOKEN&gt;&#39; \
--data-raw &#39;{
    &quot;source&quot;: {
        &quot;type&quot;: &quot;tel&quot;,
        &quot;target&quot;: &quot;+15551234567&quot;
    },
    &quot;destinations&quot;: [
        {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15559876543&quot;
        }
    ],
    &quot;actions&quot;: [
        {
            &quot;id&quot;: &quot;b8781e56-c524-11ec-889f-d37b0dbb7eb8&quot;,
            &quot;type&quot;: &quot;talk&quot;,
            &quot;option&quot;: {
                &quot;text&quot;: &quot;Hello. This is branch test. Press 1 for show must go on. Press 2 for bohemian rhapsody. Press 3 for another one bites the dust&quot;,
                &quot;gender&quot;: &quot;female&quot;,
                &quot;language&quot;: &quot;en-US&quot;
            }
        },
        {
            &quot;type&quot;: &quot;digits_receive&quot;,
            &quot;option&quot;: {
                &quot;duration&quot;: 5000,
                &quot;length&quot;: 1
            }
        },
        {
            &quot;type&quot;: &quot;branch&quot;,
            &quot;option&quot;: {
                &quot;default_target_id&quot;: &quot;ed9705ca-c524-11ec-a3fb-8feb7731ad45&quot;,
                &quot;target_ids&quot;: {
                    &quot;1&quot;: &quot;c3eb8e62-c524-11ec-94c5-abafec8af561&quot;,
                    &quot;2&quot;: &quot;dc87123e-c524-11ec-89c6-5fb18da14034&quot;,
                    &quot;3&quot;: &quot;e70fb030-c524-11ec-b657-ebec72f097ef&quot;
                }
            }
        },
        {
            &quot;id&quot;: &quot;c3eb8e62-c524-11ec-94c5-abafec8af561&quot;,
            &quot;type&quot;: &quot;talk&quot;,
            &quot;option&quot;: {
                &quot;text&quot;: &quot;Empty spaces, what are we living for? Abandoned places, I guess we know the score, on and on. Does anybody know what we are looking for? Another hero, another mindless crime. Behind the curtain, in the pantomime&quot;,
                &quot;gender&quot;: &quot;female&quot;,
                &quot;language&quot;: &quot;en-US&quot;
            }
        },
        {
            &quot;type&quot;: &quot;hangup&quot;
        },
        {
            &quot;id&quot;: &quot;dc87123e-c524-11ec-89c6-5fb18da14034&quot;,
            &quot;type&quot;: &quot;talk&quot;,
            &quot;option&quot;: {
                &quot;text&quot;: &quot;Mama, Just killed a man. Put a gun against his head, pulled my trigger. Now he&#39;\&#39;&#39;s dead. Mama, life had just begun, But now I&#39;\&#39;&#39;ve gone and thrown it all away.&quot;,
                &quot;gender&quot;: &quot;female&quot;,
                &quot;language&quot;: &quot;en-US&quot;
            }
        },
        {
            &quot;type&quot;: &quot;hangup&quot;
        },
        {
            &quot;id&quot;: &quot;e70fb030-c524-11ec-b657-ebec72f097ef&quot;,
            &quot;type&quot;: &quot;talk&quot;,
            &quot;option&quot;: {
                &quot;text&quot;: &quot;Steve walks warily down the street. With his brim pulled way down low. Ain&#39;\&#39;&#39;t no sound but the sound of his feet. Machine guns ready to go. Are you ready hey are you ready for this?&quot;,
                &quot;gender&quot;: &quot;female&quot;,
                &quot;language&quot;: &quot;en-US&quot;
            }
        },
        {
            &quot;type&quot;: &quot;hangup&quot;
        },
        {
            &quot;id&quot;: &quot;ed9705ca-c524-11ec-a3fb-8feb7731ad45&quot;,
            &quot;type&quot;: &quot;talk&quot;,
            &quot;option&quot;: {
                &quot;text&quot;: &quot;You didn&#39;\&#39;&#39;t choice correct number. Default selected.&quot;,
                &quot;gender&quot;: &quot;female&quot;,
                &quot;language&quot;: &quot;en-US&quot;
            }
        },
        {
            &quot;type&quot;: &quot;goto&quot;,
            &quot;option&quot;: {
                &quot;target_id&quot;: &quot;b8781e56-c524-11ec-889f-d37b0dbb7eb8&quot;,
                &quot;loop_count&quot;: 2
            }
        },
        {
            &quot;type&quot;: &quot;talk&quot;,
            &quot;option&quot;: {
                &quot;text&quot;: &quot;Loop over. Hangup the call. Thank you, good bye.&quot;,
                &quot;gender&quot;: &quot;female&quot;,
                &quot;language&quot;: &quot;en-US&quot;
            }
        },
        {
            &quot;type&quot;: &quot;hangup&quot;
        }
    ]
}&#39;

[
    {
        &quot;id&quot;: &quot;77517719-ffb9-4583-ba44-737ba991d685&quot;,
        &quot;flow_id&quot;: &quot;c0827e56-41ef-4fa1-9da0-a8a36fbb76c4&quot;,
        &quot;confbridge_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
        &quot;type&quot;: &quot;flow&quot;,
        &quot;master_call_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
        &quot;chained_call_ids&quot;: [],
        &quot;recording_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
        &quot;recording_ids&quot;: [],
        &quot;source&quot;: {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15551234567&quot;,
            &quot;target_name&quot;: &quot;&quot;,
            &quot;name&quot;: &quot;&quot;,
            &quot;detail&quot;: &quot;&quot;
        },
        &quot;destination&quot;: {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15559876543&quot;,
            &quot;target_name&quot;: &quot;&quot;,
            &quot;name&quot;: &quot;&quot;,
            &quot;detail&quot;: &quot;&quot;
        },
        &quot;status&quot;: &quot;dialing&quot;,
        &quot;action&quot;: {
            &quot;id&quot;: &quot;00000000-0000-0000-0000-000000000001&quot;,
            &quot;type&quot;: &quot;&quot;
        },
        &quot;direction&quot;: &quot;outgoing&quot;,
        &quot;hangup_by&quot;: &quot;&quot;,
        &quot;hangup_reason&quot;: &quot;&quot;,
        &quot;tm_create&quot;: &quot;2022-02-24 02:08:14.469405&quot;,
        &quot;tm_update&quot;: &quot;9999-01-01 00:00:00.000000&quot;,
        &quot;tm_progressing&quot;: &quot;9999-01-01 00:00:00.000000&quot;,
        &quot;tm_ringing&quot;: &quot;9999-01-01 00:00:00.000000&quot;,
        &quot;tm_hangup&quot;: &quot;9999-01-01 00:00:00.000000&quot;
    }
]
</pre></div>
</div>
</section>
<section id="get-call-list">
<h3>Get call list<a class="headerlink" href="#get-call-list" title="Link to this heading"></a></h3>
<p>Getting a list of calls.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -k --location --request GET &#39;https://api.voipbin.net/v1.0/calls?token=&lt;YOUR_AUTH_TOKEN&gt;&#39;

{
    &quot;result&quot;: [
        {
            &quot;id&quot;: &quot;9a7857ca-73ba-4000-8101-c47d3b48f9d1&quot;,
            &quot;user_id&quot;: 1,
            &quot;flow_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
            &quot;conf_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
            &quot;type&quot;: &quot;sip-service&quot;,
            &quot;master_call_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
            &quot;chained_call_ids&quot;: [],
            &quot;recording_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
            &quot;recording_ids&quot;: [],
            &quot;source&quot;: {
                &quot;type&quot;: &quot;tel&quot;,
                &quot;target&quot;: &quot;109&quot;,
                &quot;name&quot;: &quot;109&quot;
            },
            &quot;destination&quot;: {
                &quot;type&quot;: &quot;tel&quot;,
                &quot;target&quot;: &quot;972595897084&quot;,
                &quot;name&quot;: &quot;&quot;
            },
            &quot;status&quot;: &quot;hangup&quot;,
            &quot;direction&quot;: &quot;incoming&quot;,
            &quot;hangup_by&quot;: &quot;remote&quot;,
            &quot;hangup_reason&quot;: &quot;normal&quot;,
            &quot;tm_create&quot;: &quot;2021-02-06 09:47:10.018000&quot;,
            &quot;tm_update&quot;: &quot;2021-02-06 09:48:14.630000&quot;,
            &quot;tm_progressing&quot;: &quot;2021-02-06 09:47:10.626000&quot;,
            &quot;tm_ringing&quot;: &quot;&quot;,
            &quot;tm_hangup&quot;: &quot;2021-02-06 09:48:14.630000&quot;
        },
        ...
    ],
    &quot;next_page_token&quot;: &quot;2021-02-06 08:54:38.361000&quot;
}
</pre></div>
</div>
</section>
<section id="get-specific-call">
<h3>Get specific call<a class="headerlink" href="#get-specific-call" title="Link to this heading"></a></h3>
<p>Getting a given call uuid’s call info.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -k --location --request GET &#39;https://api.voipbin.net/v1.0/calls/f457951b-9918-44af-a834-2216b1cc31bc?token=&lt;YOUR_AUTH_TOKEN&gt;&#39;

{
    &quot;id&quot;: &quot;f457951b-9918-44af-a834-2216b1cc31bc&quot;,
    &quot;user_id&quot;: 1,
    &quot;flow_id&quot;: &quot;246aeabe-fab5-4a1b-8e98-852b50e89dd7&quot;,
    &quot;conf_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
    &quot;type&quot;: &quot;flow&quot;,
    &quot;master_call_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
    &quot;chained_call_ids&quot;: [],
    &quot;recording_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
    &quot;recording_ids&quot;: [
        &quot;142e8ef8-392c-4514-abf0-8656da5d2fdf&quot;
    ],
    &quot;source&quot;: {
        &quot;type&quot;: &quot;tel&quot;,
        &quot;target&quot;: &quot;+15551234567&quot;,
        &quot;name&quot;: &quot;&quot;
    },
    &quot;destination&quot;: {
        &quot;type&quot;: &quot;tel&quot;,
        &quot;target&quot;: &quot;+15559876543&quot;,
        &quot;name&quot;: &quot;&quot;
    },
    &quot;status&quot;: &quot;hangup&quot;,
    &quot;direction&quot;: &quot;outgoing&quot;,
    &quot;hangup_by&quot;: &quot;remote&quot;,
    &quot;hangup_reason&quot;: &quot;normal&quot;,
    &quot;tm_create&quot;: &quot;2021-01-29 03:17:54.349101&quot;,
    &quot;tm_update&quot;: &quot;2021-01-29 03:18:22.131000&quot;,
    &quot;tm_progressing&quot;: &quot;2021-01-29 03:18:07.810000&quot;,
    &quot;tm_ringing&quot;: &quot;2021-01-29 03:17:55.392000&quot;,
    &quot;tm_hangup&quot;: &quot;2021-01-29 03:18:22.131000&quot;
}
</pre></div>
</div>
</section>
<section id="make-a-groupcall">
<h3>Make a groupcall<a class="headerlink" href="#make-a-groupcall" title="Link to this heading"></a></h3>
<p>Make a groupcall to the multiple destinations.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl --location --request POST &#39;https://api.voipbin.net/v1.0/groupcalls?token=eyJhbGcslkj&#39; \
    --header &#39;Content-Type: application/json&#39; \
    --data-raw &#39;{
        &quot;source&quot;: {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15552222222&quot;
        },
        &quot;destinations&quot;: [
            {
                &quot;type&quot;: &quot;endpoint&quot;,
                &quot;target&quot;: &quot;test11@test&quot;
            },
            {
                &quot;type&quot;: &quot;endpoint&quot;,
                &quot;target&quot;: &quot;test12@test&quot;
            }
        ],
        &quot;actions&quot;: [
            {
                &quot;type&quot;: &quot;talk&quot;,
                &quot;option&quot;: {
                    &quot;text&quot;: &quot;hello. welcome to voipbin. This is test message. This audio file is generated dynamically by the tts module. Please enjoy the voipbin service. Thank you. Bye&quot;,
                    &quot;gender&quot;: &quot;female&quot;,
                    &quot;language&quot;: &quot;en-US&quot;
                }
            }
        ]
    }&#39;

{
    &quot;id&quot;: &quot;d8596b14-4d8e-4a86-afde-642b46d59ac7&quot;,
    &quot;customer_id&quot;: &quot;5e4a0680-804e-11ec-8477-2fea5968d85b&quot;,
    &quot;source&quot;: {
        &quot;type&quot;: &quot;tel&quot;,
        &quot;target&quot;: &quot;+15551234567&quot;,
        &quot;target_name&quot;: &quot;&quot;,
        &quot;name&quot;: &quot;&quot;,
        &quot;detail&quot;: &quot;&quot;
    },
    &quot;destinations&quot;: [
        {
            &quot;type&quot;: &quot;endpoint&quot;,
            &quot;target&quot;: &quot;test11@test&quot;,
            &quot;target_name&quot;: &quot;&quot;,
            &quot;name&quot;: &quot;&quot;,
            &quot;detail&quot;: &quot;&quot;
        },
        {
            &quot;type&quot;: &quot;endpoint&quot;,
            &quot;target&quot;: &quot;test12@test&quot;,
            &quot;target_name&quot;: &quot;&quot;,
            &quot;name&quot;: &quot;&quot;,
            &quot;detail&quot;: &quot;&quot;
        }
    ],
    &quot;ring_method&quot;: &quot;&quot;,
    &quot;answer_method&quot;: &quot;&quot;,
    &quot;answer_call_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
    &quot;call_ids&quot;: [
        &quot;3c77eb43-2098-4890-bb6c-5af0707ba4a6&quot;,
        &quot;2bcaff64-e05d-11ed-84a6-133172844032&quot;
    ],
    &quot;tm_create&quot;: &quot;2023-04-21 15:33:28.569053&quot;,
    &quot;tm_update&quot;: &quot;9999-01-01 00:00:00.000000&quot;,
    &quot;tm_delete&quot;: &quot;9999-01-01 00:00:00.000000&quot;
}
</pre></div>
</div>
</section>
</section>
<section id="internal-call-sequences">
<span id="call-sequences"></span><h2>Internal Call Sequences<a class="headerlink" href="#internal-call-sequences" title="Link to this heading"></a></h2>
<p>This section reveals how calls flow through VoIPBIN’s internal components. Understanding these sequences helps developers debug issues and optimize their integrations.</p>
<section id="inbound-pstn-call-flow">
<h3>Inbound PSTN Call Flow<a class="headerlink" href="#inbound-pstn-call-flow" title="Link to this heading"></a></h3>
<p>When someone calls your VoIPBIN number from a regular phone:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Inbound</span> <span class="n">PSTN</span> <span class="n">Call</span> <span class="o">-</span> <span class="n">Complete</span> <span class="n">Internal</span> <span class="n">Flow</span><span class="p">:</span>

<span class="n">PSTN</span> <span class="n">Carrier</span>     <span class="n">Kamailio</span>        <span class="n">Asterisk</span>      <span class="n">asterisk</span><span class="o">-</span><span class="n">proxy</span>    <span class="n">call</span><span class="o">-</span><span class="n">manager</span>     <span class="n">flow</span><span class="o">-</span><span class="n">manager</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span> <span class="n">SIP</span> <span class="n">INVITE</span>   <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">+-------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">Route</span> <span class="n">lookup</span>  <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="p">(</span><span class="n">destination</span>  <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>  <span class="n">number</span><span class="p">)</span>      <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">SIP</span> <span class="n">INVITE</span>    <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">+--------------&gt;|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">StasisStart</span>   <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="p">(</span><span class="n">ARI</span> <span class="n">event</span><span class="p">)</span>   <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">+--------------&gt;|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">RabbitMQ</span><span class="p">:</span>      <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">asterisk</span><span class="o">.</span><span class="n">all</span><span class="o">.</span><span class="n">event</span>              <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">+---------------&gt;|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span> <span class="n">Create</span> <span class="n">Call</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span> <span class="n">Record</span> <span class="p">(</span><span class="n">MySQL</span><span class="p">)</span> <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span> <span class="n">Lookup</span> <span class="n">Number</span>  <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span> <span class="o">-&gt;</span> <span class="n">Flow</span> <span class="n">ID</span>     <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span> <span class="n">RPC</span><span class="p">:</span> <span class="n">Start</span>     <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span> <span class="n">ActiveFlow</span>     <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">+---------------&gt;|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span> <span class="n">Create</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span> <span class="n">ActiveFlow</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span> <span class="n">Execute</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span> <span class="n">Action</span> <span class="mi">1</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>  <span class="n">RPC</span><span class="p">:</span> <span class="n">Answer</span>   <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|&lt;--------------------------------------+---------+</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="mi">200</span> <span class="n">OK</span>        <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|&lt;-------------+&lt;--------------+</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span> <span class="n">ACK</span>          <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">+-------------&gt;+--------------&gt;|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>   <span class="n">RTP</span> <span class="n">Media</span>  <span class="o">|</span>   <span class="n">RTP</span> <span class="n">Media</span>   <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|&lt;============&gt;|&lt;=============&gt;|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
</pre></div>
</div>
<p><strong>Key Internal Components:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Component</span> <span class="n">Responsibilities</span><span class="p">:</span>

<span class="n">Kamailio</span> <span class="p">(</span><span class="n">SIP</span> <span class="n">Proxy</span><span class="p">):</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Receives</span> <span class="n">SIP</span> <span class="kn">from</span><span class="w"> </span><span class="nn">carriers</span>             <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Authenticates</span> <span class="n">SIP</span> <span class="n">trunks</span>               <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Routes</span> <span class="n">to</span> <span class="n">appropriate</span> <span class="n">Asterisk</span>         <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Load</span> <span class="n">balances</span> <span class="n">across</span> <span class="n">Asterisk</span> <span class="n">farm</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Handles</span> <span class="n">NAT</span> <span class="n">traversal</span>                  <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">Asterisk</span> <span class="p">(</span><span class="n">Media</span> <span class="n">Server</span><span class="p">):</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Manages</span> <span class="n">call</span> <span class="n">channels</span>                  <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Handles</span> <span class="n">media</span> <span class="p">(</span><span class="n">RTP</span><span class="p">)</span>                    <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Executes</span> <span class="n">Stasis</span> <span class="n">application</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Provides</span> <span class="n">ARI</span> <span class="p">(</span><span class="n">Asterisk</span> <span class="n">REST</span> <span class="n">Interface</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Bridges</span> <span class="n">channels</span> <span class="k">for</span> <span class="n">conferencing</span>      <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">asterisk</span><span class="o">-</span><span class="n">proxy</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Connects</span> <span class="n">to</span> <span class="n">Asterisk</span> <span class="n">ARI</span> <span class="n">WebSocket</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Translates</span> <span class="n">ARI</span> <span class="n">events</span> <span class="n">to</span> <span class="n">RabbitMQ</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Publishes</span> <span class="n">to</span> <span class="n">asterisk</span><span class="o">.</span><span class="n">all</span><span class="o">.</span><span class="n">event</span> <span class="n">queue</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">One</span> <span class="n">proxy</span> <span class="n">per</span> <span class="n">Asterisk</span> <span class="n">instance</span>        <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">call</span><span class="o">-</span><span class="n">manager</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Processes</span> <span class="n">ARI</span> <span class="n">events</span>                   <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Creates</span><span class="o">/</span><span class="n">updates</span> <span class="n">call</span> <span class="n">records</span>           <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Manages</span> <span class="n">call</span> <span class="n">lifecycle</span>                 <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Triggers</span> <span class="n">flow</span> <span class="n">execution</span>                <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Publishes</span> <span class="n">call</span> <span class="n">events</span>                  <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">flow</span><span class="o">-</span><span class="n">manager</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Executes</span> <span class="n">flow</span> <span class="n">actions</span> <span class="n">sequentially</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Sends</span> <span class="n">ARI</span> <span class="n">commands</span> <span class="n">via</span> <span class="n">call</span><span class="o">-</span><span class="n">manager</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Manages</span> <span class="n">activeflow</span> <span class="n">state</span>               <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Handles</span> <span class="n">branching</span> <span class="ow">and</span> <span class="n">loops</span>            <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="outbound-api-call-flow">
<h3>Outbound API Call Flow<a class="headerlink" href="#outbound-api-call-flow" title="Link to this heading"></a></h3>
<p>When you create a call via the API:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Outbound</span> <span class="n">API</span> <span class="n">Call</span> <span class="o">-</span> <span class="n">Complete</span> <span class="n">Flow</span><span class="p">:</span>

<span class="n">Your</span> <span class="n">App</span>      <span class="n">api</span><span class="o">-</span><span class="n">manager</span>     <span class="n">call</span><span class="o">-</span><span class="n">manager</span>    <span class="n">flow</span><span class="o">-</span><span class="n">manager</span>     <span class="n">Asterisk</span>       <span class="n">Destination</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="n">POST</span> <span class="o">/</span><span class="n">calls</span>  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">+-------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span> <span class="n">Validate</span> <span class="n">JWT</span>  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span> <span class="n">RPC</span><span class="p">:</span> <span class="n">Create</span>   <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span> <span class="n">Call</span>          <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">+--------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">Create</span> <span class="n">Call</span>   <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">Record</span>        <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">Create</span> <span class="n">temp</span>   <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">Flow</span> <span class="p">(</span><span class="k">if</span>      <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">actions</span> <span class="n">given</span><span class="p">)</span><span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">RPC</span><span class="p">:</span> <span class="n">Start</span>    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">ActiveFlow</span>    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">+--------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">Create</span>        <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">ActiveFlow</span>    <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">RPC</span><span class="p">:</span> <span class="n">Originate</span><span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|&lt;--------------+</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">ARI</span><span class="p">:</span> <span class="n">Originate</span><span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">+------------------------------&gt;|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">SIP</span> <span class="n">INVITE</span>    <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">+--------------&gt;|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|&lt;-------------+&lt;--------------+</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="n">Call</span> <span class="nb">object</span>  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="n">status</span><span class="p">:</span><span class="n">dialing</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="mi">180</span> <span class="n">Ringing</span>   <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|&lt;--------------+</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">ChannelState</span>  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="p">(</span><span class="n">ringing</span><span class="p">)</span>     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|&lt;------------------------------+</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="n">Webhook</span><span class="p">:</span>     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="n">call_ringing</span> <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|&lt;-------------+&lt;--------------+</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="mi">200</span> <span class="n">OK</span>        <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|&lt;--------------+</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">StasisStart</span>   <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="p">(</span><span class="n">answered</span><span class="p">)</span>    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|&lt;------------------------------+</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">Update</span> <span class="n">status</span> <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="o">=</span> <span class="n">progressing</span> <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">Event</span><span class="p">:</span>        <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">call_answered</span> <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">+--------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">Execute</span>       <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">Actions</span>       <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="n">Webhook</span><span class="p">:</span>     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="n">call_answered</span><span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|&lt;-------------+&lt;--------------+</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
</pre></div>
</div>
</section>
<section id="webrtc-call-flow">
<h3>WebRTC Call Flow<a class="headerlink" href="#webrtc-call-flow" title="Link to this heading"></a></h3>
<p>WebRTC calls (browser-to-phone or browser-to-browser):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WebRTC</span> <span class="n">Inbound</span> <span class="n">Call</span> <span class="n">Flow</span><span class="p">:</span>

<span class="n">Browser</span>        <span class="n">api</span><span class="o">-</span><span class="n">manager</span>    <span class="n">talk</span><span class="o">-</span><span class="n">manager</span>     <span class="n">Asterisk</span>        <span class="n">Destination</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="n">WSS</span> <span class="n">Connect</span>  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">+-------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="n">SDP</span> <span class="n">Offer</span>    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">+-------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span> <span class="n">RPC</span><span class="p">:</span> <span class="n">Create</span>   <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span> <span class="n">WebRTC</span> <span class="n">Call</span>   <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">+--------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">ARI</span><span class="p">:</span> <span class="n">Create</span>   <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">WebRTC</span> <span class="n">Channel</span><span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">+--------------&gt;|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|&lt;--------------+</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">SDP</span> <span class="n">Answer</span>    <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|&lt;-------------+&lt;--------------+</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="n">SDP</span> <span class="n">Answer</span>   <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="n">ICE</span> <span class="n">Candidates</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|&lt;------------&gt;|&lt;-------------&gt;|&lt;------------&gt;|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="n">DTLS</span><span class="o">-</span><span class="n">SRTP</span>    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="n">Handshake</span>    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|&lt;============&gt;|&lt;=============&gt;|&lt;=============&gt;|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">Bridge</span> <span class="n">to</span>     <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">Destination</span>   <span class="o">|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">+--------------&gt;|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>     <span class="n">Secure</span> <span class="n">Media</span> <span class="p">(</span><span class="n">SRTP</span><span class="p">)</span>      <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|&lt;============&gt;|&lt;=============&gt;|&lt;=============&gt;|&lt;=============&gt;|</span>
    <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
</pre></div>
</div>
<p><strong>WebRTC vs PSTN Differences:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Protocol</span> <span class="n">Comparison</span><span class="p">:</span>

<span class="o">+------------------+------------------+------------------+</span>
<span class="o">|</span> <span class="n">Aspect</span>           <span class="o">|</span> <span class="n">PSTN</span> <span class="n">Call</span>        <span class="o">|</span> <span class="n">WebRTC</span> <span class="n">Call</span>      <span class="o">|</span>
<span class="o">+------------------+------------------+------------------+</span>
<span class="o">|</span> <span class="n">Signaling</span>        <span class="o">|</span> <span class="n">SIP</span> <span class="n">over</span> <span class="n">UDP</span><span class="o">/</span><span class="n">TCP</span> <span class="o">|</span> <span class="n">WebSocket</span> <span class="o">+</span> <span class="n">SDP</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Media</span>            <span class="o">|</span> <span class="n">RTP</span>              <span class="o">|</span> <span class="n">SRTP</span> <span class="p">(</span><span class="n">encrypted</span><span class="p">)</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">NAT</span> <span class="n">Traversal</span>    <span class="o">|</span> <span class="n">Kamailio</span> <span class="n">handles</span> <span class="o">|</span> <span class="n">ICE</span><span class="o">/</span><span class="n">STUN</span><span class="o">/</span><span class="n">TURN</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">Codec</span> <span class="n">negotiation</span><span class="o">|</span> <span class="n">SIP</span> <span class="n">SDP</span>          <span class="o">|</span> <span class="n">WebRTC</span> <span class="n">SDP</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">Entry</span> <span class="n">point</span>      <span class="o">|</span> <span class="n">Kamailio</span>         <span class="o">|</span> <span class="n">api</span><span class="o">-</span><span class="n">manager</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">Audio</span> <span class="n">quality</span>    <span class="o">|</span> <span class="n">G</span><span class="mf">.711</span> <span class="p">(</span><span class="mi">64</span><span class="n">kbps</span><span class="p">)</span>   <span class="o">|</span> <span class="n">Opus</span> <span class="p">(</span><span class="n">variable</span><span class="p">)</span>  <span class="o">|</span>
<span class="o">+------------------+------------------+------------------+</span>
</pre></div>
</div>
</section>
<section id="sip-trunk-call-flow">
<h3>SIP Trunk Call Flow<a class="headerlink" href="#sip-trunk-call-flow" title="Link to this heading"></a></h3>
<p>Calls between registered SIP endpoints (extensions):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SIP</span> <span class="n">Trunk</span> <span class="n">Extension</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">Extension</span><span class="p">:</span>

<span class="n">Extension</span> <span class="n">A</span>     <span class="n">Kamailio</span>       <span class="n">registrar</span><span class="o">-</span><span class="n">mgr</span>     <span class="n">Asterisk</span>      <span class="n">Extension</span> <span class="n">B</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span> <span class="n">REGISTER</span>     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">+-------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">Store</span>         <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">Registration</span>  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">+--------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|&lt;-------------+</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span> <span class="mi">200</span> <span class="n">OK</span>       <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">REGISTER</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|&lt;-----------</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="mi">200</span> <span class="n">OK</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">+-----------&gt;</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span> <span class="n">INVITE</span>       <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span> <span class="p">(</span><span class="n">to</span> <span class="n">ext</span> <span class="n">B</span><span class="p">)</span>   <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">+-------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">Lookup</span>        <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">Registration</span>  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">+--------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|&lt;--------------+</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">Contact</span> <span class="n">URI</span>   <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">Route</span> <span class="n">via</span>     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">Asterisk</span>      <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">+------------------------------&gt;|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">INVITE</span>        <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">+--------------&gt;|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|&lt;--------------+</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="mi">200</span> <span class="n">OK</span>        <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|&lt;-------------+&lt;------------------------------+</span>               <span class="o">|</span>
     <span class="o">|</span> <span class="mi">200</span> <span class="n">OK</span>       <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>   <span class="n">RTP</span> <span class="n">Media</span> <span class="p">(</span><span class="n">possibly</span> <span class="n">via</span> <span class="n">RTPEngine</span><span class="p">)</span>         <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|&lt;============&gt;|&lt;=============&gt;|&lt;=============&gt;|&lt;=============&gt;|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
</pre></div>
</div>
</section>
<section id="call-recording-sequence">
<h3>Call Recording Sequence<a class="headerlink" href="#call-recording-sequence" title="Link to this heading"></a></h3>
<p>How recording starts and stops:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Recording</span> <span class="n">Start</span> <span class="n">Sequence</span><span class="p">:</span>

<span class="n">flow</span><span class="o">-</span><span class="n">manager</span>    <span class="n">call</span><span class="o">-</span><span class="n">manager</span>     <span class="n">Asterisk</span>      <span class="n">storage</span><span class="o">-</span><span class="n">manager</span>    <span class="n">GCS</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span> <span class="n">Action</span><span class="p">:</span>       <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span> <span class="n">record_start</span>  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span> <span class="n">RPC</span><span class="p">:</span> <span class="n">Start</span>    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span> <span class="n">Recording</span>     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">+--------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">Create</span>        <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">Recording</span>     <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">Record</span> <span class="p">(</span><span class="n">DB</span><span class="p">)</span>   <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">ARI</span><span class="p">:</span> <span class="n">Record</span>   <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">Channel</span>       <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">+--------------&gt;|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">Start</span> <span class="n">mixing</span>  <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">audio</span> <span class="n">to</span> <span class="n">file</span> <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|&lt;--------------+</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span> <span class="n">Recording</span> <span class="n">ID</span>  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="p">(</span><span class="n">Call</span> <span class="n">continues</span><span class="o">...</span><span class="p">)</span>          <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span> <span class="n">Action</span><span class="p">:</span>       <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span> <span class="n">record_stop</span>   <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span> <span class="p">(</span><span class="ow">or</span> <span class="n">hangup</span><span class="p">)</span>   <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span> <span class="n">RPC</span><span class="p">:</span> <span class="n">Stop</span>     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span> <span class="n">Recording</span>     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">+--------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">ARI</span><span class="p">:</span> <span class="n">Stop</span>     <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">Recording</span>     <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">+--------------&gt;|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|&lt;--------------+</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">Local</span> <span class="n">file</span>    <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">path</span>          <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">RPC</span><span class="p">:</span> <span class="n">Upload</span>   <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">File</span>          <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">+------------------------------&gt;|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">Upload</span> <span class="n">to</span>    <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">GCS</span> <span class="n">bucket</span>   <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">+-------------&gt;|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|&lt;-------------+</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">URL</span>          <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|&lt;------------------------------+</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">Recording</span> <span class="n">URL</span> <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">Update</span>        <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">Recording</span>     <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span> <span class="n">Record</span>        <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>              <span class="o">|</span>
</pre></div>
</div>
<p><strong>Recording File Lifecycle:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Recording</span> <span class="n">Storage</span> <span class="n">Flow</span><span class="p">:</span>

<span class="mf">1.</span> <span class="n">During</span> <span class="n">Call</span><span class="p">:</span>
   <span class="o">+------------------------------------------+</span>
   <span class="o">|</span> <span class="n">Location</span><span class="p">:</span> <span class="n">Asterisk</span> <span class="n">local</span> <span class="n">disk</span>            <span class="o">|</span>
   <span class="o">|</span> <span class="n">Format</span><span class="p">:</span> <span class="n">WAV</span> <span class="p">(</span><span class="n">uncompressed</span><span class="p">)</span>               <span class="o">|</span>
   <span class="o">|</span> <span class="n">Path</span><span class="p">:</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">spool</span><span class="o">/</span><span class="n">asterisk</span><span class="o">/</span><span class="n">recording</span><span class="o">/</span>     <span class="o">|</span>
   <span class="o">+------------------------------------------+</span>

<span class="mf">2.</span> <span class="n">After</span> <span class="n">Call</span> <span class="n">Ends</span><span class="p">:</span>
   <span class="o">+------------------------------------------+</span>
   <span class="o">|</span> <span class="n">Action</span><span class="p">:</span> <span class="n">Convert</span> <span class="n">to</span> <span class="n">final</span> <span class="nb">format</span>          <span class="o">|</span>
   <span class="o">|</span> <span class="n">Format</span><span class="p">:</span> <span class="n">MP3</span> <span class="ow">or</span> <span class="n">WAV</span> <span class="p">(</span><span class="n">configurable</span><span class="p">)</span>        <span class="o">|</span>
   <span class="o">|</span> <span class="n">Compress</span> <span class="k">for</span> <span class="n">storage</span> <span class="n">efficiency</span>          <span class="o">|</span>
   <span class="o">+------------------------------------------+</span>

<span class="mf">3.</span> <span class="n">Upload</span> <span class="n">to</span> <span class="n">Cloud</span><span class="p">:</span>
   <span class="o">+------------------------------------------+</span>
   <span class="o">|</span> <span class="n">Destination</span><span class="p">:</span> <span class="n">Google</span> <span class="n">Cloud</span> <span class="n">Storage</span>        <span class="o">|</span>
   <span class="o">|</span> <span class="n">Bucket</span><span class="p">:</span> <span class="n">recordings</span><span class="o">-&lt;</span><span class="n">customer</span><span class="o">-</span><span class="nb">id</span><span class="o">&gt;</span>         <span class="o">|</span>
   <span class="o">|</span> <span class="n">Path</span><span class="p">:</span> <span class="o">/&lt;</span><span class="n">date</span><span class="o">&gt;/&lt;</span><span class="n">recording</span><span class="o">-</span><span class="nb">id</span><span class="o">&gt;.</span><span class="n">mp3</span>         <span class="o">|</span>
   <span class="o">|</span> <span class="n">Access</span><span class="p">:</span> <span class="n">Signed</span> <span class="n">URLs</span> <span class="p">(</span><span class="n">time</span><span class="o">-</span><span class="n">limited</span><span class="p">)</span>       <span class="o">|</span>
   <span class="o">+------------------------------------------+</span>

<span class="mf">4.</span> <span class="n">Cleanup</span><span class="p">:</span>
   <span class="o">+------------------------------------------+</span>
   <span class="o">|</span> <span class="n">Local</span> <span class="n">file</span><span class="p">:</span> <span class="n">Deleted</span> <span class="n">after</span> <span class="n">upload</span>         <span class="o">|</span>
   <span class="o">|</span> <span class="n">Cloud</span> <span class="n">retention</span><span class="p">:</span> <span class="mi">90</span> <span class="n">days</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>       <span class="o">|</span>
   <span class="o">|</span> <span class="n">Customer</span> <span class="n">can</span> <span class="n">download</span> <span class="n">before</span> <span class="n">expiry</span>      <span class="o">|</span>
   <span class="o">+------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="ai-voice-call-sequence">
<h3>AI Voice Call Sequence<a class="headerlink" href="#ai-voice-call-sequence" title="Link to this heading"></a></h3>
<p>Calls with AI assistant (Pipecat integration):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AI</span> <span class="n">Voice</span> <span class="n">Call</span> <span class="o">-</span> <span class="n">Detailed</span> <span class="n">Flow</span><span class="p">:</span>

<span class="n">Caller</span>      <span class="n">Asterisk</span>    <span class="n">pipecat</span><span class="o">-</span><span class="n">manager</span>    <span class="n">pipecat</span><span class="o">-</span><span class="n">runner</span>       <span class="n">LLM</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span> <span class="n">Call</span>      <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span> <span class="n">Answered</span>  <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">+----------&gt;|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span> <span class="n">Audiosocket</span>  <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span> <span class="n">Connect</span>      <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span> <span class="p">(</span><span class="n">port</span> <span class="mi">9000</span><span class="p">)</span>  <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">+-------------&gt;|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span> <span class="n">Spawn</span> <span class="n">Python</span>     <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span> <span class="n">Process</span>          <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">+-----------------&gt;|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|&lt;-----------------+</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span> <span class="n">WebSocket</span> <span class="n">Ready</span>  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|&lt;-------------+</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span> <span class="n">Audiosocket</span>  <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span> <span class="n">Connected</span>    <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span> <span class="n">Speak</span><span class="p">:</span>    <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span> <span class="s2">&quot;Hello&quot;</span>   <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">+----------&gt;|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span> <span class="n">Audio</span> <span class="n">Frame</span>  <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span> <span class="p">(</span><span class="mi">8</span><span class="n">kHz</span> <span class="n">ulaw</span><span class="p">)</span>  <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">+-------------&gt;|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span> <span class="n">Resample</span>         <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span> <span class="mi">8</span><span class="n">kHz</span><span class="o">-&gt;</span><span class="mi">16</span><span class="n">kHz</span>      <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span> <span class="n">ulaw</span><span class="o">-&gt;</span><span class="n">PCM</span>        <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span> <span class="n">Protobuf</span> <span class="n">Frame</span>   <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span> <span class="n">INPUT_AUDIO_RAW</span>  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">+-----------------&gt;|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span> <span class="n">STT</span><span class="p">:</span> <span class="n">Deepgram</span>  <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span> <span class="s2">&quot;Hello&quot;</span>        <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">+---------------&gt;|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|&lt;---------------+</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span> <span class="n">LLM</span> <span class="n">Response</span>   <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span> <span class="n">TTS</span><span class="p">:</span> <span class="n">Generate</span>  <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span> <span class="n">Audio</span>          <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|&lt;-----------------+</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span> <span class="n">Protobuf</span> <span class="n">Frame</span>   <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span> <span class="n">OUTPUT_AUDIO_RAW</span> <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span> <span class="n">Resample</span>         <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span> <span class="mi">16</span><span class="n">kHz</span><span class="o">-&gt;</span><span class="mi">8</span><span class="n">kHz</span>      <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span> <span class="n">PCM</span><span class="o">-&gt;</span><span class="n">ulaw</span>        <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|&lt;-------------+</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span> <span class="n">Audio</span> <span class="n">Frame</span>  <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|&lt;----------+</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span> <span class="n">AI</span> <span class="n">speaks</span> <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>           <span class="o">|</span>              <span class="o">|</span>                  <span class="o">|</span>                <span class="o">|</span>
</pre></div>
</div>
<p><strong>AI Tool Calling Sequence:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LLM</span> <span class="n">Tool</span> <span class="n">Call</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">,</span> <span class="n">Transfer</span><span class="p">):</span>

<span class="n">pipecat</span><span class="o">-</span><span class="n">runner</span>    <span class="n">pipecat</span><span class="o">-</span><span class="n">manager</span>    <span class="n">call</span><span class="o">-</span><span class="n">manager</span>    <span class="n">transfer</span><span class="o">-</span><span class="n">manager</span>
      <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span> <span class="n">Frame</span><span class="p">:</span>          <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span> <span class="n">LLM_FUNCTION_CALL</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span> <span class="n">tool</span><span class="p">:</span> <span class="n">transfer_call</span>               <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span> <span class="n">args</span><span class="p">:</span> <span class="p">{</span><span class="n">dest</span><span class="p">:</span> <span class="s2">&quot;sales&quot;</span><span class="p">}</span>             <span class="o">|</span>                <span class="o">|</span>
      <span class="o">+----------------&gt;|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span>                 <span class="o">|</span> <span class="n">RPC</span><span class="p">:</span> <span class="n">Execute</span>    <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span>                 <span class="o">|</span> <span class="n">Tool</span>            <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span>                 <span class="o">+----------------&gt;|</span>                <span class="o">|</span>
      <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span> <span class="n">RPC</span><span class="p">:</span> <span class="n">Transfer</span>  <span class="o">|</span>
      <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">+---------------&gt;|</span>
      <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span> <span class="n">Initiate</span>
      <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span> <span class="n">Transfer</span>
      <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|&lt;---------------+</span>
      <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span> <span class="n">Success</span>        <span class="o">|</span>
      <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span>                 <span class="o">|&lt;----------------+</span>                <span class="o">|</span>
      <span class="o">|</span>                 <span class="o">|</span> <span class="n">Tool</span> <span class="n">Result</span>     <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|&lt;----------------+</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span> <span class="n">Frame</span><span class="p">:</span>          <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span> <span class="n">FUNCTION_RESULT</span> <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span> <span class="n">result</span><span class="p">:</span> <span class="n">success</span> <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span> <span class="p">(</span><span class="n">LLM</span> <span class="n">receives</span>   <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span>  <span class="n">result</span><span class="p">,</span> <span class="n">speaks</span> <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
      <span class="o">|</span>  <span class="n">confirmation</span><span class="p">)</span>  <span class="o">|</span>                 <span class="o">|</span>                <span class="o">|</span>
</pre></div>
</div>
</section>
<section id="conference-bridge-sequence">
<h3>Conference Bridge Sequence<a class="headerlink" href="#conference-bridge-sequence" title="Link to this heading"></a></h3>
<p>Multi-party conference call setup:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Conference</span> <span class="n">Join</span> <span class="n">Sequence</span><span class="p">:</span>

<span class="n">Participant</span>    <span class="n">flow</span><span class="o">-</span><span class="n">manager</span>    <span class="n">conf</span><span class="o">-</span><span class="n">manager</span>      <span class="n">Asterisk</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span> <span class="n">Call</span>         <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span> <span class="n">Answered</span>     <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">+-------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">Action</span><span class="p">:</span>       <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">conf_join</span>     <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">RPC</span><span class="p">:</span> <span class="n">Join</span>     <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">Conference</span>    <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">+--------------&gt;|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">Get</span><span class="o">/</span><span class="n">Create</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">Conference</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">Record</span>        <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">ARI</span><span class="p">:</span> <span class="n">Create</span>   <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">Bridge</span>        <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="p">(</span><span class="k">if</span> <span class="ow">not</span> <span class="n">exist</span><span class="p">)</span><span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">+--------------&gt;|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|&lt;--------------+</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">Bridge</span> <span class="n">ID</span>     <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">ARI</span><span class="p">:</span> <span class="n">Add</span>      <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">Channel</span> <span class="n">to</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">Bridge</span>        <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">+--------------&gt;|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">Mix</span> <span class="n">audio</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="k">with</span> <span class="n">other</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">participants</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|&lt;--------------+</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span> <span class="n">Success</span>       <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|&lt;--------------+</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">Participant</span>   <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span> <span class="n">Joined</span>        <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|&lt;-------------+</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span> <span class="n">Hear</span> <span class="n">other</span>   <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span> <span class="n">participants</span> <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
</pre></div>
</div>
<p><strong>Conference Audio Mixing:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Conference</span> <span class="n">Bridge</span> <span class="n">Audio</span> <span class="n">Flow</span><span class="p">:</span>

<span class="o">+----------------+</span>       <span class="o">+----------------+</span>       <span class="o">+----------------+</span>
<span class="o">|</span> <span class="n">Participant</span> <span class="n">A</span>  <span class="o">|</span>       <span class="o">|</span> <span class="n">Participant</span> <span class="n">B</span>  <span class="o">|</span>       <span class="o">|</span> <span class="n">Participant</span> <span class="n">C</span>  <span class="o">|</span>
<span class="o">+-------+--------+</span>       <span class="o">+-------+--------+</span>       <span class="o">+-------+--------+</span>
        <span class="o">|</span>                        <span class="o">|</span>                        <span class="o">|</span>
        <span class="o">|</span> <span class="n">Audio</span> <span class="n">A</span>                <span class="o">|</span> <span class="n">Audio</span> <span class="n">B</span>                <span class="o">|</span> <span class="n">Audio</span> <span class="n">C</span>
        <span class="n">v</span>                        <span class="n">v</span>                        <span class="n">v</span>
<span class="o">+-----------------------------------------------------------------------+</span>
<span class="o">|</span>                        <span class="n">Asterisk</span> <span class="n">Bridge</span>                                <span class="o">|</span>
<span class="o">|</span>                                                                       <span class="o">|</span>
<span class="o">|</span>   <span class="n">Audio</span> <span class="n">Mixing</span><span class="p">:</span>                                                       <span class="o">|</span>
<span class="o">|</span>   <span class="o">+-----------------------------------------------------------+</span>       <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>  <span class="n">To</span> <span class="n">A</span><span class="p">:</span> <span class="n">Mix</span><span class="p">(</span><span class="n">B</span> <span class="o">+</span> <span class="n">C</span><span class="p">)</span>                                         <span class="o">|</span>       <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>  <span class="n">To</span> <span class="n">B</span><span class="p">:</span> <span class="n">Mix</span><span class="p">(</span><span class="n">A</span> <span class="o">+</span> <span class="n">C</span><span class="p">)</span>                                         <span class="o">|</span>       <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>  <span class="n">To</span> <span class="n">C</span><span class="p">:</span> <span class="n">Mix</span><span class="p">(</span><span class="n">A</span> <span class="o">+</span> <span class="n">B</span><span class="p">)</span>                                         <span class="o">|</span>       <span class="o">|</span>
<span class="o">|</span>   <span class="o">+-----------------------------------------------------------+</span>       <span class="o">|</span>
<span class="o">|</span>                                                                       <span class="o">|</span>
<span class="o">|</span>   <span class="n">Each</span> <span class="n">participant</span> <span class="n">hears</span> <span class="n">everyone</span> <span class="k">except</span> <span class="n">themselves</span>                   <span class="o">|</span>
<span class="o">+-----------------------------------------------------------------------+</span>
        <span class="o">|</span>                        <span class="o">|</span>                        <span class="o">|</span>
        <span class="o">|</span> <span class="n">Mix</span><span class="p">(</span><span class="n">B</span><span class="o">+</span><span class="n">C</span><span class="p">)</span>               <span class="o">|</span> <span class="n">Mix</span><span class="p">(</span><span class="n">A</span><span class="o">+</span><span class="n">C</span><span class="p">)</span>               <span class="o">|</span> <span class="n">Mix</span><span class="p">(</span><span class="n">A</span><span class="o">+</span><span class="n">B</span><span class="p">)</span>
        <span class="n">v</span>                        <span class="n">v</span>                        <span class="n">v</span>
<span class="o">+-------+--------+</span>       <span class="o">+-------+--------+</span>       <span class="o">+-------+--------+</span>
<span class="o">|</span> <span class="n">Participant</span> <span class="n">A</span>  <span class="o">|</span>       <span class="o">|</span> <span class="n">Participant</span> <span class="n">B</span>  <span class="o">|</span>       <span class="o">|</span> <span class="n">Participant</span> <span class="n">C</span>  <span class="o">|</span>
<span class="o">+----------------+</span>       <span class="o">+----------------+</span>       <span class="o">+----------------+</span>
</pre></div>
</div>
</section>
<section id="event-publication-sequence">
<h3>Event Publication Sequence<a class="headerlink" href="#event-publication-sequence" title="Link to this heading"></a></h3>
<p>How call events propagate through the system:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Event</span> <span class="n">Publication</span> <span class="n">Flow</span><span class="p">:</span>

<span class="n">Asterisk</span>       <span class="n">call</span><span class="o">-</span><span class="n">manager</span>        <span class="n">RabbitMQ</span>        <span class="n">webhook</span><span class="o">-</span><span class="n">mgr</span>     <span class="n">billing</span><span class="o">-</span><span class="n">mgr</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="n">StasisEnd</span>     <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span> <span class="p">(</span><span class="n">call</span> <span class="n">ended</span><span class="p">)</span>  <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">+--------------&gt;|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span> <span class="n">Update</span> <span class="n">Call</span>      <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span> <span class="n">Record</span><span class="p">:</span>          <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span> <span class="n">status</span><span class="o">=</span><span class="n">hangup</span>    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span> <span class="n">Publish</span> <span class="n">Event</span><span class="p">:</span>   <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span> <span class="n">call_hungup</span>      <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">+-----------------&gt;|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span> <span class="n">Fanout</span> <span class="n">to</span>     <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span> <span class="n">subscribers</span>   <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">+--------------&gt;|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">+------------------------------&gt;|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span> <span class="n">Lookup</span>        <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span> <span class="n">webhook</span>       <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span> <span class="n">config</span>        <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span> <span class="n">POST</span> <span class="n">to</span>       <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span> <span class="n">customer</span>      <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span> <span class="n">endpoint</span>      <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">Calculate</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">call</span> <span class="n">cost</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">Update</span>
    <span class="o">|</span>               <span class="o">|</span>                  <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span> <span class="n">balance</span>
</pre></div>
</div>
<p><strong>Event Types and Subscribers:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Call Event Subscriptions:

Event Type          Subscribers
─────────────────────────────────────────────────────────
call_created        webhook-manager, campaign-manager
call_ringing        webhook-manager
call_answered       webhook-manager, billing-manager
call_hungup         webhook-manager, billing-manager,
                    campaign-manager, queue-manager,
                    transfer-manager, ai-manager
call_recording      webhook-manager, storage-manager
call_transcribing   webhook-manager, transcribe-manager
</pre></div>
</div>
</section>
</section>
<section id="advanced-call-scenarios">
<span id="call-scenarios"></span><h2>Advanced Call Scenarios<a class="headerlink" href="#advanced-call-scenarios" title="Link to this heading"></a></h2>
<p>This section covers real-world call scenarios that combine multiple VoIPBIN features. Each scenario includes the complete flow, API examples, and best practices.</p>
<section id="ivr-menu-with-queue-routing">
<h3>IVR Menu with Queue Routing<a class="headerlink" href="#ivr-menu-with-queue-routing" title="Link to this heading"></a></h3>
<p>A common contact center pattern: caller navigates an IVR menu, then enters a queue.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">IVR</span> <span class="n">to</span> <span class="n">Queue</span> <span class="n">Flow</span><span class="p">:</span>

<span class="n">Caller</span>                          <span class="n">VoIPBIN</span>                         <span class="n">Agent</span>
   <span class="o">|</span>                               <span class="o">|</span>                              <span class="o">|</span>
   <span class="o">|</span> <span class="n">Calls</span> <span class="n">support</span> <span class="n">number</span>          <span class="o">|</span>                              <span class="o">|</span>
   <span class="o">+------------------------------&gt;|</span>                              <span class="o">|</span>
   <span class="o">|</span>                               <span class="o">|</span>                              <span class="o">|</span>
   <span class="o">|&lt;------------------------------+</span>                              <span class="o">|</span>
   <span class="o">|</span> <span class="s2">&quot;Press 1 for Sales,           |                              |</span>
   <span class="o">|</span>  <span class="n">Press</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">Support</span><span class="s2">&quot;         |                              |</span>
   <span class="o">|</span>                               <span class="o">|</span>                              <span class="o">|</span>
   <span class="o">|</span> <span class="n">Press</span> <span class="mi">2</span>                       <span class="o">|</span>                              <span class="o">|</span>
   <span class="o">+------------------------------&gt;|</span>                              <span class="o">|</span>
   <span class="o">|</span>                               <span class="o">|</span>                              <span class="o">|</span>
   <span class="o">|&lt;------------------------------+</span>                              <span class="o">|</span>
   <span class="o">|</span> <span class="s2">&quot;Please hold, connecting      |                              |</span>
   <span class="o">|</span>  <span class="n">to</span> <span class="n">support</span><span class="o">...</span><span class="s2">&quot;               |                              |</span>
   <span class="o">|</span>                               <span class="o">|</span>                              <span class="o">|</span>
   <span class="o">|&lt;------------------------------+</span>                              <span class="o">|</span>
   <span class="o">|</span> <span class="p">(</span><span class="n">Hold</span> <span class="n">music</span> <span class="n">plays</span><span class="p">)</span>            <span class="o">|</span>                              <span class="o">|</span>
   <span class="o">|</span>                               <span class="o">|</span>                              <span class="o">|</span>
   <span class="o">|</span>                               <span class="o">|</span> <span class="n">Find</span> <span class="n">available</span> <span class="n">agent</span>         <span class="o">|</span>
   <span class="o">|</span>                               <span class="o">+-----------------------------&gt;|</span>
   <span class="o">|</span>                               <span class="o">|</span>                              <span class="o">|</span>
   <span class="o">|</span>                               <span class="o">|&lt;-----------------------------+</span>
   <span class="o">|</span>                               <span class="o">|</span> <span class="n">Agent</span> <span class="n">accepts</span>                <span class="o">|</span>
   <span class="o">|</span>                               <span class="o">|</span>                              <span class="o">|</span>
   <span class="o">|&lt;==============================+==============================&gt;|</span>
   <span class="o">|</span> <span class="n">Connected</span> <span class="n">to</span> <span class="n">agent</span>            <span class="o">|</span>       <span class="n">Connected</span> <span class="n">to</span> <span class="n">caller</span>    <span class="o">|</span>
   <span class="o">|</span>                               <span class="o">|</span>                              <span class="o">|</span>
</pre></div>
</div>
<p><strong>Flow Configuration:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Support IVR with Queue&quot;</span><span class="p">,</span>
    <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;welcome&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Thank you for calling. Press 1 for Sales, Press 2 for Support, Press 3 for Billing.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;digits_receive&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
                <span class="s2">&quot;length&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;branch&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;default_target_id&quot;</span><span class="p">:</span> <span class="s2">&quot;invalid&quot;</span><span class="p">,</span>
                <span class="s2">&quot;target_ids&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="s2">&quot;sales_queue&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="s2">&quot;support_queue&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;3&quot;</span><span class="p">:</span> <span class="s2">&quot;billing_queue&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;sales_queue&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Connecting you to Sales. Please hold.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;queue_join&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;queue_id&quot;</span><span class="p">:</span> <span class="s2">&quot;sales-queue-uuid&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;hangup&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;support_queue&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Connecting you to Support. Please hold.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;queue_join&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;queue_id&quot;</span><span class="p">:</span> <span class="s2">&quot;support-queue-uuid&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;hangup&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;billing_queue&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Connecting you to Billing. Please hold.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;queue_join&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;queue_id&quot;</span><span class="p">:</span> <span class="s2">&quot;billing-queue-uuid&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;hangup&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;invalid&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Invalid selection.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;goto&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;target_id&quot;</span><span class="p">:</span> <span class="s2">&quot;welcome&quot;</span><span class="p">,</span>
                <span class="s2">&quot;loop_count&quot;</span><span class="p">:</span> <span class="mi">2</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Goodbye.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;hangup&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="ai-assisted-customer-service">
<h3>AI-Assisted Customer Service<a class="headerlink" href="#ai-assisted-customer-service" title="Link to this heading"></a></h3>
<p>Combine AI voice assistant with human escalation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AI</span> <span class="n">First</span><span class="p">,</span> <span class="n">Human</span> <span class="n">Backup</span><span class="p">:</span>

<span class="n">Caller</span>                 <span class="n">AI</span> <span class="n">Assistant</span>              <span class="n">Agent</span>
   <span class="o">|</span>                        <span class="o">|</span>                      <span class="o">|</span>
   <span class="o">|</span> <span class="s2">&quot;I need to check       |                      |</span>
   <span class="o">|</span>  <span class="n">my</span> <span class="n">order</span> <span class="n">status</span><span class="s2">&quot;      |                      |</span>
   <span class="o">+-----------------------&gt;|</span>                      <span class="o">|</span>
   <span class="o">|</span>                        <span class="o">|</span>                      <span class="o">|</span>
   <span class="o">|</span>                        <span class="o">|</span> <span class="n">Query</span> <span class="n">CRM</span>            <span class="o">|</span>
   <span class="o">|</span>                        <span class="o">|</span> <span class="p">(</span><span class="n">tool</span> <span class="n">call</span><span class="p">)</span>          <span class="o">|</span>
   <span class="o">|</span>                        <span class="o">|</span>                      <span class="o">|</span>
   <span class="o">|&lt;-----------------------+</span>                      <span class="o">|</span>
   <span class="o">|</span> <span class="s2">&quot;Your order #12345     |                      |</span>
   <span class="o">|</span>  <span class="n">shipped</span> <span class="n">yesterday</span><span class="o">.</span>    <span class="o">|</span>                      <span class="o">|</span>
   <span class="o">|</span>  <span class="n">Tracking</span><span class="p">:</span> <span class="n">ABC123</span><span class="s2">&quot;     |                      |</span>
   <span class="o">|</span>                        <span class="o">|</span>                      <span class="o">|</span>
   <span class="o">|</span> <span class="s2">&quot;I want to talk to     |                      |</span>
   <span class="o">|</span>  <span class="n">a</span> <span class="n">real</span> <span class="n">person</span><span class="s2">&quot;        |                      |</span>
   <span class="o">+-----------------------&gt;|</span>                      <span class="o">|</span>
   <span class="o">|</span>                        <span class="o">|</span>                      <span class="o">|</span>
   <span class="o">|&lt;-----------------------+</span>                      <span class="o">|</span>
   <span class="o">|</span> <span class="s2">&quot;Let me transfer you   |                      |</span>
   <span class="o">|</span>  <span class="n">to</span> <span class="n">an</span> <span class="n">agent</span><span class="s2">&quot;          |                      |</span>
   <span class="o">|</span>                        <span class="o">|</span>                      <span class="o">|</span>
   <span class="o">|</span>                        <span class="o">|</span> <span class="n">Transfer</span>             <span class="o">|</span>
   <span class="o">|</span>                        <span class="o">|</span> <span class="p">(</span><span class="n">tool</span> <span class="n">call</span><span class="p">)</span>          <span class="o">|</span>
   <span class="o">|</span>                        <span class="o">+---------------------&gt;|</span>
   <span class="o">|</span>                        <span class="o">|</span>                      <span class="o">|</span>
   <span class="o">|&lt;==============================================|</span>
   <span class="o">|</span> <span class="n">Connected</span> <span class="n">to</span> <span class="n">agent</span>     <span class="o">|</span>                      <span class="o">|</span>
   <span class="o">|</span>                        <span class="o">|</span>                      <span class="o">|</span>
</pre></div>
</div>
<p><strong>AI Assistant Configuration:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span>
<span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15551234567&quot;</span><span class="p">},</span>
    <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15559876543&quot;</span><span class="p">}],</span>
    <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ai_talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;ai_id&quot;</span><span class="p">:</span> <span class="s2">&quot;customer-service-ai-uuid&quot;</span><span class="p">,</span>
                <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a helpful customer service agent for Acme Corp. You can look up orders, check account balances, and answer questions about products. If the customer asks to speak to a human, transfer them to the support queue.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;tools&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;lookup_order&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Look up order status by order ID or customer phone&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;webhook_url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://your-server.com/api/orders&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;transfer_to_agent&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Transfer the call to a human agent&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;transfer&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;destination&quot;</span><span class="p">:</span> <span class="s2">&quot;queue:support-queue-uuid&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="s2">&quot;end_call_phrases&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;goodbye&quot;</span><span class="p">,</span> <span class="s2">&quot;bye&quot;</span><span class="p">,</span> <span class="s2">&quot;that&#39;s all&quot;</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="outbound-campaign-with-voicemail-detection">
<h3>Outbound Campaign with Voicemail Detection<a class="headerlink" href="#outbound-campaign-with-voicemail-detection" title="Link to this heading"></a></h3>
<p>Automated calling campaign that detects answering machines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Campaign Call Flow:

VoIPBIN             Destination              Voicemail
   |                    |                       |
   | Dial               |                       |
   +-------------------&gt;|                       |
   |                    |                       |
   | Answer?            |                       |
   |&lt;-------------------+                       |
   |                    |                       |
   | AMD Analysis       |                       |
   | (first 3 seconds)  |                       |
   |                    |                       |
   +--- Human detected --+                      |
   |                    |                       |
   | Play message       |                       |
   +-------------------&gt;|                       |
   |                    |                       |
   | &quot;Press 1 to speak  |                       |
   |  with an agent&quot;    |                       |
   +-------------------&gt;|                       |
   |                    |                       |
   |                    |                       |
   +--- Machine detected ------------------------&gt;|
   |                    |                       |
   | Leave voicemail    |                       |
   | message            |                       |
   +--------------------------------------&gt;|    |
   |                    |                       |
   | Hangup             |                       |
   +--------------------------------------&gt;|    |
   |                    |                       |
</pre></div>
</div>
<p><strong>Campaign Configuration:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">campaigns</span>
<span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Customer Reminder Campaign&quot;</span><span class="p">,</span>
    <span class="s2">&quot;outplan_id&quot;</span><span class="p">:</span> <span class="s2">&quot;outplan-uuid&quot;</span><span class="p">,</span>
    <span class="s2">&quot;flow_id&quot;</span><span class="p">:</span> <span class="s2">&quot;campaign-flow-uuid&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dial_timeout&quot;</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
    <span class="s2">&quot;max_concurrent_calls&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;schedule&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;timezone&quot;</span><span class="p">:</span> <span class="s2">&quot;America/New_York&quot;</span><span class="p">,</span>
        <span class="s2">&quot;start_time&quot;</span><span class="p">:</span> <span class="s2">&quot;09:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;end_time&quot;</span><span class="p">:</span> <span class="s2">&quot;17:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;days&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mon&quot;</span><span class="p">,</span> <span class="s2">&quot;tue&quot;</span><span class="p">,</span> <span class="s2">&quot;wed&quot;</span><span class="p">,</span> <span class="s2">&quot;thu&quot;</span><span class="p">,</span> <span class="s2">&quot;fri&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">Campaign</span> <span class="n">Flow</span><span class="p">:</span>
<span class="p">{</span>
    <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;amd&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;machine_action&quot;</span><span class="p">:</span> <span class="s2">&quot;voicemail&quot;</span><span class="p">,</span>
                <span class="s2">&quot;human_action&quot;</span><span class="p">:</span> <span class="s2">&quot;continue&quot;</span><span class="p">,</span>
                <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">3000</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;human_path&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello! This is a reminder from Acme Corp about your upcoming appointment. Press 1 to confirm, Press 2 to reschedule.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;digits_receive&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span> <span class="s2">&quot;length&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;branch&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;target_ids&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="s2">&quot;confirmed&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="s2">&quot;reschedule&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;default_target_id&quot;</span><span class="p">:</span> <span class="s2">&quot;no_response&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;confirmed&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Great! Your appointment is confirmed. Goodbye.&quot;</span><span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;hangup&quot;</span><span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;reschedule&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Please hold while we connect you to schedule a new time.&quot;</span><span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;connect&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15551234567&quot;</span><span class="p">}]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;voicemail&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello, this is Acme Corp reminding you of your upcoming appointment. Please call us back at 555-123-4567 to confirm. Thank you.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;hangup&quot;</span><span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;no_response&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;goto&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;target_id&quot;</span><span class="p">:</span> <span class="s2">&quot;human_path&quot;</span><span class="p">,</span> <span class="s2">&quot;loop_count&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;hangup&quot;</span><span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="click-to-call-with-recording">
<h3>Click-to-Call with Recording<a class="headerlink" href="#click-to-call-with-recording" title="Link to this heading"></a></h3>
<p>Website visitor clicks to call, conversation is recorded:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Click</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">Call</span> <span class="n">Flow</span><span class="p">:</span>

<span class="n">Website</span>          <span class="n">Your</span> <span class="n">Server</span>        <span class="n">VoIPBIN</span>           <span class="n">Visitor</span> <span class="n">Phone</span>      <span class="n">Agent</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span> <span class="n">Click</span> <span class="s2">&quot;Call Me&quot;</span> <span class="o">|</span>                 <span class="o">|</span>                    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">+----------------&gt;|</span>                 <span class="o">|</span>                    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span> <span class="n">POST</span> <span class="o">/</span><span class="n">calls</span>     <span class="o">|</span>                    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">+----------------&gt;|</span>                    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span> <span class="n">Call</span> <span class="n">visitor</span>       <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">+-------------------&gt;|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|&lt;----------------+&lt;----------------+&lt;-------------------+</span>              <span class="o">|</span>
   <span class="o">|</span> <span class="s2">&quot;Calling you...&quot;</span><span class="o">|</span> <span class="n">Call</span> <span class="n">created</span>   <span class="o">|</span> <span class="n">Ringing</span>            <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|&lt;-------------------+</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span> <span class="n">Answered</span>           <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span> <span class="n">Start</span> <span class="n">recording</span>    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span> <span class="n">Play</span> <span class="n">greeting</span>      <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">+-------------------&gt;|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span> <span class="n">Bridge</span> <span class="n">to</span> <span class="n">agent</span>    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">+----------------------------------&gt;|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                    <span class="o">|</span>              <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                    <span class="o">|&lt;============&gt;|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>     <span class="n">Recording</span> <span class="n">both</span> <span class="n">directions</span>     <span class="o">|</span>
   <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>                    <span class="o">|</span>              <span class="o">|</span>
</pre></div>
</div>
<p><strong>API Request:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span>
<span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span>
        <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15551234567&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Acme Support&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span>
            <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15559876543&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;early_execution&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello! Thank you for requesting a callback from Acme Corp. Please hold while we connect you to an agent.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;record_start&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;both&quot;</span><span class="p">,</span>
                <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;mp3&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;connect&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15551234567&quot;</span><span class="p">},</span>
                <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15552222222&quot;</span><span class="p">}</span>
                <span class="p">],</span>
                <span class="s2">&quot;ring_timeout&quot;</span><span class="p">:</span> <span class="mi">30000</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;record_stop&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Webhook Integration:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Webhook</span><span class="p">:</span> <span class="n">call_hungup</span>
<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;call_hungup&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;call-uuid&quot;</span><span class="p">,</span>
        <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mi">245</span><span class="p">,</span>
        <span class="s2">&quot;recording_ids&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;recording-uuid&quot;</span><span class="p">],</span>
        <span class="s2">&quot;hangup_by&quot;</span><span class="p">:</span> <span class="s2">&quot;remote&quot;</span><span class="p">,</span>
        <span class="s2">&quot;hangup_reason&quot;</span><span class="p">:</span> <span class="s2">&quot;normal&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">Your</span> <span class="n">Server</span> <span class="n">Response</span><span class="p">:</span>
<span class="mf">1.</span> <span class="n">Fetch</span> <span class="n">recording</span><span class="p">:</span> <span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">recordings</span><span class="o">/</span><span class="p">{</span><span class="n">recording</span><span class="o">-</span><span class="n">uuid</span><span class="p">}</span>
<span class="mf">2.</span> <span class="n">Download</span> <span class="n">audio</span><span class="p">:</span> <span class="n">GET</span> <span class="p">{</span><span class="n">recording</span><span class="o">.</span><span class="n">url</span><span class="p">}</span>
<span class="mf">3.</span> <span class="n">Store</span> <span class="ow">in</span> <span class="n">your</span> <span class="n">CRM</span>
<span class="mf">4.</span> <span class="n">Update</span> <span class="n">call</span> <span class="n">log</span> <span class="k">with</span> <span class="n">recording</span> <span class="n">link</span>
</pre></div>
</div>
</section>
<section id="multi-leg-conference-call">
<h3>Multi-leg Conference Call<a class="headerlink" href="#multi-leg-conference-call" title="Link to this heading"></a></h3>
<p>Create a conference with multiple participants joining at different times:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Multi</span><span class="o">-</span><span class="n">leg</span> <span class="n">Conference</span><span class="p">:</span>

<span class="n">Organizer</span>        <span class="n">VoIPBIN</span>       <span class="n">Participant</span> <span class="n">A</span>    <span class="n">Participant</span> <span class="n">B</span>    <span class="n">Participant</span> <span class="n">C</span>
    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span> <span class="n">Create</span>        <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span> <span class="n">Conference</span>    <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">+--------------&gt;|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|&lt;--------------+</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span> <span class="n">Conf</span> <span class="n">ID</span>       <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span> <span class="n">Add</span> <span class="bp">self</span>      <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">+--------------&gt;|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|&lt;==============&gt;</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span> <span class="n">In</span> <span class="n">conference</span> <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span> <span class="n">Dial</span> <span class="n">out</span> <span class="n">to</span> <span class="n">A</span> <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">+--------------&gt;|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span> <span class="n">Call</span> <span class="n">A</span>        <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">+--------------&gt;|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|&lt;--------------+</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span> <span class="n">Answered</span>      <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|&lt;==============&gt;&lt;==============&gt;</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span> <span class="n">A</span> <span class="n">joins</span> <span class="n">conf</span>  <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span> <span class="n">Dial</span> <span class="n">out</span> <span class="n">to</span> <span class="n">B</span> <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">+--------------&gt;|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span> <span class="n">Call</span> <span class="n">B</span>        <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">+------------------------------&gt;|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|&lt;------------------------------+</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span> <span class="n">Answered</span>      <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|&lt;==============&gt;&lt;==============&gt;&lt;==============&gt;|</span>                <span class="o">|</span>
    <span class="o">|</span> <span class="n">B</span> <span class="n">joins</span> <span class="n">conf</span>  <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span> <span class="n">C</span> <span class="n">dials</span> <span class="ow">in</span>     <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|&lt;---------------------------------------+-------+</span>
    <span class="o">|</span>               <span class="o">|</span> <span class="n">Inbound</span> <span class="n">call</span>  <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
    <span class="o">|&lt;==============&gt;&lt;==============&gt;&lt;==============&gt;|&lt;==============&gt;|</span>
    <span class="o">|</span> <span class="n">All</span> <span class="ow">in</span> <span class="n">conf</span>   <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
</pre></div>
</div>
<p><strong>Conference Creation:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Step</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Create</span> <span class="n">Conference</span>
<span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">conferences</span>
<span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Weekly Team Sync&quot;</span><span class="p">,</span>
    <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="s2">&quot;customer-uuid&quot;</span>
<span class="p">}</span>

<span class="n">Response</span><span class="p">:</span>
<span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;conf-uuid&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Weekly Team Sync&quot;</span><span class="p">,</span>
    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span><span class="p">,</span>
    <span class="s2">&quot;participant_count&quot;</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}</span>

<span class="n">Step</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Add</span> <span class="n">Organizer</span> <span class="n">via</span> <span class="n">Dial</span><span class="o">-</span><span class="ow">in</span>
<span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span>
<span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15551111111&quot;</span><span class="p">},</span>
    <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15550000000&quot;</span><span class="p">}],</span>
    <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;conference_join&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;conference_id&quot;</span><span class="p">:</span> <span class="s2">&quot;conf-uuid&quot;</span><span class="p">,</span>
                <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;moderator&quot;</span><span class="p">,</span>
                <span class="s2">&quot;mute_on_join&quot;</span><span class="p">:</span> <span class="n">false</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>

<span class="n">Step</span> <span class="mi">3</span><span class="p">:</span> <span class="n">Dial</span> <span class="n">Out</span> <span class="n">to</span> <span class="n">Participants</span>
<span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span>
<span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15551111111&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Team Sync&quot;</span><span class="p">},</span>
    <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15552222222&quot;</span><span class="p">}],</span>
    <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;You are being connected to the Weekly Team Sync.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;conference_join&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;conference_id&quot;</span><span class="p">:</span> <span class="s2">&quot;conf-uuid&quot;</span><span class="p">,</span>
                <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;participant&quot;</span><span class="p">,</span>
                <span class="s2">&quot;mute_on_join&quot;</span><span class="p">:</span> <span class="n">false</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="call-screening-with-whisper">
<h3>Call Screening with Whisper<a class="headerlink" href="#call-screening-with-whisper" title="Link to this heading"></a></h3>
<p>Screen calls before connecting to agent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Call</span> <span class="n">Screening</span> <span class="n">Flow</span><span class="p">:</span>

<span class="n">Caller</span>             <span class="n">VoIPBIN</span>            <span class="n">Agent</span>
   <span class="o">|</span>                  <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span> <span class="n">Incoming</span> <span class="n">call</span>    <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">+-----------------&gt;|</span>                  <span class="o">|</span>
   <span class="o">|</span>                  <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|&lt;-----------------+</span>                  <span class="o">|</span>
   <span class="o">|</span> <span class="s2">&quot;Please state    |                  |</span>
   <span class="o">|</span>  <span class="n">your</span> <span class="n">name</span><span class="s2">&quot;      |                  |</span>
   <span class="o">|</span>                  <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span> <span class="s2">&quot;John Smith&quot;</span>     <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">+-----------------&gt;|</span>                  <span class="o">|</span>
   <span class="o">|</span>                  <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span> <span class="p">(</span><span class="n">Record</span> <span class="n">name</span><span class="p">)</span>    <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>                  <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|&lt;-----------------+</span>                  <span class="o">|</span>
   <span class="o">|</span> <span class="s2">&quot;Please hold&quot;</span>    <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>                  <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span> <span class="p">(</span><span class="n">Hold</span> <span class="n">music</span><span class="p">)</span>     <span class="o">|</span> <span class="n">Dial</span> <span class="n">agent</span>       <span class="o">|</span>
   <span class="o">|</span>                  <span class="o">+-----------------&gt;|</span>
   <span class="o">|</span>                  <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>                  <span class="o">|&lt;-----------------+</span>
   <span class="o">|</span>                  <span class="o">|</span> <span class="n">Agent</span> <span class="n">answers</span>    <span class="o">|</span>
   <span class="o">|</span>                  <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>                  <span class="o">|</span> <span class="n">Whisper</span> <span class="n">to</span> <span class="n">agent</span> <span class="o">|</span>
   <span class="o">|</span>                  <span class="o">|</span> <span class="p">(</span><span class="n">caller</span> <span class="n">can</span><span class="s1">&#39;t hear)</span>
   <span class="o">|</span>                  <span class="o">+-----------------&gt;|</span>
   <span class="o">|</span>                  <span class="o">|</span> <span class="s2">&quot;You have a call |</span>
   <span class="o">|</span>                  <span class="o">|</span>  <span class="kn">from</span><span class="w"> </span><span class="nn">John</span> <span class="n">Smith</span><span class="s2">&quot;|</span>
   <span class="o">|</span>                  <span class="o">+-----------------&gt;|</span>
   <span class="o">|</span>                  <span class="o">|</span> <span class="s2">&quot;Press 1 accept, |</span>
   <span class="o">|</span>                  <span class="o">|</span>  <span class="mi">2</span> <span class="n">to</span> <span class="n">reject</span><span class="s2">&quot;    |</span>
   <span class="o">|</span>                  <span class="o">+-----------------&gt;|</span>
   <span class="o">|</span>                  <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>                  <span class="o">|&lt;-----------------+</span>
   <span class="o">|</span>                  <span class="o">|</span> <span class="n">Press</span> <span class="mi">1</span>          <span class="o">|</span>
   <span class="o">|</span>                  <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|&lt;=================&gt;==================&gt;|</span>
   <span class="o">|</span> <span class="n">Connected</span>        <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>                  <span class="o">|</span>                  <span class="o">|</span>
</pre></div>
</div>
<p><strong>Flow Configuration:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Please state your name after the beep.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;record_voice&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>
                <span class="s2">&quot;silence_timeout&quot;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
                <span class="s2">&quot;variable_name&quot;</span><span class="p">:</span> <span class="s2">&quot;caller_name_recording&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Thank you. Please hold while we connect you.&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;moh_start&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;music_class&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;connect&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15552222222&quot;</span><span class="p">}],</span>
                <span class="s2">&quot;whisper&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
                    <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;You have a call from:&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;play_recording&quot;</span><span class="p">:</span> <span class="s2">&quot;{{caller_name_recording}}&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;accept_key&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;reject_key&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="warm-transfer-with-context">
<h3>Warm Transfer with Context<a class="headerlink" href="#warm-transfer-with-context" title="Link to this heading"></a></h3>
<p>Transfer call with context passed to the receiving agent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Warm</span> <span class="n">Transfer</span> <span class="n">Flow</span><span class="p">:</span>

<span class="n">Caller</span>           <span class="n">Agent</span> <span class="n">A</span>          <span class="n">VoIPBIN</span>         <span class="n">Agent</span> <span class="n">B</span>
   <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|&lt;===============&gt;</span>                <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span> <span class="n">Talking</span>         <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span> <span class="n">Initiate</span>       <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span> <span class="n">transfer</span>       <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">+---------------&gt;|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|&lt;---------------+</span>                <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span> <span class="p">(</span><span class="n">On</span> <span class="n">hold</span><span class="p">)</span>      <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span> <span class="n">Call</span> <span class="n">Agent</span> <span class="n">B</span>   <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span>                <span class="o">+---------------&gt;|</span>
   <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span>                <span class="o">|&lt;---------------+</span>
   <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span> <span class="n">Answered</span>       <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|&lt;===============&gt;================|</span>
   <span class="o">|</span>                <span class="o">|</span> <span class="n">Talk</span> <span class="n">to</span> <span class="n">B</span>      <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span> <span class="p">(</span><span class="n">Caller</span> <span class="n">on</span> <span class="n">hold</span><span class="p">)</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span> <span class="s2">&quot;Customer has  |                |</span>
   <span class="o">|</span>                <span class="o">|</span>  <span class="n">billing</span> <span class="n">issue</span><span class="s2">&quot;|                |</span>
   <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span> <span class="n">Complete</span>       <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span> <span class="n">transfer</span>       <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">+---------------&gt;|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|&lt;===============================&gt;=================|</span>
   <span class="o">|</span> <span class="n">Connected</span> <span class="n">to</span> <span class="n">B</span> <span class="o">|</span> <span class="p">(</span><span class="n">Disconnected</span><span class="p">)</span> <span class="o">|</span>                <span class="o">|</span>
   <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>                <span class="o">|</span>
</pre></div>
</div>
<p><strong>API for Attended Transfer:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Step</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Agent</span> <span class="n">A</span> <span class="n">initiates</span> <span class="n">transfer</span>
<span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span><span class="o">/</span><span class="p">{</span><span class="n">call</span><span class="o">-</span><span class="nb">id</span><span class="p">}</span><span class="o">/</span><span class="n">transfer</span>
<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;attended&quot;</span><span class="p">,</span>
    <span class="s2">&quot;destination&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span>
        <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15553333333&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="s2">&quot;cust-123&quot;</span><span class="p">,</span>
        <span class="s2">&quot;issue&quot;</span><span class="p">:</span> <span class="s2">&quot;billing dispute&quot;</span><span class="p">,</span>
        <span class="s2">&quot;notes&quot;</span><span class="p">:</span> <span class="s2">&quot;Customer called about incorrect charge on invoice #456&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">Response</span><span class="p">:</span>
<span class="p">{</span>
    <span class="s2">&quot;transfer_id&quot;</span><span class="p">:</span> <span class="s2">&quot;transfer-uuid&quot;</span><span class="p">,</span>
    <span class="s2">&quot;consult_call_id&quot;</span><span class="p">:</span> <span class="s2">&quot;consult-call-uuid&quot;</span><span class="p">,</span>
    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;consulting&quot;</span>
<span class="p">}</span>

<span class="n">Step</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Agent</span> <span class="n">A</span> <span class="n">talks</span> <span class="n">to</span> <span class="n">Agent</span> <span class="n">B</span><span class="p">,</span> <span class="n">then</span> <span class="n">completes</span>
<span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">transfers</span><span class="o">/</span><span class="p">{</span><span class="n">transfer</span><span class="o">-</span><span class="nb">id</span><span class="p">}</span><span class="o">/</span><span class="n">complete</span>

<span class="n">Step</span> <span class="mi">3</span><span class="p">:</span> <span class="n">Agent</span> <span class="n">B</span> <span class="n">receives</span> <span class="n">context</span> <span class="n">via</span> <span class="n">webhook</span> <span class="ow">or</span> <span class="n">screen</span> <span class="n">pop</span>
<span class="n">Webhook</span><span class="p">:</span> <span class="n">transfer_completed</span>
<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;transfer_completed&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;transfer_id&quot;</span><span class="p">:</span> <span class="s2">&quot;transfer-uuid&quot;</span><span class="p">,</span>
        <span class="s2">&quot;from_agent&quot;</span><span class="p">:</span> <span class="s2">&quot;agent-a-uuid&quot;</span><span class="p">,</span>
        <span class="s2">&quot;to_agent&quot;</span><span class="p">:</span> <span class="s2">&quot;agent-b-uuid&quot;</span><span class="p">,</span>
        <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="s2">&quot;cust-123&quot;</span><span class="p">,</span>
            <span class="s2">&quot;issue&quot;</span><span class="p">:</span> <span class="s2">&quot;billing dispute&quot;</span><span class="p">,</span>
            <span class="s2">&quot;notes&quot;</span><span class="p">:</span> <span class="s2">&quot;Customer called about incorrect charge on invoice #456&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="call-with-real-time-transcription">
<h3>Call with Real-time Transcription<a class="headerlink" href="#call-with-real-time-transcription" title="Link to this heading"></a></h3>
<p>Transcribe call in real-time for live captioning or analysis:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Real</span><span class="o">-</span><span class="n">time</span> <span class="n">Transcription</span><span class="p">:</span>

<span class="n">Caller</span>          <span class="n">VoIPBIN</span>         <span class="n">STT</span> <span class="n">Service</span>       <span class="n">Your</span> <span class="n">Server</span>
   <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span> <span class="n">Speaking</span>      <span class="o">|</span>                <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">+--------------&gt;|</span>                <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|</span> <span class="n">Audio</span> <span class="n">stream</span>   <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">+---------------&gt;|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|&lt;---------------+</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|</span> <span class="n">Transcript</span><span class="p">:</span>    <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|</span> <span class="s2">&quot;I need help&quot;</span>  <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|</span> <span class="n">WebSocket</span> <span class="n">push</span> <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">+----------------------------------&gt;|</span>
   <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                  <span class="o">|</span> <span class="n">Display</span>
   <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                  <span class="o">|</span> <span class="n">caption</span>
   <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span> <span class="p">(</span><span class="n">continues</span><span class="p">)</span>   <span class="o">|</span>                <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">+--------------&gt;|</span>                <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|</span> <span class="n">More</span> <span class="n">audio</span>     <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">+---------------&gt;|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|&lt;---------------+</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|</span> <span class="s2">&quot;with my order&quot;</span><span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                  <span class="o">|</span>
   <span class="o">|</span>               <span class="o">+----------------------------------&gt;|</span>
   <span class="o">|</span>               <span class="o">|</span>                <span class="o">|</span>                  <span class="o">|</span>
</pre></div>
</div>
<p><strong>Enable Transcription:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span>
<span class="p">{</span>
    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15551234567&quot;</span><span class="p">},</span>
    <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15559876543&quot;</span><span class="p">}],</span>
    <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;transcribe_start&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
                <span class="s2">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;both&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;connect&quot;</span><span class="p">,</span>
            <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;tel&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="s2">&quot;+15552222222&quot;</span><span class="p">}]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;transcribe_stop&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>

<span class="n">WebSocket</span> <span class="n">subscription</span> <span class="k">for</span> <span class="n">real</span><span class="o">-</span><span class="n">time</span> <span class="n">transcripts</span><span class="p">:</span>
<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;subscribe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;topics&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;customer_id:&lt;your-id&gt;:transcript:*&quot;</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">Received</span> <span class="n">events</span><span class="p">:</span>
<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;transcript_created&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;transcribe_id&quot;</span><span class="p">:</span> <span class="s2">&quot;transcribe-uuid&quot;</span><span class="p">,</span>
        <span class="s2">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;in&quot;</span><span class="p">,</span>
        <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;I need help with my order&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tm_transcript&quot;</span><span class="p">:</span> <span class="s2">&quot;0001-01-01 00:00:05.123&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="call-media-and-codecs">
<span id="call-media"></span><h2>Call Media and Codecs<a class="headerlink" href="#call-media-and-codecs" title="Link to this heading"></a></h2>
<p>This section covers audio and video media handling in VoIPBIN, including codec support, quality considerations, and encryption.</p>
<section id="audio-codec-support">
<h3>Audio Codec Support<a class="headerlink" href="#audio-codec-support" title="Link to this heading"></a></h3>
<p>VoIPBIN supports multiple audio codecs for different use cases:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Supported</span> <span class="n">Audio</span> <span class="n">Codecs</span><span class="p">:</span>

<span class="o">+----------+------------+-----------+------------------+------------------------+</span>
<span class="o">|</span> <span class="n">Codec</span>    <span class="o">|</span> <span class="n">Bitrate</span>    <span class="o">|</span> <span class="n">Sample</span>    <span class="o">|</span> <span class="n">Quality</span>          <span class="o">|</span> <span class="n">Use</span> <span class="n">Case</span>               <span class="o">|</span>
<span class="o">|</span>          <span class="o">|</span>            <span class="o">|</span> <span class="n">Rate</span>      <span class="o">|</span>                  <span class="o">|</span>                        <span class="o">|</span>
<span class="o">+----------+------------+-----------+------------------+------------------------+</span>
<span class="o">|</span> <span class="n">G</span><span class="mf">.711</span>    <span class="o">|</span> <span class="mi">64</span> <span class="n">kbps</span>    <span class="o">|</span> <span class="mi">8</span> <span class="n">kHz</span>     <span class="o">|</span> <span class="n">Good</span> <span class="p">(</span><span class="n">PSTN</span><span class="p">)</span>      <span class="o">|</span> <span class="n">PSTN</span> <span class="n">calls</span><span class="p">,</span> <span class="n">SIP</span> <span class="n">trunks</span> <span class="o">|</span>
<span class="o">|</span> <span class="p">(</span><span class="n">ulaw</span><span class="o">/</span>   <span class="o">|</span>            <span class="o">|</span>           <span class="o">|</span>                  <span class="o">|</span>                        <span class="o">|</span>
<span class="o">|</span>  <span class="n">alaw</span><span class="p">)</span>   <span class="o">|</span>            <span class="o">|</span>           <span class="o">|</span>                  <span class="o">|</span>                        <span class="o">|</span>
<span class="o">+----------+------------+-----------+------------------+------------------------+</span>
<span class="o">|</span> <span class="n">G</span><span class="mf">.722</span>    <span class="o">|</span> <span class="mi">64</span> <span class="n">kbps</span>    <span class="o">|</span> <span class="mi">16</span> <span class="n">kHz</span>    <span class="o">|</span> <span class="n">Excellent</span> <span class="p">(</span><span class="n">HD</span><span class="p">)</span>   <span class="o">|</span> <span class="n">HD</span> <span class="n">voice</span> <span class="n">SIP</span> <span class="n">calls</span>     <span class="o">|</span>
<span class="o">+----------+------------+-----------+------------------+------------------------+</span>
<span class="o">|</span> <span class="n">G</span><span class="mf">.729</span>    <span class="o">|</span> <span class="mi">8</span> <span class="n">kbps</span>     <span class="o">|</span> <span class="mi">8</span> <span class="n">kHz</span>     <span class="o">|</span> <span class="n">Acceptable</span>       <span class="o">|</span> <span class="n">Low</span> <span class="n">bandwidth</span> <span class="n">links</span>    <span class="o">|</span>
<span class="o">+----------+------------+-----------+------------------+------------------------+</span>
<span class="o">|</span> <span class="n">Opus</span>     <span class="o">|</span> <span class="mi">6</span><span class="o">-</span><span class="mi">510</span> <span class="n">kbps</span> <span class="o">|</span> <span class="mi">8</span><span class="o">-</span><span class="mi">48</span> <span class="n">kHz</span>  <span class="o">|</span> <span class="n">Excellent</span>        <span class="o">|</span> <span class="n">WebRTC</span><span class="p">,</span> <span class="n">adaptive</span>       <span class="o">|</span>
<span class="o">|</span>          <span class="o">|</span> <span class="p">(</span><span class="n">adaptive</span><span class="p">)</span> <span class="o">|</span>           <span class="o">|</span>                  <span class="o">|</span>                        <span class="o">|</span>
<span class="o">+----------+------------+-----------+------------------+------------------------+</span>
<span class="o">|</span> <span class="n">PCMU</span>     <span class="o">|</span> <span class="mi">64</span> <span class="n">kbps</span>    <span class="o">|</span> <span class="mi">8</span> <span class="n">kHz</span>     <span class="o">|</span> <span class="n">Good</span>             <span class="o">|</span> <span class="n">Same</span> <span class="k">as</span> <span class="n">G</span><span class="mf">.711</span> <span class="n">ulaw</span>     <span class="o">|</span>
<span class="o">+----------+------------+-----------+------------------+------------------------+</span>
<span class="o">|</span> <span class="n">PCMA</span>     <span class="o">|</span> <span class="mi">64</span> <span class="n">kbps</span>    <span class="o">|</span> <span class="mi">8</span> <span class="n">kHz</span>     <span class="o">|</span> <span class="n">Good</span>             <span class="o">|</span> <span class="n">Same</span> <span class="k">as</span> <span class="n">G</span><span class="mf">.711</span> <span class="n">alaw</span>     <span class="o">|</span>
<span class="o">+----------+------------+-----------+------------------+------------------------+</span>
</pre></div>
</div>
<p><strong>Codec Selection:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Codec</span> <span class="n">Selection</span> <span class="n">by</span> <span class="n">Call</span> <span class="n">Type</span><span class="p">:</span>

<span class="n">PSTN</span> <span class="n">Calls</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Codec</span><span class="p">:</span> <span class="n">G</span><span class="mf">.711</span> <span class="p">(</span><span class="n">ulaw</span> <span class="k">for</span> <span class="n">US</span><span class="p">,</span> <span class="n">alaw</span> <span class="k">for</span> <span class="n">EU</span><span class="p">)</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Reason</span><span class="p">:</span> <span class="n">Universal</span> <span class="n">PSTN</span> <span class="n">compatibility</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">Quality</span><span class="p">:</span> <span class="n">Standard</span> <span class="n">telephone</span> <span class="n">quality</span>      <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">WebRTC</span> <span class="n">Calls</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Codec</span><span class="p">:</span> <span class="n">Opus</span> <span class="p">(</span><span class="n">primary</span><span class="p">)</span>                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Reason</span><span class="p">:</span> <span class="n">Adaptive</span> <span class="n">bitrate</span><span class="p">,</span> <span class="n">loss</span> <span class="n">resilient</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Quality</span><span class="p">:</span> <span class="n">HD</span> <span class="n">voice</span> <span class="n">up</span> <span class="n">to</span> <span class="mi">48</span> <span class="n">kHz</span>           <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">SIP</span> <span class="n">Trunk</span> <span class="p">(</span><span class="n">HD</span><span class="p">):</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Codec</span><span class="p">:</span> <span class="n">G</span><span class="mf">.722</span> <span class="p">(</span><span class="k">if</span> <span class="n">supported</span><span class="p">)</span>              <span class="o">|</span>
<span class="o">|</span> <span class="n">Fallback</span><span class="p">:</span> <span class="n">G</span><span class="mf">.711</span>                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Quality</span><span class="p">:</span> <span class="n">Wideband</span> <span class="n">audio</span> <span class="p">(</span><span class="mi">16</span> <span class="n">kHz</span><span class="p">)</span>         <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">Low</span> <span class="n">Bandwidth</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Codec</span><span class="p">:</span> <span class="n">G</span><span class="mf">.729</span>                             <span class="o">|</span>
<span class="o">|</span> <span class="n">Reason</span><span class="p">:</span> <span class="n">Only</span> <span class="mi">8</span> <span class="n">kbps</span> <span class="n">required</span>             <span class="o">|</span>
<span class="o">|</span> <span class="n">Quality</span><span class="p">:</span> <span class="n">Acceptable</span> <span class="k">for</span> <span class="n">voice</span>            <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="audio-quality-factors">
<h3>Audio Quality Factors<a class="headerlink" href="#audio-quality-factors" title="Link to this heading"></a></h3>
<p>Several factors affect call audio quality:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Quality</span> <span class="n">Factor</span><span class="p">:</span> <span class="n">Network</span> <span class="n">Latency</span>

<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="o">&lt;</span> <span class="mi">150</span><span class="n">ms</span><span class="p">:</span>  <span class="n">Excellent</span> <span class="o">-</span> <span class="n">natural</span> <span class="n">conversation</span>
<span class="o">|</span> <span class="mi">150</span><span class="o">-</span><span class="mi">300</span><span class="n">ms</span><span class="p">:</span> <span class="n">Good</span> <span class="o">-</span> <span class="n">slight</span> <span class="n">delay</span> <span class="n">noticeable</span>
<span class="o">|</span> <span class="mi">300</span><span class="o">-</span><span class="mi">500</span><span class="n">ms</span><span class="p">:</span> <span class="n">Fair</span> <span class="o">-</span> <span class="n">conversation</span> <span class="n">difficult</span>
<span class="o">|</span> <span class="o">&gt;</span> <span class="mi">500</span><span class="n">ms</span><span class="p">:</span>  <span class="n">Poor</span> <span class="o">-</span> <span class="n">echo</span><span class="p">,</span> <span class="n">overlap</span> <span class="n">issues</span>
<span class="o">+------------------------------------------+</span>

<span class="n">VoIPBIN</span> <span class="n">Infrastructure</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Global</span> <span class="n">edge</span> <span class="n">locations</span> <span class="n">minimize</span> <span class="n">latency</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Typical</span> <span class="n">added</span> <span class="n">latency</span><span class="p">:</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="n">ms</span>            <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Quality</span> <span class="n">Factor</span><span class="p">:</span> <span class="n">Packet</span> <span class="n">Loss</span>

<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="mi">0</span><span class="o">%</span><span class="p">:</span>    <span class="n">Perfect</span> <span class="n">audio</span>
<span class="o">|</span> <span class="mi">1</span><span class="o">-</span><span class="mi">2</span><span class="o">%</span><span class="p">:</span>  <span class="n">Minor</span> <span class="n">artifacts</span><span class="p">,</span> <span class="n">acceptable</span>
<span class="o">|</span> <span class="mi">3</span><span class="o">-</span><span class="mi">5</span><span class="o">%</span><span class="p">:</span>  <span class="n">Noticeable</span> <span class="n">degradation</span>
<span class="o">|</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="o">%</span><span class="p">:</span>  <span class="n">Significant</span> <span class="n">quality</span> <span class="n">loss</span>
<span class="o">+------------------------------------------+</span>

<span class="n">VoIPBIN</span> <span class="n">Mitigation</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="o">-</span> <span class="n">Opus</span> <span class="n">codec</span><span class="p">:</span> <span class="n">Built</span><span class="o">-</span><span class="ow">in</span> <span class="n">packet</span> <span class="n">loss</span>       <span class="o">|</span>
<span class="o">|</span>   <span class="n">concealment</span> <span class="n">up</span> <span class="n">to</span> <span class="mi">15</span><span class="o">%</span>                  <span class="o">|</span>
<span class="o">|</span> <span class="o">-</span> <span class="n">Jitter</span> <span class="n">buffer</span><span class="p">:</span> <span class="n">Smooths</span> <span class="n">packet</span> <span class="n">timing</span>   <span class="o">|</span>
<span class="o">|</span> <span class="o">-</span> <span class="n">FEC</span><span class="p">:</span> <span class="n">Forward</span> <span class="n">Error</span> <span class="n">Correction</span> <span class="p">(</span><span class="n">Opus</span><span class="p">)</span>   <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Quality</span> <span class="n">Factor</span><span class="p">:</span> <span class="n">Jitter</span>

<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Definition</span><span class="p">:</span> <span class="n">Variation</span> <span class="ow">in</span> <span class="n">packet</span> <span class="n">arrival</span>  <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="n">ms</span><span class="p">:</span>  <span class="n">Excellent</span>                       <span class="o">|</span>
<span class="o">|</span> <span class="mi">20</span><span class="o">-</span><span class="mi">50</span><span class="n">ms</span><span class="p">:</span> <span class="n">Good</span> <span class="p">(</span><span class="n">jitter</span> <span class="n">buffer</span> <span class="n">handles</span><span class="p">)</span>    <span class="o">|</span>
<span class="o">|</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="n">ms</span><span class="p">:</span>  <span class="n">Poor</span> <span class="o">-</span> <span class="n">buffer</span> <span class="n">underruns</span>         <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">VoIPBIN</span> <span class="n">Jitter</span> <span class="n">Buffer</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Type</span><span class="p">:</span> <span class="n">Adaptive</span>                           <span class="o">|</span>
<span class="o">|</span> <span class="n">Range</span><span class="p">:</span> <span class="mi">20</span><span class="o">-</span><span class="mi">200</span><span class="n">ms</span>                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Adapts</span> <span class="n">to</span> <span class="n">network</span> <span class="n">conditions</span>             <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="rtp-and-media-transport">
<h3>RTP and Media Transport<a class="headerlink" href="#rtp-and-media-transport" title="Link to this heading"></a></h3>
<p>Real-time Transport Protocol (RTP) carries audio:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RTP</span> <span class="n">Packet</span> <span class="n">Structure</span><span class="p">:</span>

<span class="o">+-----------------------------------+</span>
<span class="o">|</span> <span class="n">V</span><span class="o">=</span><span class="mi">2</span><span class="o">|</span><span class="n">P</span><span class="o">|</span><span class="n">X</span><span class="o">|</span><span class="n">CC</span> <span class="o">|</span><span class="n">M</span><span class="o">|</span> <span class="n">PT</span> <span class="o">|</span>  <span class="n">Sequence</span> <span class="c1">#  |   12 bytes</span>
<span class="o">|</span>           <span class="n">Timestamp</span>              <span class="o">|</span>   <span class="n">header</span>
<span class="o">|</span>             <span class="n">SSRC</span>                 <span class="o">|</span>
<span class="o">+-----------------------------------+</span>
<span class="o">|</span>            <span class="n">Payload</span>               <span class="o">|</span>   <span class="n">Audio</span>
<span class="o">|</span>        <span class="p">(</span><span class="n">codec</span><span class="o">-</span><span class="n">encoded</span> <span class="n">audio</span><span class="p">)</span>     <span class="o">|</span>   <span class="n">data</span>
<span class="o">+-----------------------------------+</span>

<span class="n">Header</span> <span class="n">Fields</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">V</span><span class="p">:</span>  <span class="n">Version</span> <span class="p">(</span><span class="n">always</span> <span class="mi">2</span><span class="p">)</span>                   <span class="o">|</span>
<span class="o">|</span> <span class="n">P</span><span class="p">:</span>  <span class="n">Padding</span> <span class="n">flag</span>                         <span class="o">|</span>
<span class="o">|</span> <span class="n">X</span><span class="p">:</span>  <span class="n">Extension</span> <span class="n">flag</span>                       <span class="o">|</span>
<span class="o">|</span> <span class="n">CC</span><span class="p">:</span> <span class="n">CSRC</span> <span class="n">count</span>                           <span class="o">|</span>
<span class="o">|</span> <span class="n">M</span><span class="p">:</span>  <span class="n">Marker</span> <span class="n">bit</span> <span class="p">(</span><span class="n">frame</span> <span class="n">boundary</span><span class="p">)</span>          <span class="o">|</span>
<span class="o">|</span> <span class="n">PT</span><span class="p">:</span> <span class="n">Payload</span> <span class="nb">type</span> <span class="p">(</span><span class="n">codec</span> <span class="n">identifier</span><span class="p">)</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">Sequence</span><span class="p">:</span> <span class="n">Packet</span> <span class="n">ordering</span>                <span class="o">|</span>
<span class="o">|</span> <span class="n">Timestamp</span><span class="p">:</span> <span class="n">Sampling</span> <span class="n">instant</span>              <span class="o">|</span>
<span class="o">|</span> <span class="n">SSRC</span><span class="p">:</span> <span class="n">Synchronization</span> <span class="n">source</span> <span class="n">ID</span>          <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
<p><strong>RTP Port Ranges:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VoIPBIN</span> <span class="n">RTP</span> <span class="n">Ports</span><span class="p">:</span>

<span class="n">Media</span> <span class="n">Servers</span> <span class="p">(</span><span class="n">Asterisk</span><span class="p">):</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Range</span><span class="p">:</span> <span class="mi">10000</span><span class="o">-</span><span class="mi">20000</span> <span class="n">UDP</span>                   <span class="o">|</span>
<span class="o">|</span> <span class="n">Per</span> <span class="n">call</span><span class="p">:</span> <span class="mi">2</span> <span class="n">ports</span> <span class="p">(</span><span class="n">RTP</span> <span class="o">+</span> <span class="n">RTCP</span><span class="p">)</span>           <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">RTPEngine</span> <span class="p">(</span><span class="n">Media</span> <span class="n">Proxy</span><span class="p">):</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Range</span><span class="p">:</span> <span class="mi">20000</span><span class="o">-</span><span class="mi">60000</span> <span class="n">UDP</span>                   <span class="o">|</span>
<span class="o">|</span> <span class="n">Handles</span> <span class="n">NAT</span> <span class="n">traversal</span>                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Provides</span> <span class="n">encryption</span> <span class="n">bridging</span>             <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">Client</span> <span class="n">Requirements</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Outbound</span> <span class="n">UDP</span> <span class="n">to</span> <span class="n">VoIPBIN</span> <span class="n">ports</span> <span class="n">required</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">If</span> <span class="n">blocked</span><span class="p">:</span> <span class="n">WebRTC</span> <span class="k">with</span> <span class="n">TURN</span> <span class="k">as</span> <span class="n">fallback</span> <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="media-encryption">
<h3>Media Encryption<a class="headerlink" href="#media-encryption" title="Link to this heading"></a></h3>
<p>VoIPBIN supports encrypted media for security:</p>
<p><strong>SRTP (Secure RTP):</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SRTP</span> <span class="n">Encryption</span><span class="p">:</span>

<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Algorithm</span><span class="p">:</span> <span class="n">AES</span><span class="o">-</span><span class="mi">128</span><span class="o">-</span><span class="n">CM</span>                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Authentication</span><span class="p">:</span> <span class="n">HMAC</span><span class="o">-</span><span class="n">SHA1</span><span class="o">-</span><span class="mi">80</span>             <span class="o">|</span>
<span class="o">|</span> <span class="n">Key</span> <span class="n">exchange</span><span class="p">:</span> <span class="n">DTLS</span><span class="o">-</span><span class="n">SRTP</span> <span class="ow">or</span> <span class="n">SDES</span>          <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">SRTP</span> <span class="n">Packet</span><span class="p">:</span>
<span class="o">+-----------------------------------+</span>
<span class="o">|</span> <span class="n">RTP</span> <span class="n">Header</span> <span class="p">(</span><span class="ow">not</span> <span class="n">encrypted</span><span class="p">)</span>        <span class="o">|</span>
<span class="o">+-----------------------------------+</span>
<span class="o">|</span> <span class="n">Encrypted</span> <span class="n">Payload</span>                 <span class="o">|</span>
<span class="o">|</span> <span class="p">(</span><span class="n">AES</span><span class="o">-</span><span class="mi">128</span> <span class="n">Counter</span> <span class="n">Mode</span><span class="p">)</span>            <span class="o">|</span>
<span class="o">+-----------------------------------+</span>
<span class="o">|</span> <span class="n">Authentication</span> <span class="n">Tag</span> <span class="p">(</span><span class="mi">10</span> <span class="nb">bytes</span><span class="p">)</span>     <span class="o">|</span>
<span class="o">+-----------------------------------+</span>
</pre></div>
</div>
<p><strong>Encryption by Call Type:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Encryption</span> <span class="n">Matrix</span><span class="p">:</span>

<span class="o">+------------------+-------------+-----------+</span>
<span class="o">|</span> <span class="n">Call</span> <span class="n">Type</span>        <span class="o">|</span> <span class="n">Signaling</span>   <span class="o">|</span> <span class="n">Media</span>     <span class="o">|</span>
<span class="o">+------------------+-------------+-----------+</span>
<span class="o">|</span> <span class="n">WebRTC</span>           <span class="o">|</span> <span class="n">WSS</span> <span class="p">(</span><span class="n">TLS</span><span class="p">)</span>   <span class="o">|</span> <span class="n">SRTP</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">SIP</span> <span class="n">over</span> <span class="n">TLS</span>     <span class="o">|</span> <span class="n">TLS</span>         <span class="o">|</span> <span class="n">SRTP</span><span class="o">*</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">SIP</span> <span class="n">over</span> <span class="n">UDP</span>     <span class="o">|</span> <span class="kc">None</span>        <span class="o">|</span> <span class="n">RTP</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">PSTN</span>             <span class="o">|</span> <span class="n">N</span><span class="o">/</span><span class="n">A</span>         <span class="o">|</span> <span class="n">RTP</span><span class="o">**</span>     <span class="o">|</span>
<span class="o">+------------------+-------------+-----------+</span>

<span class="o">*</span> <span class="n">SRTP</span> <span class="k">if</span> <span class="n">negotiated</span> <span class="n">via</span> <span class="n">SDES</span> <span class="ow">or</span> <span class="n">DTLS</span>
<span class="o">**</span> <span class="n">PSTN</span> <span class="n">segment</span> <span class="ow">is</span> <span class="n">unencrypted</span> <span class="p">(</span><span class="n">carrier</span> <span class="n">network</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>End-to-End Encryption:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">E2E</span> <span class="n">Encryption</span> <span class="n">Consideration</span><span class="p">:</span>

<span class="n">WebRTC</span> <span class="n">to</span> <span class="n">WebRTC</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Full</span> <span class="n">SRTP</span> <span class="n">encryption</span> <span class="n">possible</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">Keys</span> <span class="n">never</span> <span class="n">leave</span> <span class="n">endpoints</span>               <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">WebRTC</span> <span class="n">to</span> <span class="n">PSTN</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">WebRTC</span> <span class="n">leg</span><span class="p">:</span> <span class="n">SRTP</span> <span class="n">encrypted</span>               <span class="o">|</span>
<span class="o">|</span> <span class="n">VoIPBIN</span><span class="p">:</span> <span class="n">Decrypts</span> <span class="n">to</span> <span class="n">mix</span><span class="o">/</span><span class="n">process</span>         <span class="o">|</span>
<span class="o">|</span> <span class="n">PSTN</span> <span class="n">leg</span><span class="p">:</span> <span class="n">Unencrypted</span> <span class="p">(</span><span class="n">carrier</span> <span class="n">limit</span><span class="p">)</span>    <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">Note</span><span class="p">:</span> <span class="n">VoIPBIN</span> <span class="n">must</span> <span class="n">decrypt</span> <span class="n">media</span> <span class="k">for</span><span class="p">:</span>
<span class="o">-</span> <span class="n">Transcoding</span> <span class="n">between</span> <span class="n">codecs</span>
<span class="o">-</span> <span class="n">Recording</span>
<span class="o">-</span> <span class="n">Transcription</span>
<span class="o">-</span> <span class="n">Conferencing</span> <span class="p">(</span><span class="n">mixing</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="dtmf-handling">
<h3>DTMF Handling<a class="headerlink" href="#dtmf-handling" title="Link to this heading"></a></h3>
<p>Dual-Tone Multi-Frequency (DTMF) for IVR input:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DTMF</span> <span class="n">Methods</span><span class="p">:</span>

<span class="n">RFC</span> <span class="mi">2833</span> <span class="p">(</span><span class="n">RTP</span> <span class="n">Events</span><span class="p">):</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">DTMF</span> <span class="n">sent</span> <span class="k">as</span> <span class="n">special</span> <span class="n">RTP</span> <span class="n">packets</span>         <span class="o">|</span>
<span class="o">|</span> <span class="n">Payload</span> <span class="nb">type</span><span class="p">:</span> <span class="mi">101</span> <span class="p">(</span><span class="n">commonly</span><span class="p">)</span>             <span class="o">|</span>
<span class="o">|</span> <span class="n">Most</span> <span class="n">reliable</span> <span class="k">for</span> <span class="n">VoIP</span>                   <span class="o">|</span>
<span class="o">|</span> <span class="n">VoIPBIN</span> <span class="n">default</span> <span class="n">method</span>                   <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">In</span><span class="o">-</span><span class="n">band</span> <span class="p">(</span><span class="n">Audio</span><span class="p">):</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">DTMF</span> <span class="n">tones</span> <span class="ow">in</span> <span class="n">audio</span> <span class="n">stream</span>               <span class="o">|</span>
<span class="o">|</span> <span class="n">Can</span> <span class="n">be</span> <span class="n">compressed</span><span class="o">/</span><span class="n">distorted</span>              <span class="o">|</span>
<span class="o">|</span> <span class="n">Fallback</span> <span class="k">for</span> <span class="n">legacy</span> <span class="n">systems</span>              <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">SIP</span> <span class="n">INFO</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">DTMF</span> <span class="ow">in</span> <span class="n">SIP</span> <span class="n">signaling</span> <span class="n">messages</span>           <span class="o">|</span>
<span class="o">|</span> <span class="n">Not</span> <span class="n">affected</span> <span class="n">by</span> <span class="n">audio</span> <span class="n">path</span>               <span class="o">|</span>
<span class="o">|</span> <span class="n">Less</span> <span class="n">common</span>                              <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
<p><strong>DTMF in API:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Sending</span> <span class="n">DTMF</span><span class="p">:</span>
<span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span><span class="o">/</span><span class="p">{</span><span class="n">call</span><span class="o">-</span><span class="nb">id</span><span class="p">}</span><span class="o">/</span><span class="n">dtmf</span>
<span class="p">{</span>
    <span class="s2">&quot;digits&quot;</span><span class="p">:</span> <span class="s2">&quot;1234#&quot;</span><span class="p">,</span>
    <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mi">250</span><span class="p">,</span>      <span class="o">//</span> <span class="n">ms</span> <span class="n">per</span> <span class="n">digit</span>
    <span class="s2">&quot;interval&quot;</span><span class="p">:</span> <span class="mi">100</span>       <span class="o">//</span> <span class="n">ms</span> <span class="n">between</span> <span class="n">digits</span>
<span class="p">}</span>

<span class="n">Receiving</span> <span class="n">DTMF</span> <span class="p">(</span><span class="ow">in</span> <span class="n">flow</span><span class="p">):</span>
<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;digits_receive&quot;</span><span class="p">,</span>
    <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;length&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>          <span class="o">//</span> <span class="n">Expected</span> <span class="n">digits</span>
        <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>    <span class="o">//</span> <span class="n">Timeout</span> <span class="n">ms</span>
        <span class="s2">&quot;terminator&quot;</span><span class="p">:</span> <span class="s2">&quot;#&quot;</span>     <span class="o">//</span> <span class="n">Optional</span> <span class="n">end</span> <span class="n">char</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="recording-formats">
<h3>Recording Formats<a class="headerlink" href="#recording-formats" title="Link to this heading"></a></h3>
<p>VoIPBIN supports multiple recording formats:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Recording</span> <span class="n">Format</span> <span class="n">Options</span><span class="p">:</span>

<span class="o">+--------+------------+-----------+------------------+</span>
<span class="o">|</span> <span class="n">Format</span> <span class="o">|</span> <span class="n">Codec</span>      <span class="o">|</span> <span class="n">Quality</span>   <span class="o">|</span> <span class="n">File</span> <span class="n">Size</span>        <span class="o">|</span>
<span class="o">+--------+------------+-----------+------------------+</span>
<span class="o">|</span> <span class="n">WAV</span>    <span class="o">|</span> <span class="n">PCM</span>        <span class="o">|</span> <span class="n">Lossless</span>  <span class="o">|</span> <span class="o">~</span><span class="mi">960</span> <span class="n">KB</span><span class="o">/</span><span class="nb">min</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">MP3</span>    <span class="o">|</span> <span class="n">MP3</span>        <span class="o">|</span> <span class="n">Good</span>      <span class="o">|</span> <span class="o">~</span><span class="mi">128</span> <span class="n">KB</span><span class="o">/</span><span class="nb">min</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">OGG</span>    <span class="o">|</span> <span class="n">Opus</span>       <span class="o">|</span> <span class="n">Excellent</span> <span class="o">|</span> <span class="o">~</span><span class="mi">96</span> <span class="n">KB</span><span class="o">/</span><span class="nb">min</span>       <span class="o">|</span>
<span class="o">+--------+------------+-----------+------------------+</span>

<span class="n">Default</span><span class="p">:</span> <span class="n">MP3</span> <span class="p">(</span><span class="n">balance</span> <span class="n">of</span> <span class="n">quality</span> <span class="ow">and</span> <span class="n">size</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Recording Configuration:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Recording</span> <span class="n">Options</span><span class="p">:</span>

<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;record_start&quot;</span><span class="p">,</span>
    <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;both&quot;</span><span class="p">,</span>    <span class="o">//</span> <span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;out&quot;</span><span class="p">,</span> <span class="s2">&quot;both&quot;</span>
        <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;mp3&quot;</span><span class="p">,</span>        <span class="o">//</span> <span class="s2">&quot;wav&quot;</span><span class="p">,</span> <span class="s2">&quot;mp3&quot;</span><span class="p">,</span> <span class="s2">&quot;ogg&quot;</span>
        <span class="s2">&quot;channels&quot;</span><span class="p">:</span> <span class="s2">&quot;mixed&quot;</span><span class="p">,</span>    <span class="o">//</span> <span class="s2">&quot;mixed&quot;</span><span class="p">,</span> <span class="s2">&quot;stereo&quot;</span>
        <span class="s2">&quot;sample_rate&quot;</span><span class="p">:</span> <span class="mi">16000</span>    <span class="o">//</span> <span class="n">Hz</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">Direction</span> <span class="n">Explained</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span>   <span class="n">Record</span> <span class="n">only</span> <span class="n">incoming</span> <span class="n">audio</span>       <span class="o">|</span>
<span class="o">|</span>         <span class="p">(</span><span class="n">what</span> <span class="n">caller</span> <span class="n">says</span><span class="p">)</span>               <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="s2">&quot;out&quot;</span><span class="p">:</span>  <span class="n">Record</span> <span class="n">only</span> <span class="n">outgoing</span> <span class="n">audio</span>       <span class="o">|</span>
<span class="o">|</span>         <span class="p">(</span><span class="n">what</span> <span class="n">system</span><span class="o">/</span><span class="n">agent</span> <span class="n">says</span><span class="p">)</span>         <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="s2">&quot;both&quot;</span><span class="p">:</span> <span class="n">Record</span> <span class="n">entire</span> <span class="n">conversation</span>       <span class="o">|</span>
<span class="o">|</span>         <span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="n">recommended</span><span class="p">)</span>           <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">Channels</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="s2">&quot;mixed&quot;</span><span class="p">:</span>  <span class="n">Single</span> <span class="n">track</span><span class="p">,</span> <span class="n">both</span> <span class="n">parties</span>     <span class="o">|</span>
<span class="o">|</span>           <span class="n">combined</span><span class="o">.</span> <span class="n">Smaller</span> <span class="n">file</span><span class="o">.</span>        <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="s2">&quot;stereo&quot;</span><span class="p">:</span> <span class="n">Two</span> <span class="n">tracks</span><span class="p">,</span> <span class="n">parties</span> <span class="n">separated</span>  <span class="o">|</span>
<span class="o">|</span>           <span class="n">Left</span> <span class="o">=</span> <span class="n">inbound</span><span class="p">,</span> <span class="n">Right</span> <span class="o">=</span> <span class="n">outbound</span><span class="o">|</span>
<span class="o">|</span>           <span class="n">Better</span> <span class="k">for</span> <span class="n">analysis</span><span class="o">/</span><span class="n">transcription</span><span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="text-to-speech-tts">
<h3>Text-to-Speech (TTS)<a class="headerlink" href="#text-to-speech-tts" title="Link to this heading"></a></h3>
<p>TTS converts text to spoken audio:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TTS</span> <span class="n">Providers</span><span class="p">:</span>

<span class="n">Google</span> <span class="n">Cloud</span> <span class="n">TTS</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Voices</span><span class="p">:</span> <span class="mi">200</span><span class="o">+</span> <span class="ow">in</span> <span class="mi">40</span><span class="o">+</span> <span class="n">languages</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">Quality</span><span class="p">:</span> <span class="n">Neural</span> <span class="ow">and</span> <span class="n">Standard</span>             <span class="o">|</span>
<span class="o">|</span> <span class="n">SSML</span><span class="p">:</span> <span class="n">Supported</span>                          <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">TTS</span> <span class="n">Action</span> <span class="n">Example</span><span class="p">:</span>
<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
    <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello, welcome to our service.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gender&quot;</span><span class="p">:</span> <span class="s2">&quot;female&quot;</span><span class="p">,</span>
        <span class="s2">&quot;voice&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US-Neural2-C&quot;</span>   <span class="o">//</span> <span class="n">Optional</span> <span class="n">specific</span> <span class="n">voice</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>SSML Support:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SSML</span> <span class="p">(</span><span class="n">Speech</span> <span class="n">Synthesis</span> <span class="n">Markup</span> <span class="n">Language</span><span class="p">):</span>

<span class="n">Basic</span> <span class="n">Example</span><span class="p">:</span>
<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;talk&quot;</span><span class="p">,</span>
    <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;speak&gt;Your balance is &lt;say-as interpret-as=&#39;currency&#39;&gt;$123.45&lt;/say-as&gt;&lt;/speak&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">Common</span> <span class="n">SSML</span> <span class="n">Tags</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="k">break</span> <span class="n">time</span><span class="o">=</span><span class="s1">&#39;500ms&#39;</span><span class="o">/&gt;</span>  <span class="o">-</span> <span class="n">Pause</span>           <span class="o">|</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">emphasis</span><span class="o">&gt;</span>            <span class="o">-</span> <span class="n">Stress</span> <span class="n">word</span>      <span class="o">|</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">prosody</span> <span class="n">rate</span><span class="o">=</span><span class="s1">&#39;slow&#39;</span><span class="o">&gt;</span> <span class="o">-</span> <span class="n">Speed</span> <span class="n">control</span>    <span class="o">|</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">say</span><span class="o">-</span><span class="k">as</span><span class="o">&gt;</span>              <span class="o">-</span> <span class="n">Format</span> <span class="n">numbers</span>   <span class="o">|</span>
<span class="o">|</span> <span class="o">&lt;</span><span class="n">phoneme</span><span class="o">&gt;</span>             <span class="o">-</span> <span class="n">Pronunciation</span>    <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="speech-to-text-stt">
<h3>Speech-to-Text (STT)<a class="headerlink" href="#speech-to-text-stt" title="Link to this heading"></a></h3>
<p>Real-time transcription of audio:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">STT</span> <span class="n">Configuration</span><span class="p">:</span>

<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;transcribe_start&quot;</span><span class="p">,</span>
    <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span><span class="p">,</span>
        <span class="s2">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;both&quot;</span><span class="p">,</span>      <span class="o">//</span> <span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;out&quot;</span><span class="p">,</span> <span class="s2">&quot;both&quot;</span>
        <span class="s2">&quot;interim_results&quot;</span><span class="p">:</span> <span class="n">false</span>  <span class="o">//</span> <span class="n">Real</span><span class="o">-</span><span class="n">time</span> <span class="n">partials</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">Supported</span> <span class="n">Languages</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="mi">70</span><span class="o">+</span> <span class="n">languages</span> <span class="ow">and</span> <span class="n">regional</span> <span class="n">variants</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">See</span><span class="p">:</span> <span class="n">transcribe_overview</span> <span class="k">for</span> <span class="n">full</span> <span class="nb">list</span>   <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
<p><strong>STT Accuracy Tips:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Improve</span> <span class="n">Transcription</span> <span class="n">Accuracy</span><span class="p">:</span>

<span class="mf">1.</span> <span class="n">Correct</span> <span class="n">Language</span><span class="p">:</span>
   <span class="o">+------------------------------------------+</span>
   <span class="o">|</span> <span class="n">Specify</span> <span class="n">exact</span> <span class="n">locale</span><span class="p">:</span> <span class="s2">&quot;en-US&quot;</span> <span class="n">vs</span> <span class="s2">&quot;en-GB&quot;</span> <span class="o">|</span>
   <span class="o">|</span> <span class="n">Affects</span> <span class="n">vocabulary</span> <span class="ow">and</span> <span class="n">accent</span> <span class="n">models</span>     <span class="o">|</span>
   <span class="o">+------------------------------------------+</span>

<span class="mf">2.</span> <span class="n">Audio</span> <span class="n">Quality</span><span class="p">:</span>
   <span class="o">+------------------------------------------+</span>
   <span class="o">|</span> <span class="n">Clear</span> <span class="n">audio</span> <span class="o">=</span> <span class="n">better</span> <span class="n">transcription</span>       <span class="o">|</span>
   <span class="o">|</span> <span class="n">Minimize</span> <span class="n">background</span> <span class="n">noise</span>                <span class="o">|</span>
   <span class="o">|</span> <span class="n">Use</span> <span class="n">headsets</span> <span class="k">for</span> <span class="n">agents</span>                  <span class="o">|</span>
   <span class="o">+------------------------------------------+</span>

<span class="mf">3.</span> <span class="n">Sample</span> <span class="n">Rate</span><span class="p">:</span>
   <span class="o">+------------------------------------------+</span>
   <span class="o">|</span> <span class="n">Higher</span> <span class="n">sample</span> <span class="n">rate</span> <span class="p">(</span><span class="mi">16</span><span class="n">kHz</span><span class="o">+</span><span class="p">)</span> <span class="n">helps</span>        <span class="o">|</span>
   <span class="o">|</span> <span class="n">VoIPBIN</span> <span class="n">resamples</span> <span class="n">automatically</span>          <span class="o">|</span>
   <span class="o">+------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="video-calls-webrtc">
<h3>Video Calls (WebRTC)<a class="headerlink" href="#video-calls-webrtc" title="Link to this heading"></a></h3>
<p>VoIPBIN supports video via WebRTC:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Video</span> <span class="n">Codec</span> <span class="n">Support</span><span class="p">:</span>

<span class="o">+--------+------------+-----------------+</span>
<span class="o">|</span> <span class="n">Codec</span>  <span class="o">|</span> <span class="n">Resolution</span> <span class="o">|</span> <span class="n">Use</span> <span class="n">Case</span>        <span class="o">|</span>
<span class="o">+--------+------------+-----------------+</span>
<span class="o">|</span> <span class="n">VP8</span>    <span class="o">|</span> <span class="n">Up</span> <span class="n">to</span> <span class="mi">720</span><span class="n">p</span> <span class="o">|</span> <span class="n">Default</span> <span class="n">WebRTC</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">VP9</span>    <span class="o">|</span> <span class="n">Up</span> <span class="n">to</span> <span class="mi">1080</span><span class="n">p</span><span class="o">|</span> <span class="n">Higher</span> <span class="n">quality</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">H</span><span class="mf">.264</span>  <span class="o">|</span> <span class="n">Up</span> <span class="n">to</span> <span class="mi">1080</span><span class="n">p</span><span class="o">|</span> <span class="n">Hardware</span> <span class="n">accel</span>  <span class="o">|</span>
<span class="o">+--------+------------+-----------------+</span>

<span class="n">Video</span> <span class="n">Constraints</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Max</span> <span class="n">resolution</span><span class="p">:</span> <span class="mi">1280</span><span class="n">x720</span> <span class="p">(</span><span class="mi">720</span><span class="n">p</span><span class="p">)</span>          <span class="o">|</span>
<span class="o">|</span> <span class="n">Max</span> <span class="n">framerate</span><span class="p">:</span> <span class="mi">30</span> <span class="n">fps</span>                    <span class="o">|</span>
<span class="o">|</span> <span class="n">Max</span> <span class="n">bitrate</span><span class="p">:</span> <span class="mi">2</span> <span class="n">Mbps</span>                      <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
<p><strong>Video Conferencing:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Video</span> <span class="n">Conference</span> <span class="n">Layout</span><span class="p">:</span>

<span class="mi">2</span> <span class="n">Participants</span><span class="p">:</span>
<span class="o">+-------------+-------------+</span>
<span class="o">|</span>             <span class="o">|</span>             <span class="o">|</span>
<span class="o">|</span>     <span class="n">A</span>       <span class="o">|</span>      <span class="n">B</span>      <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span>             <span class="o">|</span>
<span class="o">+-------------+-------------+</span>

<span class="mi">4</span> <span class="n">Participants</span><span class="p">:</span>
<span class="o">+------+------+------+------+</span>
<span class="o">|</span>  <span class="n">A</span>   <span class="o">|</span>  <span class="n">B</span>   <span class="o">|</span>  <span class="n">C</span>   <span class="o">|</span>  <span class="n">D</span>   <span class="o">|</span>
<span class="o">+------+------+------+------+</span>

<span class="n">Active</span> <span class="n">Speaker</span><span class="p">:</span>
<span class="o">+---------------------------+</span>
<span class="o">|</span>                           <span class="o">|</span>
<span class="o">|</span>     <span class="n">Active</span> <span class="n">Speaker</span>        <span class="o">|</span>
<span class="o">|</span>                           <span class="o">|</span>
<span class="o">+-------+-------+-------+---+</span>
<span class="o">|</span> <span class="n">P1</span>    <span class="o">|</span> <span class="n">P2</span>    <span class="o">|</span> <span class="n">P3</span>    <span class="o">|</span> <span class="o">...|</span>
<span class="o">+-------+-------+-------+---+</span>
</pre></div>
</div>
</section>
<section id="bandwidth-requirements">
<h3>Bandwidth Requirements<a class="headerlink" href="#bandwidth-requirements" title="Link to this heading"></a></h3>
<p>Plan network capacity based on call types:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Bandwidth</span> <span class="n">per</span> <span class="n">Call</span><span class="p">:</span>

<span class="n">Audio</span> <span class="n">Only</span> <span class="p">(</span><span class="n">G</span><span class="mf">.711</span><span class="p">):</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">RTP</span> <span class="n">payload</span><span class="p">:</span> <span class="mi">64</span> <span class="n">kbps</span>                     <span class="o">|</span>
<span class="o">|</span> <span class="o">+</span> <span class="n">Headers</span><span class="p">:</span> <span class="o">~</span><span class="mi">15</span> <span class="n">kbps</span>                      <span class="o">|</span>
<span class="o">|</span> <span class="o">=</span> <span class="n">Total</span><span class="p">:</span> <span class="o">~</span><span class="mi">80</span> <span class="n">kbps</span> <span class="n">per</span> <span class="n">direction</span>          <span class="o">|</span>
<span class="o">|</span> <span class="n">Bidirectional</span><span class="p">:</span> <span class="o">~</span><span class="mi">160</span> <span class="n">kbps</span> <span class="n">per</span> <span class="n">call</span>        <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">Audio</span> <span class="n">Only</span> <span class="p">(</span><span class="n">Opus</span><span class="p">):</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Adaptive</span><span class="p">:</span> <span class="mi">6</span><span class="o">-</span><span class="mi">128</span> <span class="n">kbps</span>                     <span class="o">|</span>
<span class="o">|</span> <span class="n">Typical</span><span class="p">:</span> <span class="mi">24</span><span class="o">-</span><span class="mi">32</span> <span class="n">kbps</span>                      <span class="o">|</span>
<span class="o">|</span> <span class="o">+</span> <span class="n">Headers</span><span class="p">:</span> <span class="o">~</span><span class="mi">15</span> <span class="n">kbps</span>                      <span class="o">|</span>
<span class="o">|</span> <span class="n">Bidirectional</span><span class="p">:</span> <span class="o">~</span><span class="mi">100</span> <span class="n">kbps</span> <span class="n">per</span> <span class="n">call</span>        <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">Video</span> <span class="p">(</span><span class="mi">720</span><span class="n">p</span><span class="p">):</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Video</span><span class="p">:</span> <span class="mi">1</span><span class="o">-</span><span class="mi">2</span> <span class="n">Mbps</span>                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Audio</span><span class="p">:</span> <span class="o">~</span><span class="mi">100</span> <span class="n">kbps</span> <span class="p">(</span><span class="n">Opus</span><span class="p">)</span>                  <span class="o">|</span>
<span class="o">|</span> <span class="n">Bidirectional</span><span class="p">:</span> <span class="o">~</span><span class="mi">4</span> <span class="n">Mbps</span> <span class="n">per</span> <span class="n">call</span>          <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
<p><strong>Capacity Planning:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Example: 100 Concurrent Calls

Audio Only (G.711):
+------------------------------------------+
| 100 calls × 160 kbps = 16 Mbps           |
| Recommended: 20 Mbps (headroom)          |
+------------------------------------------+

Audio Only (Opus):
+------------------------------------------+
| 100 calls × 100 kbps = 10 Mbps           |
| Recommended: 15 Mbps (headroom)          |
+------------------------------------------+

Video (720p):
+------------------------------------------+
| 100 calls × 4 Mbps = 400 Mbps            |
| Recommended: 500 Mbps (headroom)         |
+------------------------------------------+
</pre></div>
</div>
</section>
<section id="quality-monitoring">
<h3>Quality Monitoring<a class="headerlink" href="#quality-monitoring" title="Link to this heading"></a></h3>
<p>Monitor call quality with metrics:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Available</span> <span class="n">Metrics</span> <span class="p">(</span><span class="n">via</span> <span class="n">API</span><span class="o">/</span><span class="n">Webhooks</span><span class="p">):</span>

<span class="n">Call</span> <span class="n">Level</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">duration</span>         <span class="o">-</span> <span class="n">Total</span> <span class="n">call</span> <span class="n">time</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">ringing_duration</span> <span class="o">-</span> <span class="n">Time</span> <span class="n">ringing</span>          <span class="o">|</span>
<span class="o">|</span> <span class="n">talk_duration</span>    <span class="o">-</span> <span class="n">Connected</span> <span class="n">time</span>        <span class="o">|</span>
<span class="o">|</span> <span class="n">hangup_reason</span>    <span class="o">-</span> <span class="n">Why</span> <span class="n">call</span> <span class="n">ended</span>        <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">Media</span> <span class="n">Level</span> <span class="p">(</span><span class="n">when</span> <span class="n">available</span><span class="p">):</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">jitter</span>           <span class="o">-</span> <span class="n">Packet</span> <span class="n">timing</span> <span class="n">variance</span><span class="o">|</span>
<span class="o">|</span> <span class="n">packet_loss</span>      <span class="o">-</span> <span class="o">%</span> <span class="n">packets</span> <span class="n">lost</span>        <span class="o">|</span>
<span class="o">|</span> <span class="n">rtt</span>              <span class="o">-</span> <span class="n">Round</span><span class="o">-</span><span class="n">trip</span> <span class="n">time</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">mos</span>              <span class="o">-</span> <span class="n">Mean</span> <span class="n">Opinion</span> <span class="n">Score</span>    <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">MOS</span> <span class="n">Score</span> <span class="n">Reference</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="mf">4.3</span><span class="o">-</span><span class="mf">5.0</span><span class="p">:</span> <span class="n">Excellent</span> <span class="p">(</span><span class="n">HD</span> <span class="n">quality</span><span class="p">)</span>          <span class="o">|</span>
<span class="o">|</span> <span class="mf">4.0</span><span class="o">-</span><span class="mf">4.3</span><span class="p">:</span> <span class="n">Good</span> <span class="p">(</span><span class="n">toll</span> <span class="n">quality</span><span class="p">)</span>             <span class="o">|</span>
<span class="o">|</span> <span class="mf">3.6</span><span class="o">-</span><span class="mf">4.0</span><span class="p">:</span> <span class="n">Fair</span> <span class="p">(</span><span class="n">acceptable</span><span class="p">)</span>               <span class="o">|</span>
<span class="o">|</span> <span class="mf">3.1</span><span class="o">-</span><span class="mf">3.6</span><span class="p">:</span> <span class="n">Poor</span> <span class="p">(</span><span class="n">degraded</span><span class="p">)</span>                 <span class="o">|</span>
<span class="o">|</span> <span class="o">&lt;</span> <span class="mf">3.1</span><span class="p">:</span>   <span class="n">Bad</span> <span class="p">(</span><span class="n">unacceptable</span><span class="p">)</span>              <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
</section>
</section>
<section id="call-troubleshooting">
<span id="id4"></span><h2>Call Troubleshooting<a class="headerlink" href="#call-troubleshooting" title="Link to this heading"></a></h2>
<p>This guide helps you diagnose and resolve common call issues. Each problem includes symptoms, causes, and solutions.</p>
<section id="debugging-tools">
<h3>Debugging Tools<a class="headerlink" href="#debugging-tools" title="Link to this heading"></a></h3>
<p>Before troubleshooting, understand the tools available:</p>
<p><strong>API Endpoints for Debugging:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Get</span> <span class="n">call</span> <span class="n">details</span><span class="p">:</span>
<span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span><span class="o">/</span><span class="p">{</span><span class="n">call</span><span class="o">-</span><span class="nb">id</span><span class="p">}</span>

<span class="n">Get</span> <span class="n">call</span> <span class="n">events</span> <span class="p">(</span><span class="n">webhooks</span> <span class="n">sent</span><span class="p">):</span>
<span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span><span class="o">/</span><span class="p">{</span><span class="n">call</span><span class="o">-</span><span class="nb">id</span><span class="p">}</span><span class="o">/</span><span class="n">events</span>

<span class="n">Get</span> <span class="n">activeflow</span> <span class="n">status</span><span class="p">:</span>
<span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">activeflows</span><span class="o">/</span><span class="p">{</span><span class="n">activeflow</span><span class="o">-</span><span class="nb">id</span><span class="p">}</span>

<span class="n">Get</span> <span class="n">recordings</span><span class="p">:</span>
<span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span><span class="o">/</span><span class="p">{</span><span class="n">call</span><span class="o">-</span><span class="nb">id</span><span class="p">}</span><span class="o">/</span><span class="n">recordings</span>

<span class="n">Get</span> <span class="n">transcripts</span><span class="p">:</span>
<span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span><span class="o">/</span><span class="p">{</span><span class="n">call</span><span class="o">-</span><span class="nb">id</span><span class="p">}</span><span class="o">/</span><span class="n">transcripts</span>
</pre></div>
</div>
<p><strong>WebSocket for Real-time Monitoring:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Connect:
wss://api.voipbin.net/v1.0/ws?token=&lt;token&gt;

Subscribe to all call events:
{
    &quot;type&quot;: &quot;subscribe&quot;,
    &quot;topics&quot;: [&quot;customer_id:&lt;your-id&gt;:call:*&quot;]
}

Events you&#39;ll receive:
- call_created
- call_ringing
- call_answered (progressing)
- call_hungup
- call_recording_started
- call_transcribing
</pre></div>
</div>
</section>
<section id="call-never-connects">
<h3>Call Never Connects<a class="headerlink" href="#call-never-connects" title="Link to this heading"></a></h3>
<p><strong>Symptoms:</strong></p>
<ul class="simple">
<li><p>Call status goes directly from “dialing” to “hangup”</p></li>
<li><p>hangup_reason is “failed”</p></li>
<li><p>No ringing ever occurred</p></li>
</ul>
<p><strong>Common Causes and Solutions:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Cause</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Invalid</span> <span class="n">Phone</span> <span class="n">Number</span> <span class="n">Format</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Problem</span><span class="p">:</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="s2">&quot;+1 555-123-4567&quot;</span> <span class="p">(</span><span class="n">has</span> <span class="n">spaces</span><span class="o">/</span><span class="n">dashes</span><span class="p">)</span>    <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Solution</span><span class="p">:</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="s2">&quot;+15551234567&quot;</span> <span class="p">(</span><span class="n">E</span><span class="mf">.164</span> <span class="nb">format</span><span class="p">)</span>            <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">Cause</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Number</span> <span class="n">Not</span> <span class="n">Provisioned</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Problem</span><span class="p">:</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">Source</span> <span class="n">number</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">your</span> <span class="n">account</span>        <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Solution</span><span class="p">:</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">numbers</span> <span class="n">to</span> <span class="n">verify</span> <span class="n">ownership</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">Purchase</span> <span class="n">number</span> <span class="k">if</span> <span class="n">needed</span>                <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">Cause</span> <span class="mi">3</span><span class="p">:</span> <span class="n">Insufficient</span> <span class="n">Balance</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Problem</span><span class="p">:</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">Account</span> <span class="n">balance</span> <span class="n">too</span> <span class="n">low</span> <span class="k">for</span> <span class="n">call</span>         <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Solution</span><span class="p">:</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">billing</span><span class="o">-</span><span class="n">accounts</span> <span class="n">to</span> <span class="n">check</span> <span class="n">balance</span><span class="o">|</span>
<span class="o">|</span> <span class="n">Add</span> <span class="n">funds</span> <span class="n">to</span> <span class="n">account</span>                     <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">Cause</span> <span class="mi">4</span><span class="p">:</span> <span class="n">Carrier</span> <span class="n">Rejection</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Problem</span><span class="p">:</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">Destination</span> <span class="n">carrier</span> <span class="n">rejected</span> <span class="n">the</span> <span class="n">call</span>    <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Indicators</span><span class="p">:</span>                              <span class="o">|</span>
<span class="o">|</span> <span class="o">-</span> <span class="n">Works</span> <span class="n">to</span> <span class="n">some</span> <span class="n">numbers</span><span class="p">,</span> <span class="ow">not</span> <span class="n">others</span>      <span class="o">|</span>
<span class="o">|</span> <span class="o">-</span> <span class="n">Specific</span> <span class="n">area</span> <span class="n">codes</span> <span class="n">fail</span>               <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Solution</span><span class="p">:</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">Contact</span> <span class="n">support</span> <span class="k">with</span> <span class="n">call</span> <span class="n">details</span>        <span class="o">|</span>
<span class="o">|</span> <span class="n">Try</span> <span class="n">alternate</span> <span class="n">routes</span> <span class="k">if</span> <span class="n">available</span>        <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
<p><strong>Diagnostic Steps:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span> <span class="n">Check</span> <span class="n">call</span> <span class="n">details</span><span class="p">:</span>
   <span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span><span class="o">/</span><span class="p">{</span><span class="n">call</span><span class="o">-</span><span class="nb">id</span><span class="p">}</span>

   <span class="n">Look</span> <span class="k">for</span><span class="p">:</span>
   <span class="p">{</span>
     <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;hangup&quot;</span><span class="p">,</span>
     <span class="s2">&quot;hangup_reason&quot;</span><span class="p">:</span> <span class="s2">&quot;failed&quot;</span><span class="p">,</span>  <span class="o">&lt;-</span> <span class="n">Indicates</span> <span class="n">network</span><span class="o">/</span><span class="n">routing</span> <span class="n">issue</span>
     <span class="s2">&quot;hangup_by&quot;</span><span class="p">:</span> <span class="s2">&quot;remote&quot;</span><span class="p">,</span>
     <span class="s2">&quot;tm_ringing&quot;</span><span class="p">:</span> <span class="s2">&quot;9999-01-01...&quot;</span>  <span class="o">&lt;-</span> <span class="n">Never</span> <span class="n">rang</span>
   <span class="p">}</span>

<span class="mf">2.</span> <span class="n">Verify</span> <span class="n">number</span> <span class="nb">format</span><span class="p">:</span>
   <span class="n">Source</span><span class="p">:</span> <span class="n">Must</span> <span class="n">be</span> <span class="o">+</span><span class="n">E</span><span class="mf">.164</span> <span class="p">(</span><span class="n">your</span> <span class="n">VoIPBIN</span> <span class="n">number</span><span class="p">)</span>
   <span class="n">Destination</span><span class="p">:</span> <span class="n">Must</span> <span class="n">be</span> <span class="o">+</span><span class="n">E</span><span class="mf">.164</span> <span class="ow">or</span> <span class="n">valid</span> <span class="n">extension</span>

<span class="mf">3.</span> <span class="n">Check</span> <span class="n">account</span> <span class="n">status</span><span class="p">:</span>
   <span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">billing</span><span class="o">-</span><span class="n">accounts</span>
   <span class="n">Verify</span><span class="p">:</span> <span class="n">balance</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;active&quot;</span>
</pre></div>
</div>
</section>
<section id="call-rings-but-no-answer">
<h3>Call Rings But No Answer<a class="headerlink" href="#call-rings-but-no-answer" title="Link to this heading"></a></h3>
<p><strong>Symptoms:</strong></p>
<ul class="simple">
<li><p>Call reaches “ringing” status</p></li>
<li><p>hangup_reason is “noanswer” or “dialout”</p></li>
</ul>
<p><strong>Understanding the Difference:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;noanswer&quot;</span> <span class="n">vs</span> <span class="s2">&quot;dialout&quot;</span><span class="p">:</span>

<span class="n">noanswer</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">The</span> <span class="n">destination</span> <span class="n">phone</span> <span class="n">rang</span> <span class="n">until</span> <span class="n">the</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">destination</span><span class="s1">&#39;s voicemail or timeout       |</span>
<span class="o">|</span> <span class="n">kicked</span> <span class="ow">in</span><span class="o">.</span>                               <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Duration</span><span class="p">:</span> <span class="n">Typically</span> <span class="mi">30</span><span class="o">-</span><span class="mi">60</span> <span class="n">seconds</span>        <span class="o">|</span>
<span class="o">|</span> <span class="n">Cause</span><span class="p">:</span> <span class="n">Nobody</span> <span class="n">picked</span> <span class="n">up</span>                  <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">dialout</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">VoIPBIN</span><span class="s1">&#39;s dial timeout expired before    |</span>
<span class="o">|</span> <span class="n">the</span> <span class="n">call</span> <span class="n">was</span> <span class="n">answered</span><span class="o">.</span>                   <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Duration</span><span class="p">:</span> <span class="n">Your</span> <span class="n">configured</span> <span class="n">timeout</span>        <span class="o">|</span>
<span class="o">|</span> <span class="n">Cause</span><span class="p">:</span> <span class="n">Your</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="n">shorter</span> <span class="n">than</span>      <span class="o">|</span>
<span class="o">|</span>        <span class="n">typical</span> <span class="n">ring</span> <span class="n">time</span>                 <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
<p><strong>Solutions:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">For</span> <span class="s2">&quot;noanswer&quot;</span><span class="p">:</span>
<span class="o">-</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">expected</span> <span class="n">behavior</span> <span class="n">when</span> <span class="n">nobody</span> <span class="n">answers</span>
<span class="o">-</span> <span class="n">Consider</span> <span class="n">leaving</span> <span class="n">voicemail</span> <span class="p">(</span><span class="k">if</span> <span class="n">AMD</span> <span class="n">detects</span> <span class="n">machine</span><span class="p">)</span>
<span class="o">-</span> <span class="n">Implement</span> <span class="n">retry</span> <span class="n">logic</span> <span class="ow">in</span> <span class="n">your</span> <span class="n">application</span>

<span class="n">For</span> <span class="s2">&quot;dialout&quot;</span><span class="p">:</span>
<span class="o">-</span> <span class="n">Increase</span> <span class="n">dial_timeout</span> <span class="ow">in</span> <span class="n">your</span> <span class="n">call</span> <span class="n">request</span><span class="p">:</span>

  <span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span>
  <span class="p">{</span>
    <span class="s2">&quot;dial_timeout&quot;</span><span class="p">:</span> <span class="mi">45000</span><span class="p">,</span>  <span class="o">&lt;-</span> <span class="mi">45</span> <span class="n">seconds</span>
    <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>
  <span class="p">}</span>

<span class="o">-</span> <span class="n">Default</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="mi">30</span> <span class="n">seconds</span>
<span class="o">-</span> <span class="n">Recommended</span><span class="p">:</span> <span class="mi">45</span><span class="o">-</span><span class="mi">60</span> <span class="n">seconds</span> <span class="k">for</span> <span class="n">PSTN</span> <span class="n">calls</span>
</pre></div>
</div>
</section>
<section id="call-answers-but-no-audio">
<h3>Call Answers But No Audio<a class="headerlink" href="#call-answers-but-no-audio" title="Link to this heading"></a></h3>
<p><strong>Symptoms:</strong></p>
<ul class="simple">
<li><p>Call reaches “progressing” status</p></li>
<li><p>One or both parties cannot hear each other</p></li>
<li><p>Call may disconnect after silence</p></li>
</ul>
<p><strong>Common Causes:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Cause 1: NAT/Firewall Issues (WebRTC)
+------------------------------------------+
| Problem:                                 |
| ICE candidates cannot traverse NAT       |
|                                          |
| Symptoms:                                |
| - WebRTC call connects (signaling OK)    |
| - No audio in either direction           |
|                                          |
| Solution:                                |
| - Ensure TURN server is configured       |
| - Check client firewall allows UDP       |
| - Verify ICE gathering completes         |
+------------------------------------------+

Cause 2: Codec Mismatch
+------------------------------------------+
| Problem:                                 |
| Endpoints don&#39;t share a common codec     |
|                                          |
| Symptoms:                                |
| - SIP call connects                      |
| - RTP flows but audio is garbled/silent  |
|                                          |
| Solution:                                |
| VoIPBIN auto-transcodes, but check       |
| endpoint codec configuration if using    |
| SIP trunking                             |
+------------------------------------------+

Cause 3: Hold State Stuck
+------------------------------------------+
| Problem:                                 |
| Call is on hold but wasn&#39;t resumed       |
|                                          |
| Symptoms:                                |
| - Call was working, then went silent     |
| - One party can hear, other cannot       |
|                                          |
| Solution:                                |
| Check mute/hold status:                  |
| GET /v1/calls/{call-id}                  |
| {                                        |
|   &quot;mute_direction&quot;: &quot;both&quot;,  &lt;- Problem! |
|   &quot;hold&quot;: true               &lt;- Problem! |
| }                                        |
|                                          |
| Resume:                                  |
| POST /v1/calls/{call-id}/resume          |
| POST /v1/calls/{call-id}/unmute          |
+------------------------------------------+
</pre></div>
</div>
<p><strong>Debug Audio Path:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Audio</span> <span class="n">Flow</span> <span class="n">Check</span><span class="p">:</span>

<span class="mf">1.</span> <span class="n">Verify</span> <span class="n">call</span> <span class="n">status</span><span class="p">:</span>
   <span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span><span class="o">/</span><span class="p">{</span><span class="n">call</span><span class="o">-</span><span class="nb">id</span><span class="p">}</span>
   <span class="n">Confirm</span><span class="p">:</span> <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;progressing&quot;</span>

<span class="mf">2.</span> <span class="n">Check</span> <span class="n">media</span> <span class="n">status</span><span class="p">:</span>
   <span class="n">Look</span> <span class="k">for</span><span class="p">:</span>
   <span class="o">-</span> <span class="n">hold</span><span class="p">:</span> <span class="n">false</span>
   <span class="o">-</span> <span class="n">mute_direction</span><span class="p">:</span> <span class="s2">&quot;&quot;</span> <span class="p">(</span><span class="n">empty</span> <span class="o">=</span> <span class="n">unmuted</span><span class="p">)</span>

<span class="mf">3.</span> <span class="n">For</span> <span class="n">SIP</span> <span class="n">calls</span><span class="p">,</span> <span class="n">check</span> <span class="n">RTP</span><span class="p">:</span>
   <span class="o">-</span> <span class="n">Verify</span> <span class="n">RTPEngine</span> <span class="ow">is</span> <span class="n">receiving</span> <span class="n">packets</span>
   <span class="o">-</span> <span class="n">Check</span> <span class="k">for</span> <span class="n">one</span><span class="o">-</span><span class="n">way</span> <span class="n">audio</span> <span class="p">(</span><span class="n">NAT</span> <span class="n">issue</span><span class="p">)</span>

<span class="mf">4.</span> <span class="n">For</span> <span class="n">WebRTC</span> <span class="n">calls</span><span class="p">:</span>
   <span class="o">-</span> <span class="n">Check</span> <span class="n">browser</span> <span class="n">console</span> <span class="k">for</span> <span class="n">ICE</span> <span class="n">errors</span>
   <span class="o">-</span> <span class="n">Verify</span> <span class="n">DTLS</span> <span class="n">handshake</span> <span class="n">completed</span>
   <span class="o">-</span> <span class="n">Test</span> <span class="k">with</span> <span class="n">different</span> <span class="n">network</span>
</pre></div>
</div>
</section>
<section id="flow-actions-not-executing">
<h3>Flow Actions Not Executing<a class="headerlink" href="#flow-actions-not-executing" title="Link to this heading"></a></h3>
<p><strong>Symptoms:</strong></p>
<ul class="simple">
<li><p>Call answers but expected TTS/media doesn’t play</p></li>
<li><p>Actions seem to be skipped</p></li>
</ul>
<p><strong>Common Causes:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Cause 1: early_execution Timing
+------------------------------------------+
| Problem:                                 |
| Actions execute before call answers      |
|                                          |
| With early_execution: true               |
| - Actions start on INVITE                |
| - Call may not be ready for audio        |
|                                          |
| Solution:                                |
| Set early_execution: false (default)     |
| Actions start after 200 OK (answered)    |
+------------------------------------------+

Cause 2: Action Errors
+------------------------------------------+
| Problem:                                 |
| An action fails and flow stops           |
|                                          |
| Check activeflow:                        |
| GET /v1/activeflows/{flow-id}            |
| {                                        |
|   &quot;current_action&quot;: {                    |
|     &quot;type&quot;: &quot;talk&quot;,                      |
|     &quot;error&quot;: &quot;TTS service unavailable&quot;   |
|   }                                      |
| }                                        |
|                                          |
| Solution:                                |
| Check error message                      |
| Verify action configuration              |
+------------------------------------------+

Cause 3: Missing Action IDs for Branching
+------------------------------------------+
| Problem:                                 |
| Branch targets action that doesn&#39;t exist |
|                                          |
| Example:                                 |
| {                                        |
|   &quot;type&quot;: &quot;branch&quot;,                      |
|   &quot;option&quot;: {                            |
|     &quot;target_ids&quot;: {                      |
|       &quot;1&quot;: &quot;nonexistent-id&quot;  &lt;- Error!   |
|     }                                    |
|   }                                      |
| }                                        |
|                                          |
| Solution:                                |
| Verify all target_ids match action IDs   |
+------------------------------------------+
</pre></div>
</div>
</section>
<section id="webhooks-not-received">
<h3>Webhooks Not Received<a class="headerlink" href="#webhooks-not-received" title="Link to this heading"></a></h3>
<p><strong>Symptoms:</strong></p>
<ul class="simple">
<li><p>No webhooks arrive at your endpoint</p></li>
<li><p>Some webhooks arrive, others don’t</p></li>
</ul>
<p><strong>Diagnostic Steps:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span> <span class="n">Verify</span> <span class="n">webhook</span> <span class="n">configuration</span><span class="p">:</span>
   <span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">webhooks</span>
   <span class="p">{</span>
     <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://your-server.com/webhook&quot;</span><span class="p">,</span>
     <span class="s2">&quot;events&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;call_hungup&quot;</span><span class="p">,</span> <span class="s2">&quot;call_answered&quot;</span><span class="p">],</span>
     <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span>
   <span class="p">}</span>

<span class="mf">2.</span> <span class="n">Check</span> <span class="n">webhook</span> <span class="n">delivery</span> <span class="n">history</span><span class="p">:</span>
   <span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">webhooks</span><span class="o">/</span><span class="p">{</span><span class="n">webhook</span><span class="o">-</span><span class="nb">id</span><span class="p">}</span><span class="o">/</span><span class="n">deliveries</span>
   <span class="p">{</span>
     <span class="s2">&quot;deliveries&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="p">{</span>
         <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;delivery-uuid&quot;</span><span class="p">,</span>
         <span class="s2">&quot;event_type&quot;</span><span class="p">:</span> <span class="s2">&quot;call_hungup&quot;</span><span class="p">,</span>
         <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;failed&quot;</span><span class="p">,</span>
         <span class="s2">&quot;http_code&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
         <span class="s2">&quot;attempts&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
         <span class="s2">&quot;last_attempt&quot;</span><span class="p">:</span> <span class="s2">&quot;2026-01-20T12:00:00Z&quot;</span><span class="p">,</span>
         <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Connection timeout&quot;</span>
       <span class="p">}</span>
     <span class="p">]</span>
   <span class="p">}</span>

<span class="mf">3.</span> <span class="n">Common</span> <span class="n">issues</span><span class="p">:</span>

   <span class="n">Endpoint</span> <span class="ow">not</span> <span class="n">accessible</span><span class="p">:</span>
   <span class="o">+------------------------------------------+</span>
   <span class="o">|</span> <span class="o">-</span> <span class="n">Server</span> <span class="n">firewall</span> <span class="n">blocks</span> <span class="n">VoIPBIN</span> <span class="n">IPs</span>    <span class="o">|</span>
   <span class="o">|</span> <span class="o">-</span> <span class="n">HTTPS</span> <span class="n">certificate</span> <span class="n">invalid</span>             <span class="o">|</span>
   <span class="o">|</span> <span class="o">-</span> <span class="n">Endpoint</span> <span class="n">returns</span> <span class="mi">4</span><span class="n">xx</span><span class="o">/</span><span class="mi">5</span><span class="n">xx</span> <span class="n">errors</span>       <span class="o">|</span>
   <span class="o">|</span>                                         <span class="o">|</span>
   <span class="o">|</span> <span class="n">Solution</span><span class="p">:</span>                               <span class="o">|</span>
   <span class="o">|</span> <span class="o">-</span> <span class="n">Whitelist</span> <span class="n">VoIPBIN</span> <span class="n">IP</span> <span class="n">ranges</span>           <span class="o">|</span>
   <span class="o">|</span> <span class="o">-</span> <span class="n">Use</span> <span class="n">valid</span> <span class="n">SSL</span> <span class="n">certificate</span>             <span class="o">|</span>
   <span class="o">|</span> <span class="o">-</span> <span class="n">Ensure</span> <span class="n">endpoint</span> <span class="n">returns</span> <span class="mi">200</span> <span class="n">OK</span>        <span class="o">|</span>
   <span class="o">+------------------------------------------+</span>

   <span class="n">Endpoint</span> <span class="n">too</span> <span class="n">slow</span><span class="p">:</span>
   <span class="o">+------------------------------------------+</span>
   <span class="o">|</span> <span class="o">-</span> <span class="n">Webhook</span> <span class="n">times</span> <span class="n">out</span> <span class="p">(</span><span class="o">&gt;</span> <span class="mi">5</span> <span class="n">seconds</span><span class="p">)</span>       <span class="o">|</span>
   <span class="o">|</span> <span class="o">-</span> <span class="n">VoIPBIN</span> <span class="n">retries</span><span class="p">,</span> <span class="n">causing</span> <span class="n">duplicates</span>   <span class="o">|</span>
   <span class="o">|</span>                                         <span class="o">|</span>
   <span class="o">|</span> <span class="n">Solution</span><span class="p">:</span>                               <span class="o">|</span>
   <span class="o">|</span> <span class="o">-</span> <span class="n">Return</span> <span class="mi">200</span> <span class="n">immediately</span>                <span class="o">|</span>
   <span class="o">|</span> <span class="o">-</span> <span class="n">Process</span> <span class="n">webhook</span> <span class="n">asynchronously</span>        <span class="o">|</span>
   <span class="o">+------------------------------------------+</span>

   <span class="n">Wrong</span> <span class="n">event</span> <span class="n">subscription</span><span class="p">:</span>
   <span class="o">+------------------------------------------+</span>
   <span class="o">|</span> <span class="o">-</span> <span class="n">Subscribed</span> <span class="n">to</span> <span class="s2">&quot;call_created&quot;</span> <span class="n">but</span>      <span class="o">|</span>
   <span class="o">|</span>   <span class="n">expecting</span> <span class="s2">&quot;call_hungup&quot;</span>               <span class="o">|</span>
   <span class="o">|</span>                                         <span class="o">|</span>
   <span class="o">|</span> <span class="n">Solution</span><span class="p">:</span>                               <span class="o">|</span>
   <span class="o">|</span> <span class="n">Update</span> <span class="n">webhook</span> <span class="n">events</span><span class="p">:</span>                  <span class="o">|</span>
   <span class="o">|</span> <span class="n">PUT</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">webhooks</span><span class="o">/</span><span class="p">{</span><span class="nb">id</span><span class="p">}</span>                   <span class="o">|</span>
   <span class="o">|</span> <span class="p">{</span><span class="s2">&quot;events&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;call_hungup&quot;</span><span class="p">]}</span>             <span class="o">|</span>
   <span class="o">+------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="recording-issues">
<h3>Recording Issues<a class="headerlink" href="#recording-issues" title="Link to this heading"></a></h3>
<p><strong>Symptoms:</strong></p>
<ul class="simple">
<li><p>Recording not found</p></li>
<li><p>Recording is empty or truncated</p></li>
<li><p>Recording URL doesn’t work</p></li>
</ul>
<p><strong>Troubleshooting:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Recording Not Created:
+------------------------------------------+
| Check if recording was started:          |
|                                          |
| GET /v1/calls/{call-id}                  |
| {                                        |
|   &quot;recording_ids&quot;: []  &lt;- Empty!         |
| }                                        |
|                                          |
| Causes:                                  |
| - record_start action not in flow        |
| - Call hung up before recording started  |
| - Error in recording action              |
|                                          |
| Solution:                                |
| Verify flow has record_start action      |
| Check activeflow for errors              |
+------------------------------------------+

Recording Empty:
+------------------------------------------+
| Recording exists but duration is 0       |
|                                          |
| Causes:                                  |
| - Recording started after call ended     |
| - Audio not flowing during recording     |
|                                          |
| Solution:                                |
| Place record_start early in flow         |
| Verify call had audio (not on mute)      |
+------------------------------------------+

Recording URL Expired:
+------------------------------------------+
| GET /v1/recordings/{id} returns URL      |
| but download fails with 403              |
|                                          |
| Cause:                                   |
| Signed URLs expire after 1 hour          |
|                                          |
| Solution:                                |
| Fetch fresh URL from API                 |
| Download immediately after getting URL   |
+------------------------------------------+
</pre></div>
</div>
</section>
<section id="transfer-problems">
<h3>Transfer Problems<a class="headerlink" href="#transfer-problems" title="Link to this heading"></a></h3>
<p><strong>Symptoms:</strong></p>
<ul class="simple">
<li><p>Transfer fails</p></li>
<li><p>Caller dropped during transfer</p></li>
<li><p>Consult call doesn’t connect</p></li>
</ul>
<p><strong>Common Issues:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Blind</span> <span class="n">Transfer</span> <span class="n">Fails</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Caller</span> <span class="n">disconnected</span> <span class="n">during</span> <span class="n">transfer</span>      <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Causes</span><span class="p">:</span>                                  <span class="o">|</span>
<span class="o">|</span> <span class="o">-</span> <span class="n">Transfer</span> <span class="n">destination</span> <span class="n">busy</span><span class="o">/</span><span class="n">unavailable</span>  <span class="o">|</span>
<span class="o">|</span> <span class="o">-</span> <span class="n">No</span> <span class="n">failover</span> <span class="n">configured</span>                 <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Solution</span><span class="p">:</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">Use</span> <span class="n">attended</span> <span class="n">transfer</span> <span class="k">for</span> <span class="n">important</span> <span class="n">calls</span><span class="o">|</span>
<span class="o">|</span> <span class="n">Configure</span> <span class="n">fallback</span> <span class="n">action</span> <span class="n">on</span> <span class="n">failure</span>     <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">Attended</span> <span class="n">Transfer</span> <span class="o">-</span> <span class="n">Consult</span> <span class="n">Fails</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Agent</span> <span class="n">A</span> <span class="n">can</span><span class="s1">&#39;t reach Agent B              |</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Check</span> <span class="n">transfer</span> <span class="n">status</span><span class="p">:</span>                   <span class="o">|</span>
<span class="o">|</span> <span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">transfers</span><span class="o">/</span><span class="p">{</span><span class="n">transfer</span><span class="o">-</span><span class="nb">id</span><span class="p">}</span>          <span class="o">|</span>
<span class="o">|</span> <span class="p">{</span>                                        <span class="o">|</span>
<span class="o">|</span>   <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;consulting&quot;</span><span class="p">,</span>                <span class="o">|</span>
<span class="o">|</span>   <span class="s2">&quot;consult_call&quot;</span><span class="p">:</span> <span class="p">{</span>                      <span class="o">|</span>
<span class="o">|</span>     <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;hangup&quot;</span><span class="p">,</span>                  <span class="o">|</span>
<span class="o">|</span>     <span class="s2">&quot;hangup_reason&quot;</span><span class="p">:</span> <span class="s2">&quot;noanswer&quot;</span>          <span class="o">|</span>
<span class="o">|</span>   <span class="p">}</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="p">}</span>                                        <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Solution</span><span class="p">:</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">Cancel</span> <span class="n">transfer</span> <span class="ow">and</span> <span class="k">try</span> <span class="n">different</span> <span class="n">agent</span><span class="p">:</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">transfers</span><span class="o">/</span><span class="p">{</span><span class="nb">id</span><span class="p">}</span><span class="o">/</span><span class="n">cancel</span>           <span class="o">|</span>
<span class="o">+------------------------------------------+</span>

<span class="n">Caller</span> <span class="n">Hears</span> <span class="n">Dead</span> <span class="n">Air</span> <span class="n">During</span> <span class="n">Transfer</span><span class="p">:</span>
<span class="o">+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Hold</span> <span class="n">music</span> <span class="ow">not</span> <span class="n">playing</span>                   <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Causes</span><span class="p">:</span>                                  <span class="o">|</span>
<span class="o">|</span> <span class="o">-</span> <span class="n">MOH</span> <span class="ow">not</span> <span class="n">configured</span>                     <span class="o">|</span>
<span class="o">|</span> <span class="o">-</span> <span class="n">Mute</span> <span class="n">applied</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">hold</span>           <span class="o">|</span>
<span class="o">|</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">Solution</span><span class="p">:</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">Ensure</span> <span class="n">transfer</span> <span class="n">uses</span> <span class="n">proper</span> <span class="n">hold</span><span class="p">:</span>        <span class="o">|</span>
<span class="o">|</span> <span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span><span class="o">/</span><span class="p">{</span><span class="n">call</span><span class="o">-</span><span class="nb">id</span><span class="p">}</span><span class="o">/</span><span class="n">transfer</span>        <span class="o">|</span>
<span class="o">|</span> <span class="p">{</span>                                        <span class="o">|</span>
<span class="o">|</span>   <span class="s2">&quot;hold_caller&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>                   <span class="o">|</span>
<span class="o">|</span>   <span class="s2">&quot;play_moh&quot;</span><span class="p">:</span> <span class="n">true</span>                       <span class="o">|</span>
<span class="o">|</span> <span class="p">}</span>                                        <span class="o">|</span>
<span class="o">+------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="queue-problems">
<h3>Queue Problems<a class="headerlink" href="#queue-problems" title="Link to this heading"></a></h3>
<p><strong>Symptoms:</strong></p>
<ul class="simple">
<li><p>Calls not distributed to agents</p></li>
<li><p>Long wait times</p></li>
<li><p>Agents not receiving calls</p></li>
</ul>
<p><strong>Troubleshooting:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>No Agents Receiving Calls:
+------------------------------------------+
| Check queue status:                      |
| GET /v1/queues/{queue-id}                |
| {                                        |
|   &quot;available_agents&quot;: 0,  &lt;- No agents!  |
|   &quot;waiting_calls&quot;: 5                     |
| }                                        |
|                                          |
| Check agent status:                      |
| GET /v1/agents?queue_id={queue-id}       |
| Verify agents have status: &quot;available&quot;   |
|                                          |
| Common causes:                           |
| - All agents in &quot;busy&quot; or &quot;offline&quot;      |
| - Agents not logged into queue           |
| - Agent status not updated after call    |
+------------------------------------------+

Calls Timing Out in Queue:
+------------------------------------------+
| Check queue configuration:               |
| {                                        |
|   &quot;timeout&quot;: 30000,  &lt;- 30 seconds only  |
|   &quot;timeout_action&quot;: &quot;hangup&quot;             |
| }                                        |
|                                          |
| Solution:                                |
| - Increase timeout                       |
| - Add fallback action (voicemail, etc.)  |
|                                          |
| PUT /v1/queues/{queue-id}                |
| {                                        |
|   &quot;timeout&quot;: 300000,  &lt;- 5 minutes       |
|   &quot;timeout_flow_id&quot;: &quot;voicemail-flow&quot;    |
| }                                        |
+------------------------------------------+
</pre></div>
</div>
</section>
<section id="error-reference">
<h3>Error Reference<a class="headerlink" href="#error-reference" title="Link to this heading"></a></h3>
<p><strong>Hangup Reason Quick Reference:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+----------------+----------------------------------+------------------------+</span>
<span class="o">|</span> <span class="n">Reason</span>         <span class="o">|</span> <span class="n">Meaning</span>                          <span class="o">|</span> <span class="n">Action</span>                 <span class="o">|</span>
<span class="o">+----------------+----------------------------------+------------------------+</span>
<span class="o">|</span> <span class="n">normal</span>         <span class="o">|</span> <span class="n">Call</span> <span class="n">completed</span> <span class="n">successfully</span>      <span class="o">|</span> <span class="n">No</span> <span class="n">action</span> <span class="n">needed</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">failed</span>         <span class="o">|</span> <span class="n">Network</span><span class="o">/</span><span class="n">routing</span> <span class="n">failure</span>          <span class="o">|</span> <span class="n">Check</span> <span class="n">number</span><span class="p">,</span> <span class="n">routes</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">busy</span>           <span class="o">|</span> <span class="n">Destination</span> <span class="n">busy</span>                 <span class="o">|</span> <span class="n">Retry</span> <span class="n">later</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">noanswer</span>       <span class="o">|</span> <span class="n">No</span> <span class="n">answer</span> <span class="n">before</span> <span class="n">timeout</span>         <span class="o">|</span> <span class="n">Leave</span> <span class="n">voicemail</span>        <span class="o">|</span>
<span class="o">|</span> <span class="n">cancel</span>         <span class="o">|</span> <span class="n">Caller</span> <span class="n">cancelled</span>                 <span class="o">|</span> <span class="n">No</span> <span class="n">action</span> <span class="n">needed</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">dialout</span>        <span class="o">|</span> <span class="n">VoIPBIN</span> <span class="n">timeout</span>                  <span class="o">|</span> <span class="n">Increase</span> <span class="n">dial_timeout</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">timeout</span>        <span class="o">|</span> <span class="n">Max</span> <span class="n">call</span> <span class="n">duration</span> <span class="n">exceeded</span>       <span class="o">|</span> <span class="n">Check</span> <span class="n">timeout</span> <span class="n">settings</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">amd</span>            <span class="o">|</span> <span class="n">Answering</span> <span class="n">machine</span> <span class="n">detected</span>       <span class="o">|</span> <span class="n">Expected</span> <span class="n">behavior</span>      <span class="o">|</span>
<span class="o">+----------------+----------------------------------+------------------------+</span>
</pre></div>
</div>
<p><strong>HTTP Error Codes:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+------+----------------------------------+------------------------+</span>
<span class="o">|</span> <span class="n">Code</span> <span class="o">|</span> <span class="n">Meaning</span>                          <span class="o">|</span> <span class="n">Solution</span>               <span class="o">|</span>
<span class="o">+------+----------------------------------+------------------------+</span>
<span class="o">|</span> <span class="mi">400</span>  <span class="o">|</span> <span class="n">Invalid</span> <span class="n">request</span> <span class="nb">format</span>           <span class="o">|</span> <span class="n">Check</span> <span class="n">request</span> <span class="n">body</span>     <span class="o">|</span>
<span class="o">|</span> <span class="mi">401</span>  <span class="o">|</span> <span class="n">Authentication</span> <span class="n">failed</span>            <span class="o">|</span> <span class="n">Check</span> <span class="n">token</span><span class="o">/</span><span class="n">accesskey</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">403</span>  <span class="o">|</span> <span class="n">Permission</span> <span class="n">denied</span>                <span class="o">|</span> <span class="n">Check</span> <span class="n">account</span> <span class="n">perms</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">404</span>  <span class="o">|</span> <span class="n">Resource</span> <span class="ow">not</span> <span class="n">found</span>               <span class="o">|</span> <span class="n">Verify</span> <span class="n">ID</span> <span class="n">exists</span>       <span class="o">|</span>
<span class="o">|</span> <span class="mi">409</span>  <span class="o">|</span> <span class="n">Conflict</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">,</span> <span class="n">call</span> <span class="n">ended</span><span class="p">)</span>      <span class="o">|</span> <span class="n">Resource</span> <span class="n">state</span> <span class="n">changed</span> <span class="o">|</span>
<span class="o">|</span> <span class="mi">429</span>  <span class="o">|</span> <span class="n">Rate</span> <span class="n">limit</span> <span class="n">exceeded</span>              <span class="o">|</span> <span class="n">Slow</span> <span class="n">down</span> <span class="n">requests</span>     <span class="o">|</span>
<span class="o">|</span> <span class="mi">500</span>  <span class="o">|</span> <span class="n">Server</span> <span class="n">error</span>                     <span class="o">|</span> <span class="n">Contact</span> <span class="n">support</span>        <span class="o">|</span>
<span class="o">+------+----------------------------------+------------------------+</span>
</pre></div>
</div>
</section>
<section id="getting-help">
<h3>Getting Help<a class="headerlink" href="#getting-help" title="Link to this heading"></a></h3>
<p>If issues persist after troubleshooting, see <a class="reference internal" href="support.html#support"><span class="std std-ref">Support</span></a> for contact information and additional resources.</p>
</section>
</section>
</section>

</main>
                        <nav aria-label="Page navigation" class="py-4 my-5 clearfix font-weight-bold border-top">
    <a class="float-left" href="common.html" title="Previous">
        <span aria-hidden="true">←&nbsp;</span>Common
    </a>
    <a class="float-right" href="conference.html" title="Next">
        Conference <span aria-hidden="true">&nbsp;→</span>
    </a>
</nav>
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">Call</a><ul>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#protocol">Protocol</a></li>
<li><a class="reference internal" href="#pstn-phone-number-format">PSTN/Phone Number Format</a></li>
<li><a class="reference internal" href="#extension-number-format">Extension Number Format</a></li>
<li><a class="reference internal" href="#call-lifecycle">Call Lifecycle</a></li>
<li><a class="reference internal" href="#what-happens-at-each-stage">What Happens At Each Stage</a></li>
<li><a class="reference internal" href="#understanding-hangup-reasons">Understanding Hangup Reasons</a></li>
<li><a class="reference internal" href="#media-control-operations">Media Control Operations</a></li>
<li><a class="reference internal" href="#call-chaining">Call Chaining</a></li>
<li><a class="reference internal" href="#timestamps-explained">Timestamps Explained</a></li>
<li><a class="reference internal" href="#route-failover">Route Failover</a></li>
<li><a class="reference internal" href="#incoming-call">Incoming call</a></li>
<li><a class="reference internal" href="#execution-of-call-flow-for-incoming-call">Execution of Call Flow for incoming call</a></li>
<li><a class="reference internal" href="#outgoing-call">Outgoing call</a></li>
<li><a class="reference internal" href="#execution-of-call-flow-for-outgoing-call">Execution of Call Flow for outgoing call</a></li>
<li><a class="reference internal" href="#error-handling-and-termination">Error handling and Termination</a></li>
<li><a class="reference internal" href="#call-concept">Call concept</a><ul>
<li><a class="reference internal" href="#comparison-traditional-call-concept-vs-voipbin-call-concept">Comparison: Traditional Call Concept vs VoIPBIN Call Concept</a></li>
</ul>
</li>
<li><a class="reference internal" href="#related-documentation">Related Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#transfer">Transfer</a><ul>
<li><a class="reference internal" href="#blind-transfer">Blind Transfer</a></li>
<li><a class="reference internal" href="#attended-transfer">Attended Transfer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#groupcall">Groupcall</a><ul>
<li><a class="reference internal" href="#ringall">Ringall</a></li>
<li><a class="reference internal" href="#linear">Linear</a></li>
<li><a class="reference internal" href="#nested-groupcall">Nested groupcall</a></li>
</ul>
</li>
<li><a class="reference internal" href="#struct-call">Struct Call</a><ul>
<li><a class="reference internal" href="#call-struct-call-call">Call</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#type">Type</a></li>
<li><a class="reference internal" href="#status">Status</a></li>
<li><a class="reference internal" href="#direction">Direction</a></li>
<li><a class="reference internal" href="#hangup-by">Hangup by</a></li>
<li><a class="reference internal" href="#hangup-reason">Hangup reason</a></li>
</ul>
</li>
<li><a class="reference internal" href="#struct-groupcall">Struct Groupcall</a><ul>
<li><a class="reference internal" href="#call-struct-groupcall-groupcall">Groupcall</a><ul>
<li><a class="reference internal" href="#id3">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ring-method">Ring method</a></li>
<li><a class="reference internal" href="#answer-method">Answer method</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tutorial">Tutorial</a><ul>
<li><a class="reference internal" href="#simple-outbound-call-with-tts">Simple outbound call with TTS</a></li>
<li><a class="reference internal" href="#simple-outbound-call-with-media-file-play">Simple outbound call with media file play</a></li>
<li><a class="reference internal" href="#simple-outbound-call-with-tts-and-connect">Simple outbound call with TTS and connect</a></li>
<li><a class="reference internal" href="#simple-outbound-call-with-talk-and-digits-send">Simple outbound call with talk and digits_send</a></li>
<li><a class="reference internal" href="#simple-outbound-call-with-branch">Simple outbound call with Branch</a></li>
<li><a class="reference internal" href="#get-call-list">Get call list</a></li>
<li><a class="reference internal" href="#get-specific-call">Get specific call</a></li>
<li><a class="reference internal" href="#make-a-groupcall">Make a groupcall</a></li>
</ul>
</li>
<li><a class="reference internal" href="#internal-call-sequences">Internal Call Sequences</a><ul>
<li><a class="reference internal" href="#inbound-pstn-call-flow">Inbound PSTN Call Flow</a></li>
<li><a class="reference internal" href="#outbound-api-call-flow">Outbound API Call Flow</a></li>
<li><a class="reference internal" href="#webrtc-call-flow">WebRTC Call Flow</a></li>
<li><a class="reference internal" href="#sip-trunk-call-flow">SIP Trunk Call Flow</a></li>
<li><a class="reference internal" href="#call-recording-sequence">Call Recording Sequence</a></li>
<li><a class="reference internal" href="#ai-voice-call-sequence">AI Voice Call Sequence</a></li>
<li><a class="reference internal" href="#conference-bridge-sequence">Conference Bridge Sequence</a></li>
<li><a class="reference internal" href="#event-publication-sequence">Event Publication Sequence</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-call-scenarios">Advanced Call Scenarios</a><ul>
<li><a class="reference internal" href="#ivr-menu-with-queue-routing">IVR Menu with Queue Routing</a></li>
<li><a class="reference internal" href="#ai-assisted-customer-service">AI-Assisted Customer Service</a></li>
<li><a class="reference internal" href="#outbound-campaign-with-voicemail-detection">Outbound Campaign with Voicemail Detection</a></li>
<li><a class="reference internal" href="#click-to-call-with-recording">Click-to-Call with Recording</a></li>
<li><a class="reference internal" href="#multi-leg-conference-call">Multi-leg Conference Call</a></li>
<li><a class="reference internal" href="#call-screening-with-whisper">Call Screening with Whisper</a></li>
<li><a class="reference internal" href="#warm-transfer-with-context">Warm Transfer with Context</a></li>
<li><a class="reference internal" href="#call-with-real-time-transcription">Call with Real-time Transcription</a></li>
</ul>
</li>
<li><a class="reference internal" href="#call-media-and-codecs">Call Media and Codecs</a><ul>
<li><a class="reference internal" href="#audio-codec-support">Audio Codec Support</a></li>
<li><a class="reference internal" href="#audio-quality-factors">Audio Quality Factors</a></li>
<li><a class="reference internal" href="#rtp-and-media-transport">RTP and Media Transport</a></li>
<li><a class="reference internal" href="#media-encryption">Media Encryption</a></li>
<li><a class="reference internal" href="#dtmf-handling">DTMF Handling</a></li>
<li><a class="reference internal" href="#recording-formats">Recording Formats</a></li>
<li><a class="reference internal" href="#text-to-speech-tts">Text-to-Speech (TTS)</a></li>
<li><a class="reference internal" href="#speech-to-text-stt">Speech-to-Text (STT)</a></li>
<li><a class="reference internal" href="#video-calls-webrtc">Video Calls (WebRTC)</a></li>
<li><a class="reference internal" href="#bandwidth-requirements">Bandwidth Requirements</a></li>
<li><a class="reference internal" href="#quality-monitoring">Quality Monitoring</a></li>
</ul>
</li>
<li><a class="reference internal" href="#call-troubleshooting">Call Troubleshooting</a><ul>
<li><a class="reference internal" href="#debugging-tools">Debugging Tools</a></li>
<li><a class="reference internal" href="#call-never-connects">Call Never Connects</a></li>
<li><a class="reference internal" href="#call-rings-but-no-answer">Call Rings But No Answer</a></li>
<li><a class="reference internal" href="#call-answers-but-no-audio">Call Answers But No Audio</a></li>
<li><a class="reference internal" href="#flow-actions-not-executing">Flow Actions Not Executing</a></li>
<li><a class="reference internal" href="#webhooks-not-received">Webhooks Not Received</a></li>
<li><a class="reference internal" href="#recording-issues">Recording Issues</a></li>
<li><a class="reference internal" href="#transfer-problems">Transfer Problems</a></li>
<li><a class="reference internal" href="#queue-problems">Queue Problems</a></li>
<li><a class="reference internal" href="#error-reference">Error Reference</a></li>
<li><a class="reference internal" href="#getting-help">Getting Help</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
                <nav aria-label="Footer">
                    <ul class="nav justify-content-center mb-2">
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="http://voipbin.net">About Us</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="http://voipbin.net">Contact</a></li>
                        
                    </ul>
                </nav>
            
            <div class="text-center">
                    &copy; Copyright 2026, VoIPBIN
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a class="text-white" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.5.0
                    </a>
                    and
                    <a class="text-white" href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 9.1.0
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=fd6eb6e6"></script>
        <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="_static/dist/theme.js"></script>
        <script type="text/javascript" src="_static/dist/vendor.js"></script>
        <script type="text/javascript" src="_static/searchtools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>