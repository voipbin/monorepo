<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="./">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>Overview &mdash; voipbin  documentation</title>
    
    <link rel="stylesheet" type="text/css" href="_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="genindex.html" />
            <link rel="search" title="Search" href="search.html" />
            <link rel="top" title="voipbin  documentation" href="#" />
    </head>
<body>
    <script type="text/javascript" src="_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="intro.html"
                        title="voipbin"
                        class="logo navbar-brand"
                    >
                        <img src="_static/images/voipbin-high-resolution-logo-white-transparent.png" width="45" height="80" alt="voipbin"
                            class="logo-img"
                        />
                        VoIPBin Documentation
                    </a>
                
                
                    <div class="collapse navbar-collapse justify-content-end">
                        <ul class="navbar-nav">
                            
                                
                                
                                <li class="nav-item"><a class="nav-link"  href="http://voipbin.net">Project</a></li>
                            
                                
                                
                                <li class="nav-item"><a class="nav-link"  href="https://admin.voipbin.net">Admin</a></li>
                            
                        </ul>
                    </div>
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="accesskey.html">Accesskey</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdk.html">SDK(Software Development Kit)</a></li>
<li class="toctree-l1"><a class="reference internal" href="restful_api.html">RESTful API(Application Programming Interface)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="flow.html">Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow.html#activeflow">Activeflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="variable.html">Variable</a></li>
<li class="toctree-l1"><a class="reference internal" href="webhook.html">Webhook</a></li>
<li class="toctree-l1"><a class="reference internal" href="common.html">Common</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Voice &amp; Real-Time</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="call.html">Call</a></li>
<li class="toctree-l1"><a class="reference internal" href="conference.html">Conference</a></li>
<li class="toctree-l1"><a class="reference internal" href="queue.html">Queue</a></li>
<li class="toctree-l1"><a class="reference internal" href="recording.html">Recording</a></li>
<li class="toctree-l1"><a class="reference internal" href="transcribe.html">Transcribe</a></li>
<li class="toctree-l1"><a class="reference internal" href="mediastream.html">Mediastream</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Messaging</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="message.html">Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.html">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="talk.html">Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="conversation.html">Conversation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AI &amp; Automation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ai.html">AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="campaign.html">Campaign</a></li>
<li class="toctree-l1"><a class="reference internal" href="outdial.html">Outdial</a></li>
<li class="toctree-l1"><a class="reference internal" href="outplan.html">Outplan</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources &amp; Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="agent.html">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="customer.html">Customer</a></li>
<li class="toctree-l1"><a class="reference internal" href="billing_account.html">Billing Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="tag.html">Tag</a></li>
<li class="toctree-l1"><a class="reference internal" href="provider.html">Provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="route.html">Route</a></li>
<li class="toctree-l1"><a class="reference internal" href="extension.html">Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="trunk.html">Trunk</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Architecture (Deep Dive)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="websocket.html">Websocket</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help &amp; Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">Overview</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
    <a class="btn btn-sm btn-light text-decoration-none" href="_sources/billing_account_overview.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="overview">
<span id="billing-account-overview"></span><h1>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h1>
<p>VoIPBIN’s Billing Account API provides balance management, token allowance tracking, and usage monitoring for your account. The billing system uses a hybrid model combining monthly token allowances with credit-based overflow. The API enables you to check balances, view allowance usage, add funds, and monitor consumption.</p>
<p>With the Billing Account API you can:</p>
<ul class="simple">
<li><p>Check current account balance and token allowance</p></li>
<li><p>View monthly token usage and remaining allowance</p></li>
<li><p>Add funds to your account (admin only)</p></li>
<li><p>View rate information for different service types</p></li>
<li><p>Monitor usage and charges</p></li>
<li><p>Track billing history</p></li>
</ul>
<section id="how-billing-works">
<h2>How Billing Works<a class="headerlink" href="#how-billing-works" title="Link to this heading"></a></h2>
<p>VoIPBIN uses a hybrid billing model with two cost mechanisms: <strong>token allowances</strong> and <strong>credit balance</strong>.</p>
<p>Each plan tier includes a monthly pool of tokens that cover certain service types (virtual number calls and SMS). When tokens are exhausted, usage overflows to the credit balance. PSTN calls and number purchases are always charged to the credit balance.</p>
<p><strong>Billing Architecture</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>+-----------------------------------------------------------------------+
|                         Billing System                                |
+-----------------------------------------------------------------------+

+-------------------+     +-------------------+
|  Token Allowance  |     |  Credit Balance   |
|  (monthly pool)   |     |  (prepaid USD)    |
+--------+----------+     +--------+----------+
         |                         |
         | covers                  | covers
         v                         v
+--------+----------+     +--------+----------+--------+----------+
|                   |     |                   |                   |
v                   v     v                   v                   v
+----------+   +----------+   +----------+   +----------+   +----------+
| VN Calls |   |   SMS    |   |PSTN Calls|   | Numbers  |   |  Other   |
| 1 tok/min|   |10 tok/msg|   | per min  |   | per num  |   | services |
+----------+   +----------+   +----------+   +----------+   +----------+
     |              |              |              |              |
     | overflow     | overflow     |              |              |
     v              v              v              v              v
+---------+    +---------+    +---------+    +---------+    +---------+
|$0.0045  |    | $0.008  |    |$0.006 ot|    |  $5.00  |    |  varies |
| /minute |    | /message|    |$0.0045 in|   | /number |    |         |
+---------+    +---------+    +---------+    +---------+    +---------+
</pre></div>
</div>
<p><strong>Key Components</strong></p>
<ul class="simple">
<li><p><strong>Token Allowance</strong>: A monthly pool of tokens included with your plan tier. Tokens cover VN (virtual number) calls and SMS messages. Each billing cycle is represented by an <strong>allowance</strong> record that tracks the token allocation and consumption for that month.</p></li>
<li><p><strong>Credit Balance</strong>: Prepaid USD balance used for PSTN calls, number purchases, and overflow when tokens are exhausted.</p></li>
<li><p><strong>Token-Eligible Services</strong>: VN calls (1 token/minute) and SMS (10 tokens/message) consume tokens first, then overflow to credits.</p></li>
<li><p><strong>Credit-Only Services</strong>: PSTN calls and number purchases always use credits directly.</p></li>
<li><p><strong>Free Services</strong>: Extension-to-extension calls and direct extension calls incur no charges.</p></li>
</ul>
<p><strong>Allowance Cycle Lifecycle</strong></p>
<p>Each billing account has one active allowance cycle at a time. The cycle follows this lifecycle:</p>
<ol class="arabic simple">
<li><p><strong>Creation</strong>: A new allowance cycle is created on the 1st of each month (or when the account is first used). The <code class="docutils literal notranslate"><span class="pre">tokens_total</span></code> is set based on the account’s current plan tier.</p></li>
<li><p><strong>Consumption</strong>: As token-eligible services are used, <code class="docutils literal notranslate"><span class="pre">tokens_used</span></code> increments atomically. The system checks the allowance before each service call.</p></li>
<li><p><strong>Overflow</strong>: When <code class="docutils literal notranslate"><span class="pre">tokens_used</span></code> reaches <code class="docutils literal notranslate"><span class="pre">tokens_total</span></code>, further token-eligible usage is charged to the credit balance at the overflow rate.</p></li>
<li><p><strong>Expiry</strong>: When the cycle end date passes, the cycle becomes inactive. A new cycle is created for the next month with a fresh token allocation.</p></li>
</ol>
<p>Unused tokens do <strong>not</strong> carry over between cycles. Each month starts with the full allocation defined by the plan tier.</p>
</section>
<section id="plan-tiers">
<h2>Plan Tiers<a class="headerlink" href="#plan-tiers" title="Link to this heading"></a></h2>
<p>Each billing account is assigned a plan tier that determines both resource creation limits and monthly token allowances. New accounts default to the <strong>free</strong> tier.</p>
<p><strong>Monthly Token Allowances</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Plan</p></th>
<th class="head"><p>Free</p></th>
<th class="head"><p>Basic</p></th>
<th class="head"><p>Professional</p></th>
<th class="head"><p>Unlimited</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Tokens per month</p></td>
<td><p>1,000</p></td>
<td><p>10,000</p></td>
<td><p>100,000</p></td>
<td><p>unlimited</p></td>
</tr>
</tbody>
</table>
<p>Tokens reset at the start of each monthly billing cycle. Unused tokens do not carry over.</p>
<p><strong>Resource Limits</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Resource</p></th>
<th class="head"><p>Free</p></th>
<th class="head"><p>Basic</p></th>
<th class="head"><p>Professional</p></th>
<th class="head"><p>Unlimited</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Extensions</p></td>
<td><p>5</p></td>
<td><p>50</p></td>
<td><p>500</p></td>
<td><p>unlimited</p></td>
</tr>
<tr class="row-odd"><td><p>Agents</p></td>
<td><p>5</p></td>
<td><p>50</p></td>
<td><p>500</p></td>
<td><p>unlimited</p></td>
</tr>
<tr class="row-even"><td><p>Queues</p></td>
<td><p>2</p></td>
<td><p>10</p></td>
<td><p>100</p></td>
<td><p>unlimited</p></td>
</tr>
<tr class="row-odd"><td><p>Conferences</p></td>
<td><p>2</p></td>
<td><p>10</p></td>
<td><p>100</p></td>
<td><p>unlimited</p></td>
</tr>
<tr class="row-even"><td><p>Trunks</p></td>
<td><p>1</p></td>
<td><p>5</p></td>
<td><p>50</p></td>
<td><p>unlimited</p></td>
</tr>
<tr class="row-odd"><td><p>Virtual Numbers</p></td>
<td><p>5</p></td>
<td><p>50</p></td>
<td><p>500</p></td>
<td><p>unlimited</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>When a resource limit is reached, further creation of that resource type is denied.</p></li>
<li><p>Only platform admins can change a customer’s plan tier.</p></li>
<li><p>The current plan tier is returned in the <code class="docutils literal notranslate"><span class="pre">plan_type</span></code> field of the billing account.</p></li>
</ul>
</section>
<section id="rate-structure">
<h2>Rate Structure<a class="headerlink" href="#rate-structure" title="Link to this heading"></a></h2>
<p>VoIPBIN uses per-minute billing for calls (rounded up to the next whole minute) and per-unit billing for other services.</p>
<p><strong>Token Rates</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Service</p></th>
<th class="head"><p>Token Cost</p></th>
<th class="head"><p>Unit</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VN Calls</p></td>
<td><p>1 token</p></td>
<td><p>Per minute (ceiling-rounded)</p></td>
</tr>
<tr class="row-odd"><td><p>SMS Messages</p></td>
<td><p>10 tokens</p></td>
<td><p>Per message</p></td>
</tr>
</tbody>
</table>
<p><strong>Credit Rates (Overflow and Credit-Only)</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Service</p></th>
<th class="head"><p>Rate (USD)</p></th>
<th class="head"><p>Unit</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VN Calls (overflow)</p></td>
<td><p>$0.0045</p></td>
<td><p>Per minute (ceiling-rounded)</p></td>
</tr>
<tr class="row-odd"><td><p>PSTN Outgoing Calls</p></td>
<td><p>$0.0060</p></td>
<td><p>Per minute (ceiling-rounded)</p></td>
</tr>
<tr class="row-even"><td><p>PSTN Incoming Calls</p></td>
<td><p>$0.0045</p></td>
<td><p>Per minute (ceiling-rounded)</p></td>
</tr>
<tr class="row-odd"><td><p>SMS (overflow)</p></td>
<td><p>$0.008</p></td>
<td><p>Per message</p></td>
</tr>
<tr class="row-even"><td><p>Number Purchase</p></td>
<td><p>$5.00</p></td>
<td><p>Per number</p></td>
</tr>
<tr class="row-odd"><td><p>Number Renewal</p></td>
<td><p>$5.00</p></td>
<td><p>Per number</p></td>
</tr>
<tr class="row-even"><td><p>Extension Calls</p></td>
<td><p>Free</p></td>
<td><p>No charge</p></td>
</tr>
</tbody>
</table>
<p><strong>How Token Consumption Works</strong></p>
<p>When a token-eligible service is used (VN call or SMS):</p>
<ol class="arabic simple">
<li><p>The system checks the current month’s token allowance.</p></li>
<li><p>If tokens are available, they are consumed first.</p></li>
<li><p>If tokens are partially available, the available tokens are consumed and the remainder overflows to credits.</p></li>
<li><p>If no tokens remain, the full cost is charged to credits.</p></li>
</ol>
<p><strong>Rate Calculation Examples</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>VN Call (2 minutes 15 seconds) with tokens available:
+--------------------------------------------+
| Duration: 2 min 15 sec -&gt; 3 minutes        |
| (ceiling-rounded to next whole minute)      |
| Token cost: 3 x 1 = 3 tokens               |
| Credit cost: $0.00 (covered by tokens)      |
+--------------------------------------------+

VN Call (5 minutes) with NO tokens remaining:
+--------------------------------------------+
| Duration: 5 minutes                         |
| Token cost: 0 (exhausted)                   |
| Credit cost: 5 x $0.0045 = $0.0225         |
+--------------------------------------------+

PSTN Outgoing Call (2 minutes 30 seconds):
+--------------------------------------------+
| Duration: 2 min 30 sec -&gt; 3 minutes        |
| (ceiling-rounded to next whole minute)      |
| Credit cost: 3 x $0.0060 = $0.018          |
| (always credit-only, no token deduction)    |
+--------------------------------------------+

SMS Campaign (100 messages) with 500 tokens remaining:
+--------------------------------------------+
| Token cost per message: 10 tokens           |
| Total tokens needed: 100 x 10 = 1,000      |
| Tokens available: 500                       |
| Tokens consumed: 500 (50 messages)          |
| Overflow to credit: 50 x $0.008 = $0.40    |
+--------------------------------------------+

Number Provisioning (1 number):
+--------------------------------------------+
| Count: 1 number                            |
| Credit cost: 1 x $5.00 = $5.00             |
| (always credit-only, no token deduction)    |
+--------------------------------------------+
</pre></div>
</div>
<p>Note: Rates are subject to change. Check the API for current pricing.</p>
</section>
<section id="managing-balance">
<h2>Managing Balance<a class="headerlink" href="#managing-balance" title="Link to this heading"></a></h2>
<p>Check and manage your account balance.</p>
<p><strong>Check Balance</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X GET &#39;https://api.voipbin.net/v1.0/billing_accounts?token=&lt;token&gt;&#39;
</pre></div>
</div>
<p><strong>Response:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;billing-uuid-123&quot;</span><span class="p">,</span>
    <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="s2">&quot;customer-uuid-456&quot;</span><span class="p">,</span>
    <span class="s2">&quot;plan_type&quot;</span><span class="p">:</span> <span class="s2">&quot;free&quot;</span><span class="p">,</span>
    <span class="s2">&quot;balance&quot;</span><span class="p">:</span> <span class="mf">150.50</span><span class="p">,</span>
    <span class="s2">&quot;tm_create&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-01-01T00:00:00Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_update&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Check Current Token Allowance</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X GET &#39;https://api.voipbin.net/v1.0/billing_accounts/&lt;account-id&gt;/allowance?token=&lt;token&gt;&#39;
</pre></div>
</div>
<p><strong>Response:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;allowance-uuid-123&quot;</span><span class="p">,</span>
    <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="s2">&quot;customer-uuid-456&quot;</span><span class="p">,</span>
    <span class="s2">&quot;account_id&quot;</span><span class="p">:</span> <span class="s2">&quot;billing-uuid-123&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cycle_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-01-01T00:00:00Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cycle_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-02-01T00:00:00Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tokens_total&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="s2">&quot;tokens_used&quot;</span><span class="p">:</span> <span class="mi">350</span><span class="p">,</span>
    <span class="s2">&quot;tm_create&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-01-01T00:00:00Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_update&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">tokens_total</span> <span class="pre">-</span> <span class="pre">tokens_used</span></code> gives you the remaining tokens for the current billing cycle.</p>
<p><strong>List All Allowance Cycles</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X GET &#39;https://api.voipbin.net/v1.0/billing_accounts/&lt;account-id&gt;/allowances?token=&lt;token&gt;&#39;
</pre></div>
</div>
<p>Returns a paginated list of all allowance cycles (current and past) for the account.</p>
<p><strong>Add Balance (Admin Only)</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl -X POST &#39;https://api.voipbin.net/v1.0/billing_accounts/&lt;account-id&gt;/balance?token=&lt;token&gt;&#39; \
    --header &#39;Content-Type: application/json&#39; \
    --data &#39;{
        &quot;amount&quot;: 100.00
    }&#39;
</pre></div>
</div>
<p>Note: Balance addition is restricted to users with admin permissions for security.</p>
</section>
<section id="balance-lifecycle">
<h2>Balance Lifecycle<a class="headerlink" href="#balance-lifecycle" title="Link to this heading"></a></h2>
<p>Account balance changes through specific operations. Token allowances reset each billing cycle.</p>
<p><strong>Balance and Token Flow</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>+-------------------+     +-------------------+
| Add Balance       |     | Monthly Cycle     |
| (admin only)      |     | (automatic)       |
+--------+----------+     +--------+----------+
         |                         |
         v                         v
+-------------------+     +-------------------+
|  Credit Balance   |     |  Token Allowance  |
|     $150.50       |     |   650 / 1000      |
+--------+----------+     +--------+----------+
         |                         |
         | PSTN calls,             | VN calls,
         | numbers,                | SMS
         | overflow                |
         v                         v
+-------------------+     +-------------------+
|   Credit Charges  |     |  Token Usage      |
| - $0.018 PSTN call|     | - 3 tokens call   |
| - $5.00 number    |     | - 10 tokens SMS   |
| - $0.40 overflow  |     |                   |
+--------+----------+     +--------+----------+
         |                         |
         v                         | exhausted
+-------------------+              |
|  Updated Balance  |&lt;-------------+
|     $145.08       |   overflow charges
+-------------------+
</pre></div>
</div>
</section>
<section id="balance-monitoring">
<h2>Balance Monitoring<a class="headerlink" href="#balance-monitoring" title="Link to this heading"></a></h2>
<p>Monitor balance and token usage to avoid service interruption.</p>
<p><strong>Balance Check Flow</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Before</span> <span class="n">Service</span> <span class="n">Execution</span><span class="p">:</span>
<span class="o">+--------------------------------------------+</span>
<span class="o">|</span> <span class="mf">1.</span> <span class="n">Identify</span> <span class="n">service</span> <span class="nb">type</span>                   <span class="o">|</span>
<span class="o">|</span> <span class="mf">2.</span> <span class="n">If</span> <span class="n">token</span><span class="o">-</span><span class="n">eligible</span><span class="p">:</span> <span class="n">check</span> <span class="n">token</span> <span class="n">balance</span>  <span class="o">|</span>
<span class="o">|</span>    <span class="o">-</span> <span class="n">If</span> <span class="n">tokens</span> <span class="n">available</span> <span class="o">-&gt;</span> <span class="n">proceed</span>         <span class="o">|</span>
<span class="o">|</span>    <span class="o">-</span> <span class="n">If</span> <span class="n">no</span> <span class="n">tokens</span> <span class="o">-&gt;</span> <span class="n">check</span> <span class="n">credit</span> <span class="n">balance</span>   <span class="o">|</span>
<span class="o">|</span> <span class="mf">3.</span> <span class="n">If</span> <span class="n">credit</span><span class="o">-</span><span class="n">only</span><span class="p">:</span> <span class="n">check</span> <span class="n">credit</span> <span class="n">balance</span>    <span class="o">|</span>
<span class="o">|</span>    <span class="o">-</span> <span class="n">If</span> <span class="n">balance</span> <span class="o">&gt;=</span> <span class="n">cost</span> <span class="o">-&gt;</span> <span class="n">proceed</span>          <span class="o">|</span>
<span class="o">|</span>    <span class="o">-</span> <span class="n">If</span> <span class="n">balance</span> <span class="o">&lt;</span> <span class="n">cost</span> <span class="o">-&gt;</span> <span class="n">deny</span> <span class="n">service</span>      <span class="o">|</span>
<span class="o">+--------------------------------------------+</span>
</pre></div>
</div>
<p><strong>Low Balance Handling</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>+-------------------+     +-------------------+
| Balance: $10.00   |     | Tokens: 0 / 1000  |
+--------+----------+     +--------+----------+
         |                         |
         | Attempt VN call         |
         | (no tokens left)        |
         v                         |
+-------------------+              |
| Check credit      |&lt;-------------+
| for overflow      |  overflow
+--------+----------+
         |
         | $10.00 &gt;= $0.0045/min
         v
+-------------------+
| Call proceeds      |
| (credit charged)   |
+-------------------+
</pre></div>
</div>
</section>
<section id="common-scenarios">
<h2>Common Scenarios<a class="headerlink" href="#common-scenarios" title="Link to this heading"></a></h2>
<p><strong>Scenario 1: Token-Based Monthly Usage</strong></p>
<p>Track token consumption throughout the month.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Monthly Usage (Free Plan, 1000 tokens):
+--------------------------------------------+
| Week 1:                                    |
| - 50 VN calls (avg 3 min) = 150 tokens     |
| - 20 SMS = 200 tokens                      |
| Tokens remaining: 650                      |
|                                            |
| Week 2:                                    |
| - 40 VN calls (avg 2 min) = 80 tokens      |
| - 30 SMS = 300 tokens                      |
| Tokens remaining: 270                      |
|                                            |
| Week 3:                                    |
| - 30 VN calls (avg 3 min) = 90 tokens      |
| - 15 SMS = 150 tokens                      |
| Tokens remaining: 30                       |
|                                            |
| Week 4 (tokens nearly exhausted):          |
| - 10 VN calls (avg 3 min) = 30 tokens      |
|   (uses last tokens)                       |
| - 5 SMS = overflow to credit               |
|   5 x $0.008 = $0.04 credit charge         |
+--------------------------------------------+
</pre></div>
</div>
<p><strong>Scenario 2: Mixed Token and Credit Usage</strong></p>
<p>Plan for costs across token-eligible and credit-only services.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Campaign: Customer Outreach
+--------------------------------------------+
| VN Calls: 200 calls (avg 3 min)            |
| - Tokens needed: 200 x 3 = 600             |
| - If 400 tokens available:                 |
|   - 400 tokens consumed                    |
|   - 200 overflow x 3 min x $0.0045 = $2.70|
|                                            |
| PSTN Calls: 50 calls (avg 2 min)           |
| - Credit: 50 x 2 x $0.006 = $0.60         |
| (always credit, no token deduction)         |
|                                            |
| SMS: 100 messages                          |
| - Tokens needed: 100 x 10 = 1,000          |
| - If 0 tokens remaining:                   |
|   - Credit: 100 x $0.008 = $0.80          |
|                                            |
| Total credit needed: $2.70 + $0.60 + $0.80 |
|                    = $4.10                  |
+--------------------------------------------+
</pre></div>
</div>
<p><strong>Scenario 3: Low Balance Alert</strong></p>
<p>Handle low balance situations.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1. Balance drops below threshold
   +--------------------------------------------+
   | Balance: $15.00                           |
   | Threshold: $50.00                         |
   | Tokens: 0 / 1000 (exhausted)              |
   | Status: LOW BALANCE                       |
   +--------------------------------------------+

2. Add funds (admin action)
   POST /billing_accounts/{id}/balance
   { &quot;amount&quot;: 200.00 }

3. Balance restored
   +--------------------------------------------+
   | Balance: $215.00                          |
   | Status: OK                                |
   +--------------------------------------------+
</pre></div>
</div>
</section>
<section id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading"></a></h2>
<p><strong>1. Token Monitoring</strong></p>
<ul class="simple">
<li><p>Check token usage regularly via the allowance endpoint</p></li>
<li><p>Plan upgrades to higher tiers if tokens are consistently exhausted early in the cycle</p></li>
<li><p>Track which services consume the most tokens</p></li>
</ul>
<p><strong>2. Balance Monitoring</strong></p>
<ul class="simple">
<li><p>Maintain credit balance for PSTN calls, number purchases, and token overflow</p></li>
<li><p>Set up low balance alerts</p></li>
<li><p>Plan for buffer above minimum needed</p></li>
</ul>
<p><strong>3. Cost Estimation</strong></p>
<ul class="simple">
<li><p>Separate estimates into token-eligible and credit-only services</p></li>
<li><p>Account for token overflow in budget planning</p></li>
<li><p>Include retry costs in estimates</p></li>
</ul>
<p><strong>4. Security</strong></p>
<ul class="simple">
<li><p>Restrict balance add permissions to admins</p></li>
<li><p>Monitor for unusual usage patterns</p></li>
<li><p>Review billing regularly for anomalies</p></li>
</ul>
<p><strong>5. Plan Selection</strong></p>
<ul class="simple">
<li><p>Choose plan tier based on expected VN call and SMS volume</p></li>
<li><p>Compare token allowance cost vs. credit-only cost at each tier</p></li>
<li><p>Consider upgrading if monthly overflow charges are significant</p></li>
</ul>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h2>
<p><strong>Balance Issues</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Symptom</p></th>
<th class="head"><p>Solution</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Services being denied</p></td>
<td><p>Check credit balance and token allowance;
add funds or upgrade plan if needed</p></td>
</tr>
<tr class="row-odd"><td><p>Cannot add balance</p></td>
<td><p>Verify admin permissions; check API token
validity</p></td>
</tr>
<tr class="row-even"><td><p>Balance not updating</p></td>
<td><p>Allow time for transaction processing; check
for API errors in response</p></td>
</tr>
</tbody>
</table>
<p><strong>Token Issues</strong></p>
<p><strong>Billing Issues</strong></p>
</section>
<section id="related-documentation">
<h2>Related Documentation<a class="headerlink" href="#related-documentation" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="customer_overview.html#customer-overview"><span class="std std-ref">Customer Overview</span></a> - Account management</p></li>
<li><p><a class="reference internal" href="call_overview.html#call-overview"><span class="std std-ref">Call Overview</span></a> - Voice call costs</p></li>
<li><p><a class="reference internal" href="message_overview.html#message-overview"><span class="std std-ref">Message Overview</span></a> - SMS costs</p></li>
<li><p><a class="reference internal" href="number_overview.html#number-overview"><span class="std std-ref">Number Overview</span></a> - Number provisioning costs</p></li>
</ul>
</section>
</section>

</main>
                        
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">Overview</a><ul>
<li><a class="reference internal" href="#how-billing-works">How Billing Works</a></li>
<li><a class="reference internal" href="#plan-tiers">Plan Tiers</a></li>
<li><a class="reference internal" href="#rate-structure">Rate Structure</a></li>
<li><a class="reference internal" href="#managing-balance">Managing Balance</a></li>
<li><a class="reference internal" href="#balance-lifecycle">Balance Lifecycle</a></li>
<li><a class="reference internal" href="#balance-monitoring">Balance Monitoring</a></li>
<li><a class="reference internal" href="#common-scenarios">Common Scenarios</a></li>
<li><a class="reference internal" href="#best-practices">Best Practices</a></li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
<li><a class="reference internal" href="#related-documentation">Related Documentation</a></li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
                <nav aria-label="Footer">
                    <ul class="nav justify-content-center mb-2">
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="http://voipbin.net">About Us</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="http://voipbin.net">Contact</a></li>
                        
                    </ul>
                </nav>
            
            <div class="text-center">
                    &copy; Copyright 2026, VoIPBIN
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a class="text-white" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.5.0
                    </a>
                    and
                    <a class="text-white" href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 7.2.6
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="_static/jquery.js?v=8dae8fb0"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="_static/dist/theme.js"></script>
        <script type="text/javascript" src="_static/dist/vendor.js"></script>
        <script type="text/javascript" src="_static/searchtools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>