<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="./">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>Queue &mdash; voipbin  documentation</title>
    
    <link rel="stylesheet" type="text/css" href="_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8e8a900e" />
      <link rel="stylesheet" type="text/css" href="_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="genindex.html" />
            <link rel="search" title="Search" href="search.html" />
            <link rel="top" title="voipbin  documentation" href="#" />
            <link rel="next" title="Recording" href="recording.html" />
            <link rel="prev" title="Conference" href="conference.html" />
    </head>
<body>
    <script type="text/javascript" src="_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="intro.html"
                        title="voipbin"
                        class="logo navbar-brand"
                    >
                        <img src="_static/images/voipbin-high-resolution-logo-white-transparent.png" width="45" height="80" alt="voipbin"
                            class="logo-img"
                        />
                        VoIPBin Documentation
                    </a>
                
                
                    <div class="collapse navbar-collapse justify-content-end">
                        <ul class="navbar-nav">
                            
                                
                                
                                <li class="nav-item"><a class="nav-link"  href="http://voipbin.net">Project</a></li>
                            
                                
                                
                                <li class="nav-item"><a class="nav-link"  href="https://admin.voipbin.net">Admin</a></li>
                            
                        </ul>
                    </div>
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="accesskey.html">Accesskey</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdk.html">SDK(Software Development Kit)</a></li>
<li class="toctree-l1"><a class="reference internal" href="restful_api.html">RESTful API(Application Programming Interface)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="flow.html">Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow.html#activeflow">Activeflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="variable.html">Variable</a></li>
<li class="toctree-l1"><a class="reference internal" href="webhook.html">Webhook</a></li>
<li class="toctree-l1"><a class="reference internal" href="common.html">Common</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Voice &amp; Real-Time</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="call.html">Call</a></li>
<li class="toctree-l1"><a class="reference internal" href="conference.html">Conference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Queue</a></li>
<li class="toctree-l1"><a class="reference internal" href="recording.html">Recording</a></li>
<li class="toctree-l1"><a class="reference internal" href="transcribe.html">Transcribe</a></li>
<li class="toctree-l1"><a class="reference internal" href="mediastream.html">Mediastream</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Messaging</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="message.html">Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.html">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="chat.html">Chat</a></li>
<li class="toctree-l1"><a class="reference internal" href="conversation.html">Conversation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AI &amp; Automation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ai.html">AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="campaign.html">Campaign</a></li>
<li class="toctree-l1"><a class="reference internal" href="outdial.html">Outdial</a></li>
<li class="toctree-l1"><a class="reference internal" href="outplan.html">Outplan</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources &amp; Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="agent.html">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="customer.html">Customer</a></li>
<li class="toctree-l1"><a class="reference internal" href="billing_account.html">Billing Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="tag.html">Tag</a></li>
<li class="toctree-l1"><a class="reference internal" href="provider.html">Provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="route.html">Route</a></li>
<li class="toctree-l1"><a class="reference internal" href="extension.html">Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="trunk.html">Trunk</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Architecture (Deep Dive)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="websocket.html">Websocket</a></li>
<li class="toctree-l1"><a class="reference internal" href="talk.html">Talk</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help &amp; Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">Queue</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
    <a class="btn btn-sm btn-light text-decoration-none" href="_sources/queue.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="queue">
<h1>Queue<a class="headerlink" href="#queue" title="Link to this heading"></a></h1>
<section id="overview">
<span id="queue-overview"></span><h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Call queueing allows calls to be placed on hold without handling the actual inquiries or transferring callers to the desired party. While in the call queue, the caller is played pre-recorded music or messages. Call queues are often used in call centers when there are not enough staff to handle a large number of calls. Call center operators generally receive information about the number of callers in the call queue and the duration of the waiting time. This allows them to respond flexibly to peak demand by deploying extra call center staff.</p>
<p>With the VoIPBIN’s queueing feature, businesses and call centers can effectively manage inbound calls, provide a smooth waiting experience for callers, and ensure that calls are efficiently distributed to available agents, improving overall customer service and call center performance.</p>
<section id="the-purpose-of-call-queueing">
<h3>The purpose of call queueing<a class="headerlink" href="#the-purpose-of-call-queueing" title="Link to this heading"></a></h3>
<p>Call queueing is intended to prevent callers from being turned away in the case of insufficient staff capacity. The purpose of the pre-recorded music or messages is to shorten the subjective waiting time. At the same time, call queues can be used for advertising products or services. As soon as the call can be dealt with, the caller is automatically transferred from the call queue to the member of staff responsible. If customer or contract data has to be requested in several stages, multiple downstream call queues can be used.</p>
</section>
<section id="how-queue-routing-works">
<h3>How Queue Routing Works<a class="headerlink" href="#how-queue-routing-works" title="Link to this heading"></a></h3>
<p>When a call joins a queue, a coordinated process begins to match the caller with an available agent.</p>
<p><strong>The Queue Journey</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>+-------------------------------------------------------------------------+
|                       Call&#39;s Journey Through Queue                      |
+-------------------------------------------------------------------------+

1. Call Joins Queue          2. Wait Flow Plays         3. Agent Search
+-----------------+         +-----------------+        +-----------------+
|                 |         |  # Hold music   |        |  Check for      |
|  queue_join     |--------&gt;|  &quot;Please wait&quot;  |-------&gt;|  available      |
|  action         |         |  announcements  |        |  agents         |
+-----------------+         +-----------------+        +--------+--------+
                                    ^                          |
                                    |                    +-----+-----+
                                    |                    |           |
                                    |               No agents    Agent found!
                                    |                    |           |
                                    +--------------------+           |
                                      Retry every 1 second           |
                                                                     v
                                                          +-----------------+
                                                          |  4. Connect     |
                                                          |  agent to call  |
                                                          +--------+--------+
                                                                   |
                                                                   v
                                                          +-----------------+
                                                          |  5. Caller and  |
                                                          |  agent talking  |
                                                          +-----------------+
</pre></div>
</div>
<p><strong>What Happens Step by Step</strong></p>
<ol class="arabic simple">
<li><p><strong>Call Joins Queue</strong>: When your flow executes a <code class="docutils literal notranslate"><span class="pre">queue_join</span></code> action, a queuecall is created</p></li>
<li><p><strong>Conference Bridge Created</strong>: A private conference room is set up for this call</p></li>
<li><p><strong>Wait Flow Starts</strong>: The caller hears music and announcements from your configured wait flow</p></li>
<li><p><strong>Agent Search Begins</strong>: The system immediately starts looking for available agents</p></li>
<li><p><strong>Continuous Checking</strong>: Every second, the system checks if any matching agents are now available</p></li>
<li><p><strong>Agent Found</strong>: When an agent matches, they’re invited to join the conference</p></li>
<li><p><strong>Service Begins</strong>: Both parties are connected and can talk</p></li>
</ol>
</section>
<section id="queuecall-lifecycle">
<h3>Queuecall Lifecycle<a class="headerlink" href="#queuecall-lifecycle" title="Link to this heading"></a></h3>
<p>Every call in a queue moves through a series of states:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+--------------------------------------------------------------------------+</span>
<span class="o">|</span>                      <span class="n">Queuecall</span> <span class="n">State</span> <span class="n">Machine</span>                             <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------+</span>

                            <span class="o">+------------+</span>
                            <span class="o">|</span> <span class="n">initiating</span> <span class="o">|</span>
                            <span class="o">|</span>  <span class="p">(</span><span class="n">brief</span><span class="p">)</span>   <span class="o">|</span>
                            <span class="o">+-----+------+</span>
                                  <span class="o">|</span>
                                  <span class="n">v</span>
                       <span class="o">+------------------+</span>
       <span class="n">wait_timeout</span><span class="o">---&gt;|</span>     <span class="n">waiting</span>      <span class="o">|</span>
       <span class="n">exceeded</span>        <span class="o">|</span> <span class="p">(</span><span class="ow">in</span> <span class="n">wait</span> <span class="n">flow</span><span class="p">)</span>   <span class="o">|</span>
           <span class="o">|</span>           <span class="o">+--------+---------+</span>
           <span class="o">|</span>                    <span class="o">|</span> <span class="n">agent</span> <span class="n">found</span>
           <span class="o">|</span>                    <span class="n">v</span>
           <span class="o">|</span>           <span class="o">+------------------+</span>
           <span class="o">|</span>           <span class="o">|</span>    <span class="n">connecting</span>    <span class="o">|</span>
           <span class="o">|</span>           <span class="o">|</span>  <span class="p">(</span><span class="n">dialing</span> <span class="n">agent</span><span class="p">)</span> <span class="o">|</span>
           <span class="o">|</span>           <span class="o">+--------+---------+</span>
           <span class="o">|</span>                    <span class="o">|</span> <span class="n">agent</span> <span class="n">joins</span>
           <span class="o">|</span>                    <span class="n">v</span>
           <span class="o">|</span>           <span class="o">+------------------+</span>         <span class="n">service_timeout</span>
           <span class="o">|</span>           <span class="o">|</span>     <span class="n">service</span>      <span class="o">|&lt;----------</span> <span class="n">exceeded</span>
           <span class="o">|</span>           <span class="o">|</span> <span class="p">(</span><span class="n">agent</span> <span class="n">on</span> <span class="n">call</span><span class="p">)</span>  <span class="o">|</span>                <span class="o">|</span>
           <span class="o">|</span>           <span class="o">+--------+---------+</span>                <span class="o">|</span>
           <span class="o">|</span>                    <span class="o">|</span>                          <span class="o">|</span>
           <span class="o">|</span>           <span class="o">+--------+--------+</span>                 <span class="o">|</span>
           <span class="o">|</span>           <span class="n">v</span>                 <span class="n">v</span>                 <span class="n">v</span>
           <span class="o">|</span>    <span class="o">+------------+</span>    <span class="o">+-------------+</span>
           <span class="o">+---&gt;|</span>  <span class="n">abandoned</span> <span class="o">|</span>    <span class="o">|</span>    <span class="n">done</span>     <span class="o">|</span>
                <span class="o">|</span>  <span class="p">(</span><span class="n">failed</span><span class="p">)</span>  <span class="o">|</span>    <span class="o">|</span> <span class="p">(</span><span class="n">success</span><span class="p">)</span>   <span class="o">|</span>
                <span class="o">+------------+</span>    <span class="o">+-------------+</span>
</pre></div>
</div>
<p><strong>State Descriptions</strong></p>
</section>
<section id="agent-searching">
<h3>Agent Searching<a class="headerlink" href="#agent-searching" title="Link to this heading"></a></h3>
<p>While the call is in the queue, the queue continuously searches for available agents to handle the call. Each queue has tags associated with it that determine which agents can receive calls from that queue.</p>
<p><strong>How Agent Matching Works</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>+--------------------------------------------------------------------------+
|                      Agent Matching Process                              |
+--------------------------------------------------------------------------+

Queue Configuration:                    Agent Pool:
+------------------------+             +--------------------------------+
| Tag IDs:               |             | Agent A                        |
|  * &quot;english&quot;           |             |  Tags: english, billing, vip   |
|  * &quot;billing&quot;           |             |  Status: available             |
|                        |             |  --------------------------    |
+------------------------+             | Agent B                        |
          |                            |  Tags: english                 |
          |                            |  Status: available             |
          |                            |  --------------------------    |
          v                            | Agent C                        |
+------------------------+             |  Tags: english, billing        |
| Search for agents with |             |  Status: busy                  |
| ALL of these tags:     |             |  --------------------------    |
|  * english [x]         |             | Agent D                        |
|  * billing [x]         |             |  Tags: spanish, billing        |
+------------------------+             |  Status: available             |
          |                            +--------------------------------+
          |
          v
+--------------------------------------------------------------------------+
| Results:                                                                 |
|  [x] Agent A - Has english + billing + vip, is available                 |
|  [ ] Agent B - Missing &quot;billing&quot; tag                                     |
|  [ ] Agent C - Has tags but is busy                                      |
|  [ ] Agent D - Missing &quot;english&quot; tag                                     |
|                                                                          |
|  -&gt; Agent A is selected!                                                 |
+--------------------------------------------------------------------------+
</pre></div>
</div>
<img alt="_images/queue_overview_agent.png" src="_images/queue_overview_agent.png" />
<p><strong>Tag Requirements</strong></p>
<p>Tags work as a skill-based filter:</p>
<ul class="simple">
<li><p>Agents must have <strong>ALL</strong> tags the queue requires (AND logic)</p></li>
<li><p>Having extra tags is fine (Agent A has “vip” but queue doesn’t require it)</p></li>
<li><p>If an agent is missing even one required tag, they’re excluded</p></li>
<li><p>Tags define skills, languages, departments, or any grouping you need</p></li>
</ul>
<p><strong>Agent Status</strong></p>
<p>The agent’s status must be “available” to receive queue calls:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Agent Statuses and Queue Eligibility:
+----------------+---------------------------------------------+
| Status         | Can receive queue calls?                    |
+----------------+---------------------------------------------+
| available      | [x] Yes - Agent is ready to take calls      |
| busy           | [ ] No - Agent is handling another call     |
| wrap-up        | [ ] No - Agent is finishing previous call   |
| away           | [ ] No - Agent is temporarily away          |
| offline        | [ ] No - Agent is not logged in             |
+----------------+---------------------------------------------+
</pre></div>
</div>
<p><strong>Selection Method</strong></p>
<p>When multiple agents match, the system uses random selection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Multiple</span> <span class="n">agents</span> <span class="n">available</span><span class="p">:</span>
<span class="o">+------------+</span>   <span class="o">+------------+</span>   <span class="o">+------------+</span>
<span class="o">|</span>  <span class="n">Agent</span> <span class="n">A</span>   <span class="o">|</span>   <span class="o">|</span>  <span class="n">Agent</span> <span class="n">C</span>   <span class="o">|</span>   <span class="o">|</span>  <span class="n">Agent</span> <span class="n">E</span>   <span class="o">|</span>
<span class="o">|</span> <span class="p">(</span><span class="n">matches</span><span class="p">)</span>  <span class="o">|</span>   <span class="o">|</span> <span class="p">(</span><span class="n">matches</span><span class="p">)</span>  <span class="o">|</span>   <span class="o">|</span> <span class="p">(</span><span class="n">matches</span><span class="p">)</span>  <span class="o">|</span>
<span class="o">+------------+</span>   <span class="o">+------------+</span>   <span class="o">+------------+</span>
      <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>
      <span class="o">+---------------+---------------+</span>
                      <span class="o">|</span>
                      <span class="n">v</span>
                <span class="n">Random</span> <span class="n">Selection</span>
                      <span class="o">|</span>
                      <span class="n">v</span>
               <span class="n">One</span> <span class="n">agent</span> <span class="n">picked</span>
</pre></div>
</div>
</section>
<section id="flow-execution">
<h3>Flow Execution<a class="headerlink" href="#flow-execution" title="Link to this heading"></a></h3>
<p>A call placed in the queue will progress through the queue’s waiting actions, continuing through pre-defined steps until an available agent is located. These waiting actions may involve playing pre-recorded music, messages, or custom actions, enhancing the caller’s experience while awaiting assistance in the queue.</p>
<p><strong>Wait Flow Structure</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>+--------------------------------------------------------------------------+
|                          Wait Flow Execution                             |
+--------------------------------------------------------------------------+

Caller enters queue
       |
       v
+-----------------------------------------------------------------------+
|                            Wait Flow Loop                             |
|                                                                       |
|    +----------+     +----------+     +----------+     +----------+    |
|    | &quot;Please  |----&gt;|  # Hold  |----&gt;| &quot;Your    |----&gt;|  # Hold  |    |
|    |  hold&quot;   |     |  music   |     | position |     |  music   |    |
|    |  (talk)  |     |  (play)  |     |  is 3&quot;   |     |  (play)  |    |
|    +----------+     +----------+     +----------+     +----------+    |
|         ^                                                    |        |
|         |                                                    |        |
|         +----------------------------------------------------+        |
|                        (loops until agent found)                      |
+-----------------------------------------------------------------------+
       |
       | Agent found!
       v
+----------------+
| Wait flow ends |
| Service begins |
+----------------+
</pre></div>
</div>
<img alt="_images/queue_overview_flow.png" src="_images/queue_overview_flow.png" />
<p><strong>Wait Flow Features</strong></p>
<ul class="simple">
<li><p><strong>Looping</strong>: The wait flow automatically repeats until the call is answered or times out</p></li>
<li><p><strong>Custom Actions</strong>: You can use any flow action that makes sense while waiting</p></li>
<li><p><strong>Announcements</strong>: Play position updates, estimated wait time, or promotional messages</p></li>
<li><p><strong>Music</strong>: Play hold music to make the wait feel shorter</p></li>
</ul>
</section>
<section id="timeout-handling">
<h3>Timeout Handling<a class="headerlink" href="#timeout-handling" title="Link to this heading"></a></h3>
<p>Queues have two distinct timeout mechanisms to prevent calls from being stuck indefinitely:</p>
<p><strong>Wait Timeout</strong></p>
<p>Controls how long a caller can wait before being removed from the queue:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+--------------------------------------------------------------------------+</span>
<span class="o">|</span>                          <span class="n">Wait</span> <span class="n">Timeout</span>                                    <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------+</span>

<span class="n">Call</span> <span class="n">joins</span> <span class="n">queue</span>                                     <span class="n">Wait</span> <span class="n">timeout</span> <span class="n">reached</span>
     <span class="o">|</span>                                                     <span class="o">|</span>
     <span class="n">v</span>                                                     <span class="n">v</span>
<span class="o">-----</span><span class="n">o</span><span class="o">-----------------------------------------------------</span><span class="n">o</span><span class="o">-------------&gt;</span>
     <span class="o">|&lt;---------------</span> <span class="n">wait_timeout</span> <span class="p">(</span><span class="n">ms</span><span class="p">)</span> <span class="o">-----------------&gt;|</span>    <span class="n">Time</span>
     <span class="o">|</span>                                                     <span class="o">|</span>
     <span class="o">|</span> <span class="n">Caller</span> <span class="n">hears</span> <span class="n">wait</span> <span class="n">flow</span>                              <span class="o">|</span> <span class="n">Call</span> <span class="ow">is</span> <span class="n">kicked</span>
     <span class="o">|</span> <span class="n">System</span> <span class="n">searches</span> <span class="k">for</span> <span class="n">agents</span>                          <span class="o">|</span> <span class="n">Status</span><span class="p">:</span> <span class="n">abandoned</span>
     <span class="o">|</span>                                                     <span class="o">|</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Set via queue’s <code class="docutils literal notranslate"><span class="pre">wait_timeout</span></code> field (milliseconds)</p></li>
<li><p>0 means no timeout (wait forever)</p></li>
<li><p>When exceeded, the call is removed with status “abandoned”</p></li>
</ul>
<p><strong>Service Timeout</strong></p>
<p>Controls how long a conversation can last once connected:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+--------------------------------------------------------------------------+</span>
<span class="o">|</span>                         <span class="n">Service</span> <span class="n">Timeout</span>                                  <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------+</span>

<span class="n">Agent</span> <span class="n">connects</span>                                    <span class="n">Service</span> <span class="n">timeout</span> <span class="n">reached</span>
     <span class="o">|</span>                                                     <span class="o">|</span>
     <span class="n">v</span>                                                     <span class="n">v</span>
<span class="o">-----</span><span class="n">o</span><span class="o">-----------------------------------------------------</span><span class="n">o</span><span class="o">-------------&gt;</span>
     <span class="o">|&lt;-------------</span> <span class="n">service_timeout</span> <span class="p">(</span><span class="n">ms</span><span class="p">)</span> <span class="o">----------------&gt;|</span>    <span class="n">Time</span>
     <span class="o">|</span>                                                     <span class="o">|</span>
     <span class="o">|</span> <span class="n">Agent</span> <span class="ow">and</span> <span class="n">caller</span> <span class="n">talking</span>                            <span class="o">|</span> <span class="n">Call</span> <span class="ow">is</span> <span class="n">ended</span>
     <span class="o">|</span> <span class="p">(</span><span class="n">status</span><span class="p">:</span> <span class="n">service</span><span class="p">)</span>                                   <span class="o">|</span> <span class="n">Status</span><span class="p">:</span> <span class="n">done</span>
     <span class="o">|</span>                                                     <span class="o">|</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Set via queue’s <code class="docutils literal notranslate"><span class="pre">service_timeout</span></code> field (milliseconds)</p></li>
<li><p>0 means no timeout (talk forever)</p></li>
<li><p>When exceeded, the call is ended gracefully</p></li>
</ul>
<p><strong>Timeout Scenarios</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Scenario</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Caller</span> <span class="n">waits</span> <span class="n">too</span> <span class="n">long</span>
<span class="o">+----------+</span>                                        <span class="o">+-----------+</span>
<span class="o">|</span> <span class="n">waiting</span>  <span class="o">|-----</span> <span class="n">wait_timeout</span> <span class="n">exceeded</span> <span class="o">-----------&gt;|</span> <span class="n">abandoned</span> <span class="o">|</span>
<span class="o">+----------+</span>                                        <span class="o">+-----------+</span>

<span class="n">Scenario</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Caller</span> <span class="n">hangs</span> <span class="n">up</span> <span class="k">while</span> <span class="n">waiting</span>
<span class="o">+----------+</span>                                        <span class="o">+-----------+</span>
<span class="o">|</span> <span class="n">waiting</span>  <span class="o">|-----</span> <span class="n">caller</span> <span class="n">hangup</span> <span class="o">-------------------&gt;|</span> <span class="n">abandoned</span> <span class="o">|</span>
<span class="o">+----------+</span>                                        <span class="o">+-----------+</span>

<span class="n">Scenario</span> <span class="mi">3</span><span class="p">:</span> <span class="n">Successful</span> <span class="n">call</span><span class="p">,</span> <span class="n">normal</span> <span class="n">end</span>
<span class="o">+----------+</span>   <span class="o">+-----------+</span>   <span class="o">+---------+</span>         <span class="o">+------+</span>
<span class="o">|</span> <span class="n">waiting</span>  <span class="o">|--&gt;|</span> <span class="n">connecting</span><span class="o">|--&gt;|</span> <span class="n">service</span> <span class="o">|--</span><span class="n">hangup</span><span class="o">&gt;|</span> <span class="n">done</span> <span class="o">|</span>
<span class="o">+----------+</span>   <span class="o">+-----------+</span>   <span class="o">+---------+</span>         <span class="o">+------+</span>
</pre></div>
</div>
</section>
<section id="queue-metrics-and-tracking">
<h3>Queue Metrics and Tracking<a class="headerlink" href="#queue-metrics-and-tracking" title="Link to this heading"></a></h3>
<p>Queues track detailed metrics for reporting and analysis:</p>
<p><strong>Per-Queue Statistics</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+--------------------------------------------------------------------------+</span>
<span class="o">|</span>                        <span class="n">Queue</span> <span class="n">Statistics</span>                                  <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------+</span>

<span class="n">Queue</span><span class="p">:</span> <span class="s2">&quot;Customer Support&quot;</span>
<span class="o">+---------------------------------+---------------------------------------+</span>
<span class="o">|</span> <span class="n">total_incoming_count</span>            <span class="o">|</span> <span class="mi">1</span><span class="p">,</span><span class="mi">234</span> <span class="n">calls</span> <span class="n">entered</span> <span class="n">this</span> <span class="n">queue</span>        <span class="o">|</span>
<span class="o">+---------------------------------+---------------------------------------+</span>
<span class="o">|</span> <span class="n">total_serviced_count</span>            <span class="o">|</span> <span class="mi">1</span><span class="p">,</span><span class="mi">100</span> <span class="n">calls</span> <span class="n">reached</span> <span class="n">an</span> <span class="n">agent</span>          <span class="o">|</span>
<span class="o">+---------------------------------+---------------------------------------+</span>
<span class="o">|</span> <span class="n">total_abandoned_count</span>           <span class="o">|</span> <span class="mi">134</span> <span class="n">calls</span> <span class="n">abandoned</span> <span class="p">(</span><span class="mi">11</span><span class="o">%</span> <span class="n">abandon</span> <span class="n">rate</span><span class="p">)</span><span class="o">|</span>
<span class="o">+---------------------------------+---------------------------------------+</span>
</pre></div>
</div>
<p><strong>Per-Queuecall Metrics</strong></p>
<p>Each call in the queue tracks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Queuecall</span><span class="p">:</span> <span class="s2">&quot;abc-123-def&quot;</span>
<span class="o">+---------------------------------+---------------------------------------+</span>
<span class="o">|</span> <span class="n">duration_waiting</span>                <span class="o">|</span> <span class="mi">45</span><span class="p">,</span><span class="mi">000</span> <span class="n">ms</span> <span class="p">(</span><span class="mi">45</span> <span class="n">seconds</span> <span class="ow">in</span> <span class="n">wait</span> <span class="n">flow</span><span class="p">)</span>   <span class="o">|</span>
<span class="o">+---------------------------------+---------------------------------------+</span>
<span class="o">|</span> <span class="n">duration_service</span>                <span class="o">|</span> <span class="mi">180</span><span class="p">,</span><span class="mi">000</span> <span class="n">ms</span> <span class="p">(</span><span class="mi">3</span> <span class="n">minutes</span> <span class="k">with</span> <span class="n">agent</span><span class="p">)</span>     <span class="o">|</span>
<span class="o">+---------------------------------+---------------------------------------+</span>
<span class="o">|</span> <span class="n">tm_create</span>                       <span class="o">|</span> <span class="mi">2024</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">15</span> <span class="mi">10</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span> <span class="p">(</span><span class="n">entered</span> <span class="n">queue</span><span class="p">)</span>   <span class="o">|</span>
<span class="o">+---------------------------------+---------------------------------------+</span>
<span class="o">|</span> <span class="n">tm_service</span>                      <span class="o">|</span> <span class="mi">2024</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">15</span> <span class="mi">10</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">45</span> <span class="p">(</span><span class="n">agent</span> <span class="n">connected</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+---------------------------------+---------------------------------------+</span>
<span class="o">|</span> <span class="n">tm_end</span>                          <span class="o">|</span> <span class="mi">2024</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">15</span> <span class="mi">10</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">45</span> <span class="p">(</span><span class="n">call</span> <span class="n">ended</span><span class="p">)</span>      <span class="o">|</span>
<span class="o">+---------------------------------+---------------------------------------+</span>
</pre></div>
</div>
<p><strong>Calculating Service Levels</strong></p>
<p>You can calculate key performance indicators from these metrics:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Service Level     = (total_serviced_count / total_incoming_count) × 100
                  = (1100 / 1234) × 100 = 89.1%

Abandonment Rate  = (total_abandoned_count / total_incoming_count) × 100
                  = (134 / 1234) × 100 = 10.9%

Average Wait Time = Sum of all duration_waiting / total_incoming_count
</pre></div>
</div>
</section>
<section id="when-no-agents-are-available">
<h3>When No Agents Are Available<a class="headerlink" href="#when-no-agents-are-available" title="Link to this heading"></a></h3>
<p>If no agents match or all matching agents are busy, the caller waits:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>+--------------------------------------------------------------------------+
|                    No Agents Available Scenario                          |
+--------------------------------------------------------------------------+

10:00:00 - Call joins queue, no agents available
     |
     v
+-------------------------------------------------------------------------+
| System checks for agents every 1 second:                                |
|                                                                         |
| 10:00:01 - Check agents... none available                               |
| 10:00:02 - Check agents... none available                               |
| 10:00:03 - Check agents... none available                               |
| 10:00:04 - Check agents... Agent A just became available!               |
|                                                                         |
| Caller hears wait flow the entire time                                  |
+-------------------------------------------------------------------------+
     |
     v
10:00:04 - Agent A is connected
</pre></div>
</div>
<p><strong>Retry Behavior</strong></p>
<ul class="simple">
<li><p>System retries every 1 second</p></li>
<li><p>Caller continuously hears the wait flow</p></li>
<li><p>As soon as any agent becomes available and matches, they’re connected</p></li>
<li><p>This continues until wait_timeout (if configured) or an agent answers</p></li>
</ul>
</section>
<section id="conference-bridge-architecture">
<h3>Conference Bridge Architecture<a class="headerlink" href="#conference-bridge-architecture" title="Link to this heading"></a></h3>
<p>Each queuecall gets its own private conference bridge:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+--------------------------------------------------------------------------+</span>
<span class="o">|</span>                      <span class="n">Conference</span> <span class="n">Bridge</span> <span class="n">Model</span>                             <span class="o">|</span>
<span class="o">+--------------------------------------------------------------------------+</span>

<span class="n">Queuecall</span> <span class="k">for</span> <span class="n">Caller</span> <span class="n">A</span>                    <span class="n">Queuecall</span> <span class="k">for</span> <span class="n">Caller</span> <span class="n">B</span>
<span class="o">+-------------------------+</span>              <span class="o">+-------------------------+</span>
<span class="o">|</span> <span class="n">Conference</span> <span class="n">Bridge</span> <span class="c1">#1    |              | Conference Bridge #2    |</span>
<span class="o">|</span> <span class="o">+---------+</span> <span class="o">+---------+</span> <span class="o">|</span>              <span class="o">|</span> <span class="o">+---------+</span> <span class="o">+---------+</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">|</span> <span class="n">Caller</span>  <span class="o">|</span> <span class="o">|</span>  <span class="n">Agent</span>  <span class="o">|</span> <span class="o">|</span>              <span class="o">|</span> <span class="o">|</span> <span class="n">Caller</span>  <span class="o">|</span> <span class="o">|</span>  <span class="n">Agent</span>  <span class="o">|</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">|</span>   <span class="n">A</span>     <span class="o">|</span> <span class="o">|</span>   <span class="mi">1</span>     <span class="o">|</span> <span class="o">|</span>              <span class="o">|</span> <span class="o">|</span>   <span class="n">B</span>     <span class="o">|</span> <span class="o">|</span>   <span class="mi">2</span>     <span class="o">|</span> <span class="o">|</span>
<span class="o">|</span> <span class="o">+---------+</span> <span class="o">+---------+</span> <span class="o">|</span>              <span class="o">|</span> <span class="o">+---------+</span> <span class="o">+---------+</span> <span class="o">|</span>
<span class="o">+-------------------------+</span>              <span class="o">+-------------------------+</span>
</pre></div>
</div>
<p><strong>Why This Design?</strong></p>
<ul class="simple">
<li><p>Each call is isolated in its own bridge</p></li>
<li><p>Caller joins immediately, hears wait flow</p></li>
<li><p>Agent joins when available, both can talk</p></li>
<li><p>Clean separation - no cross-talk between calls</p></li>
</ul>
</section>
<section id="common-queue-scenarios">
<h3>Common Queue Scenarios<a class="headerlink" href="#common-queue-scenarios" title="Link to this heading"></a></h3>
<p><strong>Scenario 1: Quick Answer</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Caller</span> <span class="n">dials</span> <span class="o">-&gt;</span> <span class="n">Enters</span> <span class="n">queue</span> <span class="o">-&gt;</span> <span class="n">Agent</span> <span class="n">available</span> <span class="o">-&gt;</span> <span class="n">Connected</span> <span class="ow">in</span> <span class="mi">2</span> <span class="n">seconds</span>
                                                <span class="o">|</span>
                                                <span class="n">v</span>
                                        <span class="n">duration_waiting</span><span class="p">:</span> <span class="mi">2000</span><span class="n">ms</span>
                                        <span class="n">status</span><span class="p">:</span> <span class="n">done</span>
</pre></div>
</div>
<p><strong>Scenario 2: Wait Then Connect</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Caller</span> <span class="n">dials</span> <span class="o">-&gt;</span> <span class="n">Enters</span> <span class="n">queue</span> <span class="o">-&gt;</span> <span class="n">No</span> <span class="n">agents</span> <span class="o">-&gt;</span> <span class="n">Waits</span> <span class="mi">45</span> <span class="n">seconds</span> <span class="o">-&gt;</span> <span class="n">Agent</span> <span class="n">available</span>
                                 <span class="o">|</span>                                  <span class="o">|</span>
                                 <span class="n">v</span>                                  <span class="n">v</span>
                          <span class="c1"># Hold music plays              Connected!</span>
                          <span class="n">Position</span> <span class="n">announcements</span>          <span class="n">duration_waiting</span><span class="p">:</span> <span class="mi">45000</span><span class="n">ms</span>
</pre></div>
</div>
<p><strong>Scenario 3: Caller Abandons</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Caller</span> <span class="n">dials</span> <span class="o">-&gt;</span> <span class="n">Enters</span> <span class="n">queue</span> <span class="o">-&gt;</span> <span class="n">Waits</span> <span class="mi">2</span> <span class="n">minutes</span> <span class="o">-&gt;</span> <span class="n">Caller</span> <span class="n">hangs</span> <span class="n">up</span>
                                 <span class="o">|</span>                      <span class="o">|</span>
                                 <span class="n">v</span>                      <span class="n">v</span>
                          <span class="c1"># Hold music plays      status: abandoned</span>
                                                  <span class="n">duration_waiting</span><span class="p">:</span> <span class="mi">120000</span><span class="n">ms</span>
</pre></div>
</div>
<p><strong>Scenario 4: Wait Timeout</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Caller</span> <span class="n">dials</span> <span class="o">-&gt;</span> <span class="n">Enters</span> <span class="n">queue</span> <span class="o">-&gt;</span> <span class="n">Waits</span> <span class="mi">5</span> <span class="n">minutes</span> <span class="o">-&gt;</span> <span class="n">wait_timeout</span> <span class="n">exceeded</span>
                                 <span class="o">|</span>                      <span class="o">|</span>
                                 <span class="n">v</span>                      <span class="n">v</span>
                          <span class="c1"># Hold music plays      Kicked from queue</span>
                                                  <span class="n">status</span><span class="p">:</span> <span class="n">abandoned</span>
</pre></div>
</div>
</section>
<section id="best-practices">
<h3>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading"></a></h3>
<p><strong>1. Configure Appropriate Timeouts</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wait_timeout</span><span class="p">:</span> <span class="mi">300000</span>    <span class="p">(</span><span class="mi">5</span> <span class="n">minutes</span> <span class="o">-</span> <span class="n">reasonable</span> <span class="k">for</span> <span class="n">customer</span> <span class="n">service</span><span class="p">)</span>
<span class="n">service_timeout</span><span class="p">:</span> <span class="mi">0</span>      <span class="p">(</span><span class="n">no</span> <span class="n">limit</span> <span class="k">for</span> <span class="n">service</span> <span class="o">-</span> <span class="n">let</span> <span class="n">conversations</span> <span class="n">finish</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>2. Design Engaging Wait Flows</strong></p>
<ul class="simple">
<li><p>Mix music with periodic announcements</p></li>
<li><p>Provide position in queue updates</p></li>
<li><p>Offer callback options for long waits</p></li>
<li><p>Keep announcements concise</p></li>
</ul>
<p><strong>3. Tag Agents Thoughtfully</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Good</span> <span class="n">tag</span> <span class="n">structure</span><span class="p">:</span>
<span class="o">+-----------------------------------------+</span>
<span class="o">|</span> <span class="n">Language</span> <span class="n">tags</span><span class="p">:</span> <span class="n">english</span><span class="p">,</span> <span class="n">spanish</span><span class="p">,</span> <span class="n">french</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">Skill</span> <span class="n">tags</span><span class="p">:</span> <span class="n">billing</span><span class="p">,</span> <span class="n">tech_support</span><span class="p">,</span> <span class="n">sales</span><span class="o">|</span>
<span class="o">|</span> <span class="n">Tier</span> <span class="n">tags</span><span class="p">:</span> <span class="n">tier1</span><span class="p">,</span> <span class="n">tier2</span><span class="p">,</span> <span class="n">supervisor</span>     <span class="o">|</span>
<span class="o">+-----------------------------------------+</span>
</pre></div>
</div>
<p><strong>4. Monitor Key Metrics</strong></p>
<ul class="simple">
<li><p>Track abandonment rates - high rates indicate understaffing or long waits</p></li>
<li><p>Monitor average wait times - aim for your service level target</p></li>
<li><p>Review service durations - identify training opportunities</p></li>
</ul>
</section>
</section>
<section id="queue-struct-queue">
<span id="id1"></span><h2>Queue<a class="headerlink" href="#queue-struct-queue" title="Link to this heading"></a></h2>
<section id="queue-struct-queue-queue">
<span id="id2"></span><h3>Queue<a class="headerlink" href="#queue-struct-queue-queue" title="Link to this heading"></a></h3>
<p>Queue struct</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;routing_method&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tag_ids&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">],</span>
    <span class="s2">&quot;wait_actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="n">action</span><span class="o">...</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;wait_timeout&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;service_timeout&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;wait_queue_call_ids&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">],</span>
    <span class="s2">&quot;service_queue_call_ids&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">],</span>
    <span class="s2">&quot;total_incoming_count&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;total_serviced_count&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;total_abandoned_count&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;total_waittime&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;total_service_duration&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;tm_create&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_update&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_delete&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p><em>id</em>: Queue’s ID.</p></li>
<li><p><em>name</em>: Queue’s name.</p></li>
<li><p><em>detail</em>: Queue’s detail description.</p></li>
<li><p><em>routing_method</em>: Define the queue’s call routing method. See detail <a class="reference internal" href="queue_struct_queue.html#queue-struct-queue-routing-method"><span class="std std-ref">here</span></a>.</p></li>
<li><p><em>tag_ids</em>: List of tags.</p></li>
<li><p><em>wait_actions</em>: List of actions for waiting calls.</p></li>
<li><p><em>wait_timeout</em>: Timeout for waiting(ms). If it sets to 0, no timeout.</p></li>
<li><p><em>service_timeout</em>: Timeout for service(talk with agent. ms). If it sets to 0, no timeout.</p></li>
<li><p><em>wait_queue_call_ids</em>: List of waiting call ids.</p></li>
<li><p><em>service_queue_call_ids</em>: List of service call ids.</p></li>
<li><p><em>total_incoming_count</em>: Number of joined calls.</p></li>
<li><p><em>total_serviced_count</em>: Number of serviced calls.</p></li>
<li><p><em>total_abandoned_count</em>: Number of abandoned calls.</p></li>
<li><p><em>total_waittime</em>: Sum of all call’s waitting time(ms).</p></li>
<li><p><em>total_service_duration</em>: Sum of all call’s service time(ms).</p></li>
</ul>
</section>
<section id="routing-method">
<span id="queue-struct-queue-routing-method"></span><h3>Routing Method<a class="headerlink" href="#routing-method" title="Link to this heading"></a></h3>
<p>Define the queue’s queued call routing method to the agent if the number of available agent is more than 2.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>random</p></td>
<td><p>Pick the agent randomly.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="queuecall">
<span id="queue-struct-queuecall"></span><h2>Queuecall<a class="headerlink" href="#queuecall" title="Link to this heading"></a></h2>
<section id="queue-struct-queuecall-queuecall">
<span id="id3"></span><h3>Queuecall<a class="headerlink" href="#queue-struct-queuecall-queuecall" title="Link to this heading"></a></h3>
<p>Queuecall struct</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;reference_type&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;reference_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;service_agent_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_create&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_service&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_update&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_delete&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>id: Queuecall’s ID.</p></li>
<li><p>reference_type: Referenced resource’s type. See detail <a class="reference internal" href="queue_struct_queuecall.html#queue-struct-queuecall-reference-type"><span class="std std-ref">here</span></a>.</p></li>
<li><p>status: Queuecall’s status. See detail <a class="reference internal" href="queue_struct_queuecall.html#queue-struct-queuecall-type"><span class="std std-ref">here</span></a>.</p></li>
<li><p>service_agent_id: Connected agent_id.</p></li>
</ul>
<section id="example">
<h4>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;c7c1e226-8c86-4b43-9606-2d5bb2059a09&quot;</span><span class="p">,</span>
    <span class="s2">&quot;reference_type&quot;</span><span class="p">:</span> <span class="s2">&quot;call&quot;</span><span class="p">,</span>
    <span class="s2">&quot;reference_id&quot;</span><span class="p">:</span> <span class="s2">&quot;1fe1356f-3f7f-4ff9-9d33-08136b38f506&quot;</span><span class="p">,</span>
    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;done&quot;</span><span class="p">,</span>
    <span class="s2">&quot;service_agent_id&quot;</span><span class="p">:</span> <span class="s2">&quot;eb1ac5c0-ff63-47e2-bcdb-5da9c336eb4b&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_create&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-03-29 15:07:46.111715&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_service&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-03-29 15:08:04.811442&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_update&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-03-29 15:08:25.814885&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_delete&quot;</span><span class="p">:</span> <span class="s2">&quot;2022-03-29 15:08:25.814885&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="reference-type">
<span id="queue-struct-queuecall-reference-type"></span><h3>Reference type<a class="headerlink" href="#reference-type" title="Link to this heading"></a></h3>
<p>Referenced resource’s type.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>call</p></td>
<td><p>Call reference resource</p></td>
</tr>
</tbody>
</table>
</section>
<section id="status">
<span id="queue-struct-queuecall-type"></span><h3>Status<a class="headerlink" href="#status" title="Link to this heading"></a></h3>
<p>Queuecall’s status.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>wait</p></td>
<td><p>Queue is looking for an available agent and the queuecall is looping the waiting actions.</p></td>
</tr>
<tr class="row-odd"><td><p>kicking</p></td>
<td><p>A queuecall is being kicked.</p></td>
</tr>
<tr class="row-even"><td><p>service</p></td>
<td><p>A queuecall is talking with agent.</p></td>
</tr>
<tr class="row-odd"><td><p>done</p></td>
<td><p>A queuecall is done.</p></td>
</tr>
<tr class="row-even"><td><p>abandoned</p></td>
<td><p>A queuecall has abandoned before connect to the agent.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tutorial">
<span id="queue-tutorial"></span><h2>Tutorial<a class="headerlink" href="#tutorial" title="Link to this heading"></a></h2>
<section id="create-a-new-queue">
<h3>Create a new queue<a class="headerlink" href="#create-a-new-queue" title="Link to this heading"></a></h3>
<p>Create a new queue</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl --location --request POST &#39;https://api.voipbin.net/v1.0/queues?token=&lt;YOUR_AUTH_TOKEN&gt;&#39; \
--header &#39;Content-Type: application/json&#39; \
--header &#39;Cookie: token=&lt;YOUR_AUTH_TOKEN&gt;&#39; \
--data-raw &#39;{
    &quot;name&quot;: &quot;test queue&quot;,
    &quot;detail&quot;: &quot;test queue detail&quot;,
    &quot;routing_method&quot;: &quot;random&quot;,
    &quot;tag_ids&quot;: [
        &quot;d7450dda-21e0-4611-b09a-8d771c50a5e6&quot;
    ],
    &quot;wait_actions&quot;: [
        {
            &quot;type&quot;: &quot;talk&quot;,
            &quot;option&quot;: {
                &quot;text&quot;: &quot;All of the agents are busy. Thank you for your waiting.&quot;,
                &quot;gender&quot;: &quot;female&quot;,
                &quot;language&quot;: &quot;en-US&quot;
            }
        },
        {
            &quot;type&quot;: &quot;sleep&quot;,
            &quot;option&quot;: {
                &quot;duration&quot;: 10000
            }
        }

    ],
    &quot;timeout_wait&quot;: 100000,
    &quot;timeout_service&quot;: 10000000
}&#39;
</pre></div>
</div>
</section>
<section id="get-list-of-queues">
<h3>Get list of queues<a class="headerlink" href="#get-list-of-queues" title="Link to this heading"></a></h3>
<p>Gets the list of created queues.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl --location --request GET &#39;https://api.voipbin.net/v1.0/queues?token=&lt;YOUR_AUTH_TOKEN&gt;&#39;

{
    &quot;result&quot;: [
        {
            &quot;id&quot;: &quot;99bf739a-932f-433c-b1bf-103d33d7e9bb&quot;,
            &quot;name&quot;: &quot;test queue&quot;,
            &quot;detail&quot;: &quot;test queue detail&quot;,
            &quot;routing_method&quot;: &quot;random&quot;,
            &quot;tag_ids&quot;: [
                &quot;d7450dda-21e0-4611-b09a-8d771c50a5e6&quot;
            ],
            &quot;wait_actions&quot;: [
                {
                    &quot;id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
                    &quot;next_id&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,
                    &quot;type&quot;: &quot;talk&quot;,
                    &quot;option&quot;: {
                        &quot;text&quot;: &quot;Hello. This is test queue. Please wait.&quot;,
                        &quot;gender&quot;: &quot;female&quot;,
                        &quot;language&quot;: &quot;en-US&quot;
                    }
                }
            ],
            &quot;wait_timeout&quot;: 100000,
            &quot;service_timeout&quot;: 10000000,
            &quot;wait_queue_call_ids&quot;: [
                &quot;2eb40044-2e5e-4dae-b41e-61968e4febf9&quot;,
                &quot;b0aa4639-fea3-4727-8b86-44667d8f4c27&quot;,
                &quot;ec590f5b-6de5-477b-905b-1833dde213a0&quot;,
                &quot;003e8242-a0ed-4d55-9e4f-59c317c023ad&quot;,
                &quot;467fdfc2-fa2b-40f6-82cf-18dcb4c952c3&quot;,
                &quot;2973648e-5989-4f75-9bda-b356d7a470dc&quot;
            ],
            &quot;service_queue_call_ids&quot;: [],
            &quot;total_incoming_count&quot;: 76,
            &quot;total_serviced_count&quot;: 70,
            &quot;total_abandoned_count&quot;: 21,
            &quot;total_waittime&quot;: 338789,
            &quot;total_service_duration&quot;: 4050690,
            &quot;tm_create&quot;: &quot;2021-12-24 06:33:10.556226&quot;,
            &quot;tm_update&quot;: &quot;2022-02-20 05:30:31.067539&quot;,
            &quot;tm_delete&quot;: &quot;9999-01-01 00:00:00.000000&quot;
        }
    ],
    &quot;next_page_token&quot;: &quot;2021-12-24 06:33:10.556226&quot;
}
</pre></div>
</div>
</section>
</section>
</section>

</main>
                        <nav aria-label="Page navigation" class="py-4 my-5 clearfix font-weight-bold border-top">
    <a class="float-left" href="conference.html" title="Previous">
        <span aria-hidden="true">←&nbsp;</span>Conference
    </a>
    <a class="float-right" href="recording.html" title="Next">
        Recording <span aria-hidden="true">&nbsp;→</span>
    </a>
</nav>
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">Queue</a><ul>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#the-purpose-of-call-queueing">The purpose of call queueing</a></li>
<li><a class="reference internal" href="#how-queue-routing-works">How Queue Routing Works</a></li>
<li><a class="reference internal" href="#queuecall-lifecycle">Queuecall Lifecycle</a></li>
<li><a class="reference internal" href="#agent-searching">Agent Searching</a></li>
<li><a class="reference internal" href="#flow-execution">Flow Execution</a></li>
<li><a class="reference internal" href="#timeout-handling">Timeout Handling</a></li>
<li><a class="reference internal" href="#queue-metrics-and-tracking">Queue Metrics and Tracking</a></li>
<li><a class="reference internal" href="#when-no-agents-are-available">When No Agents Are Available</a></li>
<li><a class="reference internal" href="#conference-bridge-architecture">Conference Bridge Architecture</a></li>
<li><a class="reference internal" href="#common-queue-scenarios">Common Queue Scenarios</a></li>
<li><a class="reference internal" href="#best-practices">Best Practices</a></li>
</ul>
</li>
<li><a class="reference internal" href="#queue-struct-queue">Queue</a><ul>
<li><a class="reference internal" href="#queue-struct-queue-queue">Queue</a></li>
<li><a class="reference internal" href="#routing-method">Routing Method</a></li>
</ul>
</li>
<li><a class="reference internal" href="#queuecall">Queuecall</a><ul>
<li><a class="reference internal" href="#queue-struct-queuecall-queuecall">Queuecall</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reference-type">Reference type</a></li>
<li><a class="reference internal" href="#status">Status</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tutorial">Tutorial</a><ul>
<li><a class="reference internal" href="#create-a-new-queue">Create a new queue</a></li>
<li><a class="reference internal" href="#get-list-of-queues">Get list of queues</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
                <nav aria-label="Footer">
                    <ul class="nav justify-content-center mb-2">
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="http://voipbin.net">About Us</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="http://voipbin.net">Contact</a></li>
                        
                    </ul>
                </nav>
            
            <div class="text-center">
                    &copy; Copyright 2026, VoIPBIN
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a class="text-white" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.5.0
                    </a>
                    and
                    <a class="text-white" href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 9.1.0
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=fd6eb6e6"></script>
        <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="_static/dist/theme.js"></script>
        <script type="text/javascript" src="_static/dist/vendor.js"></script>
        <script type="text/javascript" src="_static/searchtools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>