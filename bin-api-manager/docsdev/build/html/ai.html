<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="./">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>AI &mdash; voipbin  documentation</title>
    
    <link rel="stylesheet" type="text/css" href="_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8e8a900e" />
      <link rel="stylesheet" type="text/css" href="_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="genindex.html" />
            <link rel="search" title="Search" href="search.html" />
            <link rel="top" title="voipbin  documentation" href="#" />
            <link rel="next" title="Campaign" href="campaign.html" />
            <link rel="prev" title="Conversation" href="conversation.html" />
    </head>
<body>
    <script type="text/javascript" src="_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="intro.html"
                        title="voipbin"
                        class="logo navbar-brand"
                    >
                        <img src="_static/images/voipbin-high-resolution-logo-white-transparent.png" width="45" height="80" alt="voipbin"
                            class="logo-img"
                        />
                        VoIPBin Documentation
                    </a>
                
                
                    <div class="collapse navbar-collapse justify-content-end">
                        <ul class="navbar-nav">
                            
                                
                                
                                <li class="nav-item"><a class="nav-link"  href="http://voipbin.net">Project</a></li>
                            
                                
                                
                                <li class="nav-item"><a class="nav-link"  href="https://admin.voipbin.net">Admin</a></li>
                            
                        </ul>
                    </div>
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="accesskey.html">Accesskey</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdk.html">SDK(Software Development Kit)</a></li>
<li class="toctree-l1"><a class="reference internal" href="restful_api.html">RESTful API(Application Programming Interface)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="flow.html">Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow.html#activeflow">Activeflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="variable.html">Variable</a></li>
<li class="toctree-l1"><a class="reference internal" href="webhook.html">Webhook</a></li>
<li class="toctree-l1"><a class="reference internal" href="common.html">Common</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Voice &amp; Real-Time</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="call.html">Call</a></li>
<li class="toctree-l1"><a class="reference internal" href="conference.html">Conference</a></li>
<li class="toctree-l1"><a class="reference internal" href="queue.html">Queue</a></li>
<li class="toctree-l1"><a class="reference internal" href="recording.html">Recording</a></li>
<li class="toctree-l1"><a class="reference internal" href="transcribe.html">Transcribe</a></li>
<li class="toctree-l1"><a class="reference internal" href="mediastream.html">Mediastream</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Messaging</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="message.html">Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.html">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="chat.html">Chat</a></li>
<li class="toctree-l1"><a class="reference internal" href="conversation.html">Conversation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AI &amp; Automation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="campaign.html">Campaign</a></li>
<li class="toctree-l1"><a class="reference internal" href="outdial.html">Outdial</a></li>
<li class="toctree-l1"><a class="reference internal" href="outplan.html">Outplan</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources &amp; Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="agent.html">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="customer.html">Customer</a></li>
<li class="toctree-l1"><a class="reference internal" href="billing_account.html">Billing Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="tag.html">Tag</a></li>
<li class="toctree-l1"><a class="reference internal" href="provider.html">Provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="route.html">Route</a></li>
<li class="toctree-l1"><a class="reference internal" href="extension.html">Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="trunk.html">Trunk</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Architecture (Deep Dive)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="websocket.html">Websocket</a></li>
<li class="toctree-l1"><a class="reference internal" href="talk.html">Talk</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help &amp; Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">AI</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
    <a class="btn btn-sm btn-light text-decoration-none" href="_sources/ai.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="ai">
<h1>AI<a class="headerlink" href="#ai" title="Link to this heading"></a></h1>
<section id="overview">
<span id="ai-overview"></span><h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>VoIPBIN’s AI is a built-in AI agent that enables automated, intelligent voice interactions during live calls. The AI integrates with multiple LLM providers (OpenAI, Anthropic, Gemini, and 15+ others), real-time speech processing, and tool functions to create dynamic, interactive voice experiences.</p>
</section>
<section id="how-it-works">
<h2>How it works<a class="headerlink" href="#how-it-works" title="Link to this heading"></a></h2>
<section id="architecture-overview">
<h3>Architecture Overview<a class="headerlink" href="#architecture-overview" title="Link to this heading"></a></h3>
<p>VoIPBIN’s AI system consists of two main components working together: the AI Manager (Go) for orchestration and the Pipecat Manager (Python) for real-time audio processing.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+-----------------------------------------------------------------------+</span>
<span class="o">|</span>                        <span class="n">VoIPBIN</span> <span class="n">AI</span> <span class="n">Architecture</span>                        <span class="o">|</span>
<span class="o">+-----------------------------------------------------------------------+</span>

                             <span class="o">+-------------------+</span>
                             <span class="o">|</span>   <span class="n">Flow</span> <span class="n">Manager</span>    <span class="o">|</span>
                             <span class="o">|</span>  <span class="p">(</span><span class="n">ai_talk</span> <span class="n">action</span><span class="p">)</span> <span class="o">|</span>
                             <span class="o">+--------+----------+</span>
                                      <span class="o">|</span>
                                      <span class="o">|</span> <span class="n">Start</span> <span class="n">AI</span> <span class="n">session</span>
                                      <span class="n">v</span>
<span class="o">+-------------------+</span>        <span class="o">+-------------------+</span>        <span class="o">+-------------------+</span>
<span class="o">|</span>                   <span class="o">|</span>        <span class="o">|</span>                   <span class="o">|</span>        <span class="o">|</span>                   <span class="o">|</span>
<span class="o">|</span>    <span class="n">Asterisk</span>       <span class="o">|&lt;------&gt;|</span>   <span class="n">AI</span> <span class="n">Manager</span>      <span class="o">|&lt;------&gt;|</span>  <span class="n">Pipecat</span> <span class="n">Manager</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="p">(</span><span class="mi">8</span><span class="n">kHz</span> <span class="n">audio</span><span class="p">)</span>     <span class="o">|</span>  <span class="n">HTTP</span>  <span class="o">|</span>     <span class="p">(</span><span class="n">Go</span><span class="p">)</span>          <span class="o">|</span> <span class="n">RMQ</span><span class="o">/</span><span class="n">WS</span> <span class="o">|</span>    <span class="p">(</span><span class="n">Python</span><span class="p">)</span>       <span class="o">|</span>
<span class="o">|</span>                   <span class="o">|</span>        <span class="o">|</span>                   <span class="o">|</span>        <span class="o">|</span>                   <span class="o">|</span>
<span class="o">+-------------------+</span>        <span class="o">+--------+----------+</span>        <span class="o">+--------+----------+</span>
       <span class="o">^</span>                              <span class="o">|</span>                            <span class="o">|</span>
       <span class="o">|</span>                              <span class="o">|</span>                            <span class="o">|</span>
       <span class="o">|</span> <span class="n">RTP</span> <span class="n">audio</span>                    <span class="o">|</span> <span class="n">Tool</span>                       <span class="o">|</span> <span class="n">Real</span><span class="o">-</span><span class="n">time</span>
       <span class="o">|</span>                              <span class="o">|</span> <span class="n">execution</span>                  <span class="o">|</span> <span class="n">processing</span>
       <span class="n">v</span>                              <span class="n">v</span>                            <span class="n">v</span>
<span class="o">+-------------------+</span>        <span class="o">+-------------------+</span>        <span class="o">+-------------------+</span>
<span class="o">|</span>      <span class="n">Caller</span>       <span class="o">|</span>        <span class="o">|</span> <span class="n">call</span><span class="o">-</span><span class="n">manager</span>      <span class="o">|</span>        <span class="o">|</span>    <span class="n">STT</span> <span class="o">/</span> <span class="n">LLM</span>      <span class="o">|</span>
<span class="o">|</span>    <span class="p">(</span><span class="n">Phone</span><span class="p">)</span>        <span class="o">|</span>        <span class="o">|</span> <span class="n">message</span><span class="o">-</span><span class="n">manager</span>   <span class="o">|</span>        <span class="o">|</span>      <span class="o">/</span> <span class="n">TTS</span>        <span class="o">|</span>
<span class="o">|</span>                   <span class="o">|</span>        <span class="o">|</span> <span class="n">email</span><span class="o">-</span><span class="n">manager</span>     <span class="o">|</span>        <span class="o">|</span>   <span class="n">Providers</span>       <span class="o">|</span>
<span class="o">+-------------------+</span>        <span class="o">+-------------------+</span>        <span class="o">+-------------------+</span>
</pre></div>
</div>
</section>
<section id="audio-flow">
<h3>Audio Flow<a class="headerlink" href="#audio-flow" title="Link to this heading"></a></h3>
<p>Audio flows through the system with sample rate conversion between components:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+-----------------------------------------------------------------------+</span>
<span class="o">|</span>                           <span class="n">Audio</span> <span class="n">Flow</span>                                  <span class="o">|</span>
<span class="o">+-----------------------------------------------------------------------+</span>

<span class="n">Caller</span> <span class="p">(</span><span class="n">Phone</span><span class="p">)</span>                    <span class="n">VoIPBIN</span>                    <span class="n">AI</span> <span class="n">Providers</span>
     <span class="o">|</span>                               <span class="o">|</span>                           <span class="o">|</span>
     <span class="o">|</span>  <span class="n">RTP</span> <span class="p">(</span><span class="mi">8</span><span class="n">kHz</span> <span class="n">PCM</span><span class="p">)</span>               <span class="o">|</span>                           <span class="o">|</span>
     <span class="o">+------------------------------&gt;|</span>                           <span class="o">|</span>
     <span class="o">|</span>                               <span class="o">|</span>                           <span class="o">|</span>
     <span class="o">|</span>              <span class="o">+----------------+----------------+</span>          <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                                 <span class="o">|</span>          <span class="o">|</span>
     <span class="o">|</span>              <span class="n">v</span>                                 <span class="n">v</span>          <span class="o">|</span>
     <span class="o">|</span>      <span class="o">+---------------+</span>              <span class="o">+------------------+</span>  <span class="o">|</span>
     <span class="o">|</span>      <span class="o">|</span>   <span class="n">Asterisk</span>    <span class="o">|</span>              <span class="o">|</span>     <span class="n">Pipecat</span>      <span class="o">|</span>  <span class="o">|</span>
     <span class="o">|</span>      <span class="o">|</span>   <span class="p">(</span><span class="mi">8</span><span class="n">kHz</span><span class="p">)</span>      <span class="o">|&lt;------------&gt;|</span>     <span class="p">(</span><span class="mi">16</span><span class="n">kHz</span><span class="p">)</span>      <span class="o">|</span>  <span class="o">|</span>
     <span class="o">|</span>      <span class="o">+---------------+</span>   <span class="n">WebSocket</span>  <span class="o">+------------------+</span>  <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>          <span class="n">audio</span> <span class="n">stream</span>       <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                             <span class="n">v</span>              <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">+------------------+</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">|</span>  <span class="n">Sample</span> <span class="n">Rate</span>     <span class="o">|</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">|</span>  <span class="n">Conversion</span>      <span class="o">|</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">|</span>  <span class="mi">8</span><span class="n">kHz</span> <span class="o">&lt;-&gt;</span> <span class="mi">16</span><span class="n">kHz</span>  <span class="o">|</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">+--------+---------+</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                             <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                             <span class="n">v</span>              <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">+------------------+</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">|</span>      <span class="n">STT</span>         <span class="o">|---&gt;|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">|</span>   <span class="p">(</span><span class="n">Deepgram</span><span class="p">)</span>     <span class="o">|</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">+------------------+</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                             <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                             <span class="o">|</span> <span class="n">Text</span>         <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                             <span class="n">v</span>              <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">+------------------+</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">|</span>      <span class="n">LLM</span>         <span class="o">|---&gt;|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">|</span>   <span class="p">(</span><span class="n">OpenAI</span><span class="o">/</span><span class="n">etc</span><span class="p">)</span>   <span class="o">|</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">+------------------+</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                             <span class="o">|</span>              <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                             <span class="o">|</span> <span class="n">Response</span>     <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                             <span class="n">v</span>              <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">+------------------+</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|&lt;-------------------|</span>      <span class="n">TTS</span>         <span class="o">|&lt;---|</span>
     <span class="o">|</span>              <span class="o">|</span>   <span class="n">Audio</span> <span class="n">response</span>   <span class="o">|</span>  <span class="p">(</span><span class="n">ElevenLabs</span><span class="p">)</span>    <span class="o">|</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                    <span class="o">+------------------+</span>    <span class="o">|</span>
     <span class="o">|</span>              <span class="o">|</span>                                            <span class="o">|</span>
     <span class="o">|&lt;-------------+</span>                                            <span class="o">|</span>
     <span class="o">|</span>  <span class="n">RTP</span> <span class="n">audio</span> <span class="n">playback</span>                                       <span class="o">|</span>
     <span class="o">|</span>                                                           <span class="o">|</span>
</pre></div>
</div>
</section>
<section id="ai-call-lifecycle">
<h3>AI Call Lifecycle<a class="headerlink" href="#ai-call-lifecycle" title="Link to this heading"></a></h3>
<p>An AI call goes through several stages from initialization to termination:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+-----------------------------------------------------------------------+</span>
<span class="o">|</span>                        <span class="n">AI</span> <span class="n">Call</span> <span class="n">Lifecycle</span>                              <span class="o">|</span>
<span class="o">+-----------------------------------------------------------------------+</span>

<span class="mf">1.</span> <span class="n">INITIALIZATION</span>
   <span class="o">+-------------------+</span>        <span class="o">+-------------------+</span>
   <span class="o">|</span>   <span class="n">Flow</span> <span class="n">Manager</span>    <span class="o">|-------&gt;|</span>   <span class="n">AI</span> <span class="n">Manager</span>      <span class="o">|</span>
   <span class="o">|</span>   <span class="p">(</span><span class="n">ai_talk</span><span class="p">)</span>       <span class="o">|</span>        <span class="o">|</span>   <span class="n">Start</span> <span class="n">AIcall</span>    <span class="o">|</span>
   <span class="o">+-------------------+</span>        <span class="o">+--------+----------+</span>
                                         <span class="o">|</span>
                                         <span class="n">v</span>
   <span class="o">+-------------------+</span>        <span class="o">+-------------------+</span>
   <span class="o">|</span>   <span class="n">Pipecat</span>         <span class="o">|&lt;-------|</span>   <span class="n">Creates</span> <span class="n">session</span> <span class="o">|</span>
   <span class="o">|</span>   <span class="n">Initializing</span>    <span class="o">|</span>        <span class="o">|</span>   <span class="ow">in</span> <span class="n">database</span>     <span class="o">|</span>
   <span class="o">+-------------------+</span>        <span class="o">+-------------------+</span>

<span class="mf">2.</span> <span class="n">PROCESSING</span> <span class="p">(</span><span class="n">Real</span><span class="o">-</span><span class="n">time</span> <span class="n">conversation</span><span class="p">)</span>
   <span class="o">+-------------------+</span>        <span class="o">+-------------------+</span>
   <span class="o">|</span>     <span class="n">Caller</span>        <span class="o">|&lt;------&gt;|</span>    <span class="n">Pipecat</span>        <span class="o">|</span>
   <span class="o">|</span>   <span class="n">speaks</span><span class="o">/</span><span class="n">listens</span>  <span class="o">|</span>        <span class="o">|</span>  <span class="n">STT</span><span class="o">-&gt;</span><span class="n">LLM</span><span class="o">-&gt;</span><span class="n">TTS</span>    <span class="o">|</span>
   <span class="o">+-------------------+</span>        <span class="o">+-------------------+</span>
          <span class="o">^</span>                            <span class="o">|</span>
          <span class="o">|</span>                            <span class="n">v</span>
          <span class="o">|</span>                   <span class="o">+-------------------+</span>
          <span class="o">|</span>                   <span class="o">|</span>  <span class="n">Tool</span> <span class="n">Execution</span>   <span class="o">|</span>
          <span class="o">|</span>                   <span class="o">|</span>  <span class="p">(</span><span class="k">if</span> <span class="n">triggered</span><span class="p">)</span>   <span class="o">|</span>
          <span class="o">|</span>                   <span class="o">+-------------------+</span>
          <span class="o">|</span>                            <span class="o">|</span>
          <span class="o">+----------------------------+</span>

<span class="mf">3.</span> <span class="n">TERMINATION</span>
   <span class="o">+-------------------+</span>        <span class="o">+-------------------+</span>
   <span class="o">|</span>   <span class="n">stop_service</span>    <span class="o">|-------&gt;|</span>   <span class="n">AI</span> <span class="n">Manager</span>      <span class="o">|</span>
   <span class="o">|</span>   <span class="ow">or</span> <span class="n">hangup</span>       <span class="o">|</span>        <span class="o">|</span>   <span class="n">Terminate</span>       <span class="o">|</span>
   <span class="o">+-------------------+</span>        <span class="o">+--------+----------+</span>
                                         <span class="o">|</span>
                                         <span class="n">v</span>
                                <span class="o">+-------------------+</span>
                                <span class="o">|</span>  <span class="n">Cleanup</span> <span class="n">session</span>  <span class="o">|</span>
                                <span class="o">|</span>  <span class="n">Save</span> <span class="n">messages</span>    <span class="o">|</span>
                                <span class="o">+-------------------+</span>
</pre></div>
</div>
</section>
<section id="action-component">
<h3>Action Component<a class="headerlink" href="#action-component" title="Link to this heading"></a></h3>
<p>The AI is integrated as a configurable action within VoIPBIN flows. When a call reaches an AI action, the system triggers the AI to generate responses based on the provided prompt.</p>
<img alt="AI component in action builder" class="align-center" src="_images/ai_overview_overview.png" />
</section>
<section id="tts-stt-ai-engine">
<h3>TTS/STT + AI Engine<a class="headerlink" href="#tts-stt-ai-engine" title="Link to this heading"></a></h3>
<p>VoIPBIN’s AI uses Speech-to-Text (STT) to convert spoken words into text, processes through the LLM, and Text-to-Speech (TTS) converts responses back to audio. This happens in real-time for seamless conversations.</p>
<img alt="AI implementation using TTS/STT + AI Engine" class="align-center" src="_images/ai_overview_stt_tts.png" />
</section>
<section id="voice-detection-and-play-interruption">
<h3>Voice Detection and Play Interruption<a class="headerlink" href="#voice-detection-and-play-interruption" title="Link to this heading"></a></h3>
<p>VoIPBIN incorporates voice detection for natural conversational flow. While the AI is speaking (TTS playback), if the system detects the caller’s voice, it immediately stops TTS and routes the caller’s speech to STT and then to the LLM. This ensures caller input is prioritized, enabling dynamic interaction that resembles real conversation.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+-----------------------------------------------------------------------+</span>
<span class="o">|</span>                       <span class="n">Voice</span> <span class="n">Interruption</span> <span class="n">Flow</span>                         <span class="o">|</span>
<span class="o">+-----------------------------------------------------------------------+</span>

     <span class="n">AI</span> <span class="n">Speaking</span>                 <span class="n">Caller</span> <span class="n">Interrupts</span>            <span class="n">AI</span> <span class="n">Listens</span>
          <span class="o">|</span>                            <span class="o">|</span>                          <span class="o">|</span>
<span class="o">+---------</span><span class="n">v</span><span class="o">---------+</span>                  <span class="o">|</span>                          <span class="o">|</span>
<span class="o">|</span>  <span class="n">TTS</span> <span class="n">audio</span> <span class="n">plays</span>  <span class="o">|</span>                  <span class="o">|</span>                          <span class="o">|</span>
<span class="o">|</span>  <span class="s2">&quot;I can help you  |                  |                          |</span>
<span class="o">|</span>   <span class="k">with</span> <span class="n">that</span><span class="o">...</span><span class="s2">&quot;   |                  |                          |</span>
<span class="o">+-------------------+</span>                  <span class="o">|</span>                          <span class="o">|</span>
          <span class="o">|</span>                            <span class="o">|</span>                          <span class="o">|</span>
          <span class="o">|</span>  <span class="o">&lt;----</span> <span class="n">Voice</span> <span class="n">detected</span> <span class="o">----&gt;|</span>                          <span class="o">|</span>
          <span class="o">|</span>                            <span class="o">|</span>                          <span class="o">|</span>
<span class="o">+---------</span><span class="n">v</span><span class="o">---------+</span>                  <span class="o">|</span>                          <span class="o">|</span>
<span class="o">|</span>  <span class="n">STOP</span> <span class="n">TTS</span>         <span class="o">|</span>                  <span class="o">|</span>                          <span class="o">|</span>
<span class="o">|</span>  <span class="n">immediately</span>      <span class="o">|</span>                  <span class="o">|</span>                          <span class="o">|</span>
<span class="o">+-------------------+</span>                  <span class="o">|</span>                          <span class="o">|</span>
          <span class="o">|</span>                            <span class="o">|</span>                          <span class="o">|</span>
          <span class="o">+---------------------------&gt;|</span>                          <span class="o">|</span>
                                       <span class="o">|</span>                          <span class="o">|</span>
                              <span class="o">+--------</span><span class="n">v</span><span class="o">--------+</span>                 <span class="o">|</span>
                              <span class="o">|</span> <span class="n">Caller</span> <span class="n">speaks</span><span class="p">:</span>  <span class="o">|</span>                 <span class="o">|</span>
                              <span class="o">|</span> <span class="s2">&quot;Actually, I    |                 |</span>
                              <span class="o">|</span>  <span class="n">need</span> <span class="n">help</span> <span class="k">with</span> <span class="o">|</span>                 <span class="o">|</span>
                              <span class="o">|</span>  <span class="n">something</span> <span class="k">else</span><span class="s2">&quot;|                 |</span>
                              <span class="o">+--------+--------+</span>                 <span class="o">|</span>
                                       <span class="o">|</span>                          <span class="o">|</span>
                                       <span class="o">|</span> <span class="n">STT</span> <span class="o">-&gt;</span> <span class="n">LLM</span>               <span class="o">|</span>
                                       <span class="o">|</span>                          <span class="o">|</span>
                                       <span class="o">+-------------------------&gt;|</span>
                                                          <span class="o">+-------</span><span class="n">v</span><span class="o">-------+</span>
                                                          <span class="o">|</span> <span class="n">AI</span> <span class="n">processes</span>  <span class="o">|</span>
                                                          <span class="o">|</span> <span class="n">new</span> <span class="n">request</span>   <span class="o">|</span>
                                                          <span class="o">+---------------+</span>
</pre></div>
</div>
</section>
<section id="context-retention">
<h3>Context Retention<a class="headerlink" href="#context-retention" title="Link to this heading"></a></h3>
<p>VoIPBIN’s AI supports context saving. During a conversation, the AI remembers prior exchanges, allowing it to maintain continuity and respond based on earlier parts of the interaction. This provides a more natural and human-like dialogue experience.</p>
</section>
<section id="multilingual-support">
<h3>Multilingual Support<a class="headerlink" href="#multilingual-support" title="Link to this heading"></a></h3>
<p>VoIPBIN’s AI supports multiple languages. See supported languages: <a class="reference internal" href="transcribe_overview.html#transcribe-overview-supported-languages"><span class="std std-ref">supported languages</span></a>.</p>
</section>
</section>
<section id="tool-functions">
<h2>Tool Functions<a class="headerlink" href="#tool-functions" title="Link to this heading"></a></h2>
<p>AI tool functions enable the AI to take actions during conversations, such as transferring calls, sending messages, or managing the conversation flow.</p>
<section id="tool-execution-architecture">
<h3>Tool Execution Architecture<a class="headerlink" href="#tool-execution-architecture" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+-----------------------------------------------------------------------+</span>
<span class="o">|</span>                      <span class="n">Tool</span> <span class="n">Execution</span> <span class="n">Flow</span>                              <span class="o">|</span>
<span class="o">+-----------------------------------------------------------------------+</span>

<span class="n">Step</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Caller</span> <span class="n">makes</span> <span class="n">request</span>
<span class="o">+-------------------+</span>
<span class="o">|</span> <span class="s2">&quot;Transfer me to   |</span>
<span class="o">|</span>  <span class="n">sales</span> <span class="n">please</span><span class="s2">&quot;    |</span>
<span class="o">+--------+----------+</span>
         <span class="o">|</span>
         <span class="n">v</span>
<span class="n">Step</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Speech</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">Text</span>
<span class="o">+-------------------+</span>
<span class="o">|</span> <span class="n">STT</span> <span class="n">converts</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">audio</span> <span class="n">to</span> <span class="n">text</span>     <span class="o">|</span>
<span class="o">+--------+----------+</span>
         <span class="o">|</span>
         <span class="n">v</span>
<span class="n">Step</span> <span class="mi">3</span><span class="p">:</span> <span class="n">LLM</span> <span class="n">Processing</span>
<span class="o">+-------------------+</span>
<span class="o">|</span> <span class="n">LLM</span> <span class="n">detects</span> <span class="n">intent</span><span class="o">|</span>
<span class="o">|</span> <span class="n">Generates</span><span class="p">:</span>        <span class="o">|</span>
<span class="o">|</span> <span class="n">function_call</span><span class="p">:</span>    <span class="o">|</span>
<span class="o">|</span>   <span class="n">connect_call</span>    <span class="o">|</span>
<span class="o">+--------+----------+</span>
         <span class="o">|</span>
         <span class="n">v</span>
<span class="n">Step</span> <span class="mi">4</span><span class="p">:</span> <span class="n">Tool</span> <span class="n">Execution</span>
<span class="o">+-------------------+</span>        <span class="o">+-------------------+</span>
<span class="o">|</span> <span class="n">Python</span> <span class="n">Pipecat</span>    <span class="o">|-------&gt;|</span>   <span class="n">Go</span> <span class="n">AIcallHandler</span><span class="o">|</span>
<span class="o">|</span> <span class="n">sends</span> <span class="n">HTTP</span> <span class="n">POST</span>   <span class="o">|</span>        <span class="o">|</span>   <span class="n">ToolHandle</span><span class="p">()</span>    <span class="o">|</span>
<span class="o">+-------------------+</span>        <span class="o">+--------+----------+</span>
                                      <span class="o">|</span>
                                      <span class="n">v</span>
                             <span class="o">+-------------------+</span>
                             <span class="o">|</span> <span class="n">Execute</span> <span class="n">via</span>       <span class="o">|</span>
                             <span class="o">|</span> <span class="n">call</span><span class="o">-</span><span class="n">manager</span>      <span class="o">|</span>
                             <span class="o">+--------+----------+</span>
                                      <span class="o">|</span>
                                      <span class="n">v</span>
<span class="n">Step</span> <span class="mi">5</span><span class="p">:</span> <span class="n">Result</span> <span class="n">returned</span>
<span class="o">+-------------------+</span>        <span class="o">+-------------------+</span>
<span class="o">|</span> <span class="n">Pipecat</span> <span class="n">receives</span>  <span class="o">|&lt;-------|</span>  <span class="n">Tool</span> <span class="n">result</span>      <span class="o">|</span>
<span class="o">|</span> <span class="n">success</span><span class="o">/</span><span class="n">failure</span>   <span class="o">|</span>        <span class="o">|</span>  <span class="n">returned</span>         <span class="o">|</span>
<span class="o">+--------+----------+</span>        <span class="o">+-------------------+</span>
         <span class="o">|</span>
         <span class="n">v</span>
<span class="n">Step</span> <span class="mi">6</span><span class="p">:</span> <span class="n">AI</span> <span class="n">Response</span>
<span class="o">+-------------------+</span>
<span class="o">|</span> <span class="n">LLM</span> <span class="n">generates</span>     <span class="o">|</span>
<span class="o">|</span> <span class="s2">&quot;Connecting you   |</span>
<span class="o">|</span>  <span class="n">to</span> <span class="n">sales</span> <span class="n">now</span><span class="o">...</span><span class="s2">&quot; |</span>
<span class="o">+--------+----------+</span>
         <span class="o">|</span>
         <span class="n">v</span>
<span class="n">Step</span> <span class="mi">7</span><span class="p">:</span> <span class="n">TTS</span> <span class="n">Playback</span>
<span class="o">+-------------------+</span>
<span class="o">|</span> <span class="n">TTS</span> <span class="n">converts</span> <span class="n">to</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">audio</span><span class="p">,</span> <span class="n">plays</span> <span class="n">to</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">caller</span>            <span class="o">|</span>
<span class="o">+-------------------+</span>
</pre></div>
</div>
</section>
<section id="available-tools">
<h3>Available Tools<a class="headerlink" href="#available-tools" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Tool</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>connect_call</p></td>
<td><p>Transfer or connect to another endpoint</p></td>
</tr>
<tr class="row-odd"><td><p>send_email</p></td>
<td><p>Send an email message</p></td>
</tr>
<tr class="row-even"><td><p>send_message</p></td>
<td><p>Send an SMS text message</p></td>
</tr>
<tr class="row-odd"><td><p>stop_media</p></td>
<td><p>Stop currently playing media</p></td>
</tr>
<tr class="row-even"><td><p>stop_service</p></td>
<td><p>End AI conversation (soft stop, flow continues)</p></td>
</tr>
<tr class="row-odd"><td><p>stop_flow</p></td>
<td><p>Terminate entire flow (hard stop, call ends)</p></td>
</tr>
<tr class="row-even"><td><p>set_variables</p></td>
<td><p>Save data to flow context</p></td>
</tr>
<tr class="row-odd"><td><p>get_variables</p></td>
<td><p>Retrieve data from flow context</p></td>
</tr>
<tr class="row-even"><td><p>get_aicall_messages</p></td>
<td><p>Get message history from an AI call</p></td>
</tr>
</tbody>
</table>
<p>For detailed documentation on each tool, see <a class="reference internal" href="ai_struct_tool.html#ai-struct-tool"><span class="std std-ref">Tool Functions</span></a>.</p>
</section>
<section id="configuring-tools">
<h3>Configuring Tools<a class="headerlink" href="#configuring-tools" title="Link to this heading"></a></h3>
<p>Tools are configured per-AI using the <code class="docutils literal notranslate"><span class="pre">tool_names</span></code> field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Enable</span> <span class="nb">all</span> <span class="n">tools</span>
<span class="s2">&quot;tool_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;all&quot;</span><span class="p">]</span>

<span class="o">//</span> <span class="n">Enable</span> <span class="n">specific</span> <span class="n">tools</span> <span class="n">only</span>
<span class="s2">&quot;tool_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;connect_call&quot;</span><span class="p">,</span> <span class="s2">&quot;send_email&quot;</span><span class="p">,</span> <span class="s2">&quot;stop_service&quot;</span><span class="p">]</span>

<span class="o">//</span> <span class="n">Disable</span> <span class="nb">all</span> <span class="n">tools</span> <span class="p">(</span><span class="n">conversation</span><span class="o">-</span><span class="n">only</span><span class="p">)</span>
<span class="s2">&quot;tool_names&quot;</span><span class="p">:</span> <span class="p">[]</span>
</pre></div>
</div>
</section>
</section>
<section id="using-the-ai">
<h2>Using the AI<a class="headerlink" href="#using-the-ai" title="Link to this heading"></a></h2>
<section id="initial-prompt">
<h3>Initial Prompt<a class="headerlink" href="#initial-prompt" title="Link to this heading"></a></h3>
<p>The initial prompt serves as the foundation for the AI’s behavior. A well-crafted prompt ensures accurate and relevant responses. There is no enforced limit to prompt length, but we recommend keeping this confidential to ensure consistent performance and security.</p>
<section id="example-prompt">
<h4>Example Prompt:<a class="headerlink" href="#example-prompt" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pretend</span> <span class="n">you</span> <span class="n">are</span> <span class="n">an</span> <span class="n">expert</span> <span class="n">customer</span> <span class="n">service</span> <span class="n">agent</span><span class="o">.</span>

<span class="n">Please</span> <span class="n">respond</span> <span class="n">kindly</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="ai-talk">
<h2>AI Talk<a class="headerlink" href="#ai-talk" title="Link to this heading"></a></h2>
<p><strong>AI Talk</strong> enables real-time conversational AI with voice in VoIPBIN, powered by high-quality TTS engines (ElevenLabs, Deepgram, OpenAI, etc.) for natural-sounding speech.</p>
<a class="reference internal image-reference" href="_images/ai_overview_ai_talk.png"><img alt="AI Talk component in action builder" class="align-center" src="_images/ai_overview_ai_talk.png" style="width: 300px;" />
</a>
<section id="key-features">
<h3>Key Features<a class="headerlink" href="#key-features" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Real-time Voice Interaction</strong>: AI generates responses in real-time based on user input and delivers them as speech.</p></li>
<li><p><strong>Interruption Detection &amp; Listening</strong>: If the caller speaks while the AI is talking, the system immediately <strong>stops the AI’s speech</strong> and captures the user’s voice via STT. This ensures smooth, continuous conversation flow.</p></li>
<li><p><strong>Low Latency Response</strong>: For longer prompts, AI Talk generates and plays speech in smaller chunks, <strong>reducing perceived response time</strong> for the user.</p></li>
<li><p><strong>Multiple TTS/STT Providers</strong>: Support for ElevenLabs, Deepgram, OpenAI, and many other providers.</p></li>
<li><p><strong>Tool Function Integration</strong>: AI can perform actions like call transfers, sending messages, and managing variables during conversation.</p></li>
</ul>
</section>
<section id="built-in-elevenlabs-voice-ids">
<h3>Built-in ElevenLabs Voice IDs<a class="headerlink" href="#built-in-elevenlabs-voice-ids" title="Link to this heading"></a></h3>
<p>VoIPBIN uses a predefined set of voice IDs for various languages and genders. Here are the default ElevenLabs Voice IDs currently in use:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Language</p></th>
<th class="head"><p>Male Voice ID (Name)</p></th>
<th class="head"><p>Female Voice ID (Name)</p></th>
<th class="head"><p>Neutral Voice ID (Name)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>English (Default)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">21m00Tcm4TlvDq8ikWAM</span></code> (Adam)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">EXAVITQu4vr4xnSDxMaL</span></code> (Rachel)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">EXAVITQu4vr4xnSDxMaL</span></code> (Rachel)</p></td>
</tr>
<tr class="row-odd"><td><p>Japanese</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Mv8AjrYZCBkdsmDHNwcB</span></code> (Ishibashi)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PmgfHCGeS5b7sH90BOOJ</span></code> (Fumi)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PmgfHCGeS5b7sH90BOOJ</span></code> (Fumi)</p></td>
</tr>
<tr class="row-even"><td><p>Chinese</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MI36FIkp9wRP7cpWKPTl</span></code> (Evan)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ZL9dtgFhmkTzAHUUtQL8</span></code> (Xiao)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ZL9dtgFhmkTzAHUUtQL8</span></code> (Xiao)</p></td>
</tr>
<tr class="row-odd"><td><p>German</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">uM8iMoqaSe1eDaJiWfxf</span></code> (Felix)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nF7t9cuYo0u3kuVI9q4B</span></code> (Dana)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nF7t9cuYo0u3kuVI9q4B</span></code> (Dana)</p></td>
</tr>
<tr class="row-even"><td><p>French</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">IPgYtHTNLjC7Bq7IPHrm</span></code> (Alexandre)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SmWACbi37pETyxxMhSpc</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SmWACbi37pETyxxMhSpc</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Hindi</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">IvLWq57RKibBrqZGpQrC</span></code> (Leo)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MF4J4IDTRo0AxOO4dpFR</span></code> (Devi)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MF4J4IDTRo0AxOO4dpFR</span></code> (Devi)</p></td>
</tr>
<tr class="row-even"><td><p>Korean</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nbrxrAz3eYm9NgojrmFK</span></code> (Minjoon)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AW5wrnG1jVizOYY7R1Oo</span></code> (Jiyoung)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AW5wrnG1jVizOYY7R1Oo</span></code> (Jiyoung)</p></td>
</tr>
<tr class="row-odd"><td><p>Italian</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">iLVmqjzCGGvqtMCk6vVQ</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b8jhBTcGAq4kQGWmKprT</span></code> (Sami)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b8jhBTcGAq4kQGWmKprT</span></code> (Sami)</p></td>
</tr>
<tr class="row-even"><td><p>Spanish (Spain)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">JjHBC66wF58p4ogebCNA</span></code> (Eduardo)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">UOIqAnmS11Reiei1Ytkc</span></code> (Carolina)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">UOIqAnmS11Reiei1Ytkc</span></code> (Carolina)</p></td>
</tr>
<tr class="row-odd"><td><p>Portuguese (Brazil)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NdHRjGnnDKGnnm2c19le</span></code> (Tiago)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CZD4BJ803C6T0alQxsR7</span></code> (Andreia)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CZD4BJ803C6T0alQxsR7</span></code> (Andreia)</p></td>
</tr>
<tr class="row-even"><td><p>Dutch</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">G53Wkf3yrsXvhoQsmslL</span></code> (James)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">YUdpWWny7k5yb4QCeweX</span></code> (Ruth)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">YUdpWWny7k5yb4QCeweX</span></code> (Ruth)</p></td>
</tr>
<tr class="row-odd"><td><p>Russian</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">qJBO8ZmKp4te7NTtYgzz</span></code> (Egor)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ymDCYd8puC7gYjxIamPt</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ymDCYd8puC7gYjxIamPt</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Arabic</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s83SAGdFTflAwJcAV81K</span></code> (Adeeb)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">EXAVITQu4vr4xnSDxMaL</span></code> (Farah)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4wf10lgibMnboGJGCLrP</span></code> (Farah)</p></td>
</tr>
<tr class="row-odd"><td><p>Polish</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">H5xTcsAIeS5RAykjz57a</span></code> (Alex)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">W0sqKm1Sfw1EzlCH14FQ</span></code> (Beata)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">W0sqKm1Sfw1EzlCH14FQ</span></code> (Beata)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="other-elevenlabs-voice-id-options">
<h3>Other ElevenLabs Voice ID Options<a class="headerlink" href="#other-elevenlabs-voice-id-options" title="Link to this heading"></a></h3>
<p>VoIPBIN allows you to personalize the text-to-speech output by specifying a custom ElevenLabs Voice ID. By setting the <em>voipbin.tts.elevenlabs.voice_id</em> variable, you can override the default voice selection.</p>
<blockquote>
<div><p>voipbin.tts.elevenlabs.voice_id: &lt;Your Custom Voice ID&gt;</p>
</div></blockquote>
<p>See how to set the variables <a class="reference internal" href="variable_overview.html#variable-overview"><span class="std std-ref">here</span></a>.</p>
</section>
</section>
<section id="ai-summary">
<h2>AI Summary<a class="headerlink" href="#ai-summary" title="Link to this heading"></a></h2>
<p>The AI Summary feature in VoIPBIN generates structured summaries of call transcriptions, recordings, or conference discussions. It provides a concise summary of key points, decisions, and action items based on the provided transcription source.</p>
<img alt="AI summary component in action builder" class="align-center" src="_images/ai_overview_summary.png" />
<section id="supported-resources">
<h3>Supported Resources<a class="headerlink" href="#supported-resources" title="Link to this heading"></a></h3>
<p>AI summaries work with a single resource at a time. The supported resources are:</p>
<p>Real-time Summary:
* Live call transcription
* Live conference transcription</p>
<p>Non-Real-time Summary:
* Transcribed recordings (post-call)
* Recorded conferences (post-call)</p>
</section>
<section id="choosing-between-real-time-and-non-real-time-summaries">
<h3>Choosing Between Real-time and Non-Real-time Summaries<a class="headerlink" href="#choosing-between-real-time-and-non-real-time-summaries" title="Link to this heading"></a></h3>
<p>Developers must decide whether to use a real-time or non-real-time summary based on their needs:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Use Case</p></th>
<th class="head"><p>Summary Type</p></th>
<th class="head"><p>Recommendation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Live call monitoring</p></td>
<td><p>Real-time</p></td>
<td><p>Use AI summary with a live call transcription</p></td>
</tr>
<tr class="row-odd"><td><p>Live conference insights</p></td>
<td><p>Real-time</p></td>
<td><p>Use AI summary with a live conference transcription</p></td>
</tr>
<tr class="row-even"><td><p>Post-call analysis</p></td>
<td><p>Non-real-time</p></td>
<td><p>Use AI summary with transcribe_id from a completed call</p></td>
</tr>
<tr class="row-odd"><td><p>Recorded conference summary</p></td>
<td><p>Non-real-time</p></td>
<td><p>Use AI summary with recording_id</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ai-summary-behavior">
<h3>AI Summary Behavior<a class="headerlink" href="#ai-summary-behavior" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>The summary action processes only one resource at a time.</p></li>
<li><p>If multiple AI summary actions are used in a flow, each executes independently.</p></li>
<li><p>If an AI summary action is triggered multiple times for the same resource, it only returns the most recent segment.</p></li>
<li><p>In conference calls, the summary is unified across all participants rather than per speaker.</p></li>
</ul>
</section>
<section id="ensuring-full-coverage">
<h3>Ensuring Full Coverage<a class="headerlink" href="#ensuring-full-coverage" title="Link to this heading"></a></h3>
<p>Since starting an AI summary action late in the call results in missing earlier conversations, developers should follow best practices:
* Enable transcribe_start early: This ensures that transcriptions are available even if an AI summary action is triggered later.
* Use transcribe_id instead of call_id: This allows summarizing a full transcription rather than just the latest segment.
* For post-call summaries, use recording_id: This ensures that the full conversation is summarized from the recorded audio.</p>
</section>
</section>
<section id="external-ai-agent-integration">
<h2>External AI Agent Integration<a class="headerlink" href="#external-ai-agent-integration" title="Link to this heading"></a></h2>
<p>For users who prefer to use external AI services, VoIPBIN offers media stream access. This allows third-party AI engines to process voice data directly, enabling deeper customization and advanced AI capabilities.</p>
<section id="mcp-server">
<h3>MCP Server<a class="headerlink" href="#mcp-server" title="Link to this heading"></a></h3>
<p>A recommended open-source implementation is available here:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/nrjchnd/voipbin-mcp">https://github.com/nrjchnd/voipbin-mcp</a></p></li>
</ul>
</section>
</section>
<section id="ai-struct-ai">
<span id="id1"></span><h2>AI<a class="headerlink" href="#ai-struct-ai" title="Link to this heading"></a></h2>
<section id="ai-struct-ai-ai">
<span id="id2"></span><h3>AI<a class="headerlink" href="#ai-struct-ai-ai" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;engine_type&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;engine_model&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;engine_data&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;object&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;engine_key&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;init_prompt&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tts_type&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tts_voice_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;stt_type&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tool_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">],</span>
    <span class="s2">&quot;tm_create&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_update&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_delete&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>id: AI’s unique identifier (UUID).</p></li>
<li><p>customer_id: Customer’s ID who owns this AI configuration.</p></li>
<li><p>name: AI’s display name.</p></li>
<li><p>detail: AI’s description or additional details.</p></li>
<li><p>engine_type: AI’s engine type (reserved for future use).</p></li>
<li><p>engine_model: AI’s LLM model. Format: <code class="docutils literal notranslate"><span class="pre">&lt;provider&gt;.&lt;model&gt;</span></code>. See <a class="reference internal" href="ai_struct_ai.html#ai-struct-ai-engine-model"><span class="std std-ref">Engine Models</span></a>.</p></li>
<li><p>engine_data: Provider-specific configuration data (JSON object).</p></li>
<li><p>engine_key: API key for the LLM provider.</p></li>
<li><p>init_prompt: Initial system prompt that defines the AI’s behavior and persona.</p></li>
<li><p>tts_type: Text-to-Speech provider. See <a class="reference internal" href="ai_struct_ai.html#ai-struct-ai-tts-type"><span class="std std-ref">TTS Types</span></a>.</p></li>
<li><p>tts_voice_id: Voice ID for the selected TTS provider.</p></li>
<li><p>stt_type: Speech-to-Text provider. See <a class="reference internal" href="ai_struct_ai.html#ai-struct-ai-stt-type"><span class="std std-ref">STT Types</span></a>.</p></li>
<li><p>tool_names: List of enabled tool functions. See <a class="reference internal" href="ai_struct_tool.html#ai-struct-tool"><span class="std std-ref">Tool Functions</span></a>.</p></li>
</ul>
<section id="example">
<h4>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;a092c5d9-632c-48d7-b70b-499f2ca084b1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="s2">&quot;5e4a0680-804e-11ec-8477-2fea5968d85b&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Sales Assistant AI&quot;</span><span class="p">,</span>
    <span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;AI assistant for handling sales inquiries&quot;</span><span class="p">,</span>
    <span class="s2">&quot;engine_type&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;engine_model&quot;</span><span class="p">:</span> <span class="s2">&quot;openai.gpt-4o&quot;</span><span class="p">,</span>
    <span class="s2">&quot;engine_data&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s2">&quot;engine_key&quot;</span><span class="p">:</span> <span class="s2">&quot;sk-...&quot;</span><span class="p">,</span>
    <span class="s2">&quot;init_prompt&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a friendly sales assistant. Help customers find the right products.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tts_type&quot;</span><span class="p">:</span> <span class="s2">&quot;elevenlabs&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tts_voice_id&quot;</span><span class="p">:</span> <span class="s2">&quot;EXAVITQu4vr4xnSDxMaL&quot;</span><span class="p">,</span>
    <span class="s2">&quot;stt_type&quot;</span><span class="p">:</span> <span class="s2">&quot;deepgram&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tool_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;connect_call&quot;</span><span class="p">,</span> <span class="s2">&quot;send_email&quot;</span><span class="p">,</span> <span class="s2">&quot;stop_service&quot;</span><span class="p">],</span>
    <span class="s2">&quot;tm_create&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-02-09 07:01:35.666687&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_update&quot;</span><span class="p">:</span> <span class="s2">&quot;9999-01-01 00:00:00.000000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tm_delete&quot;</span><span class="p">:</span> <span class="s2">&quot;9999-01-01 00:00:00.000000&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="engine-model">
<span id="ai-struct-ai-engine-model"></span><h3>Engine Model<a class="headerlink" href="#engine-model" title="Link to this heading"></a></h3>
<p>The engine_model field specifies which LLM provider and model to use. Format: <code class="docutils literal notranslate"><span class="pre">&lt;provider&gt;.&lt;model&gt;</span></code>.</p>
<p><strong>Supported Providers</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Provider</p></th>
<th class="head"><p>Format</p></th>
<th class="head"><p>Examples</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OpenAI</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">openai.&lt;model&gt;</span></code></p></td>
<td><p>openai.gpt-4o, openai.gpt-4o-mini</p></td>
</tr>
<tr class="row-odd"><td><p>Anthropic</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">anthropic.&lt;model&gt;</span></code></p></td>
<td><p>anthropic.claude-3-5-sonnet</p></td>
</tr>
<tr class="row-even"><td><p>AWS Bedrock</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">aws.&lt;model&gt;</span></code></p></td>
<td><p>aws.claude-3-sonnet</p></td>
</tr>
<tr class="row-odd"><td><p>Azure OpenAI</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">azure.&lt;model&gt;</span></code></p></td>
<td><p>azure.gpt-4</p></td>
</tr>
<tr class="row-even"><td><p>Cerebras</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cerebras.&lt;model&gt;</span></code></p></td>
<td><p>cerebras.llama3.1-8b</p></td>
</tr>
<tr class="row-odd"><td><p>DeepSeek</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">deepseek.&lt;model&gt;</span></code></p></td>
<td><p>deepseek.deepseek-chat</p></td>
</tr>
<tr class="row-even"><td><p>Fireworks</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">fireworks.&lt;model&gt;</span></code></p></td>
<td><p>fireworks.llama-v3-70b</p></td>
</tr>
<tr class="row-odd"><td><p>Google Gemini</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">gemini.&lt;model&gt;</span></code></p></td>
<td><p>gemini.gemini-1.5-pro</p></td>
</tr>
<tr class="row-even"><td><p>Grok</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">grok.&lt;model&gt;</span></code></p></td>
<td><p>grok.grok-1</p></td>
</tr>
<tr class="row-odd"><td><p>Groq</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">groq.&lt;model&gt;</span></code></p></td>
<td><p>groq.llama3-70b-8192</p></td>
</tr>
<tr class="row-even"><td><p>Mistral</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">mistral.&lt;model&gt;</span></code></p></td>
<td><p>mistral.mistral-large</p></td>
</tr>
<tr class="row-odd"><td><p>NVIDIA NIM</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nvidia.&lt;model&gt;</span></code></p></td>
<td><p>nvidia.llama3-70b</p></td>
</tr>
<tr class="row-even"><td><p>Ollama</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ollama.&lt;model&gt;</span></code></p></td>
<td><p>ollama.llama3</p></td>
</tr>
<tr class="row-odd"><td><p>OpenRouter</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">openrouter.&lt;model&gt;</span></code></p></td>
<td><p>openrouter.meta-llama/llama-3-70b</p></td>
</tr>
<tr class="row-even"><td><p>Perplexity</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">perplexity.&lt;model&gt;</span></code></p></td>
<td><p>perplexity.llama-3-sonar-large</p></td>
</tr>
<tr class="row-odd"><td><p>Qwen</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">qwen.&lt;model&gt;</span></code></p></td>
<td><p>qwen.qwen-max</p></td>
</tr>
<tr class="row-even"><td><p>SambaNova</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sambanova.&lt;model&gt;</span></code></p></td>
<td><p>sambanova.llama3-70b</p></td>
</tr>
<tr class="row-odd"><td><p>Together AI</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">together.&lt;model&gt;</span></code></p></td>
<td><p>together.meta-llama/Llama-3-70b</p></td>
</tr>
<tr class="row-even"><td><p>Dialogflow</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dialogflow.&lt;type&gt;</span></code></p></td>
<td><p>dialogflow.cx, dialogflow.es</p></td>
</tr>
</tbody>
</table>
<p><strong>Common OpenAI Models</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Model</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>gpt-4o</p></td>
<td><p>Latest GPT-4 Omni model (recommended)</p></td>
</tr>
<tr class="row-odd"><td><p>gpt-4o-mini</p></td>
<td><p>Smaller, faster GPT-4 Omni variant</p></td>
</tr>
<tr class="row-even"><td><p>gpt-4-turbo</p></td>
<td><p>GPT-4 Turbo with vision capabilities</p></td>
</tr>
<tr class="row-odd"><td><p>gpt-4</p></td>
<td><p>Original GPT-4 model</p></td>
</tr>
<tr class="row-even"><td><p>gpt-3.5-turbo</p></td>
<td><p>Fast and cost-effective model</p></td>
</tr>
<tr class="row-odd"><td><p>o1</p></td>
<td><p>OpenAI o1 reasoning model</p></td>
</tr>
<tr class="row-even"><td><p>o1-mini</p></td>
<td><p>Smaller o1 reasoning model</p></td>
</tr>
<tr class="row-odd"><td><p>o3-mini</p></td>
<td><p>Latest o3 mini reasoning model</p></td>
</tr>
</tbody>
</table>
</section>
<section id="tts-type">
<span id="ai-struct-ai-tts-type"></span><h3>TTS Type<a class="headerlink" href="#tts-type" title="Link to this heading"></a></h3>
<p>Text-to-Speech provider for converting AI responses to audio.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>elevenlabs</p></td>
<td><p>ElevenLabs high-quality voice synthesis (recommended)</p></td>
</tr>
<tr class="row-odd"><td><p>deepgram</p></td>
<td><p>Deepgram Aura voices</p></td>
</tr>
<tr class="row-even"><td><p>openai</p></td>
<td><p>OpenAI TTS (alloy, echo, fable, etc.)</p></td>
</tr>
<tr class="row-odd"><td><p>aws</p></td>
<td><p>AWS Polly voices</p></td>
</tr>
<tr class="row-even"><td><p>azure</p></td>
<td><p>Azure Cognitive Services TTS</p></td>
</tr>
<tr class="row-odd"><td><p>google</p></td>
<td><p>Google Cloud Text-to-Speech</p></td>
</tr>
<tr class="row-even"><td><p>cartesia</p></td>
<td><p>Cartesia TTS</p></td>
</tr>
<tr class="row-odd"><td><p>hume</p></td>
<td><p>Hume AI emotional TTS</p></td>
</tr>
<tr class="row-even"><td><p>playht</p></td>
<td><p>PlayHT voice synthesis</p></td>
</tr>
</tbody>
</table>
<p><strong>Default Voice IDs by TTS Type</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>TTS Type</p></th>
<th class="head"><p>Default Voice ID</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>elevenlabs</p></td>
<td><p>EXAVITQu4vr4xnSDxMaL (Rachel)</p></td>
</tr>
<tr class="row-odd"><td><p>deepgram</p></td>
<td><p>aura-2-thalia-en (Thalia)</p></td>
</tr>
<tr class="row-even"><td><p>openai</p></td>
<td><p>alloy</p></td>
</tr>
<tr class="row-odd"><td><p>aws</p></td>
<td><p>Joanna</p></td>
</tr>
<tr class="row-even"><td><p>azure</p></td>
<td><p>en-US-JennyNeural</p></td>
</tr>
<tr class="row-odd"><td><p>google</p></td>
<td><p>en-US-Wavenet-D</p></td>
</tr>
<tr class="row-even"><td><p>cartesia</p></td>
<td><p>71a7ad14-091c-4e8e-a314-022ece01c121</p></td>
</tr>
</tbody>
</table>
</section>
<section id="stt-type">
<span id="ai-struct-ai-stt-type"></span><h3>STT Type<a class="headerlink" href="#stt-type" title="Link to this heading"></a></h3>
<p>Speech-to-Text provider for converting caller audio to text.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>deepgram</p></td>
<td><p>Deepgram speech recognition (recommended)</p></td>
</tr>
<tr class="row-odd"><td><p>cartesia</p></td>
<td><p>Cartesia speech recognition</p></td>
</tr>
<tr class="row-even"><td><p>elevenlabs</p></td>
<td><p>ElevenLabs speech recognition</p></td>
</tr>
</tbody>
</table>
</section>
<section id="tool-names">
<span id="ai-struct-ai-tool-names"></span><h3>Tool Names<a class="headerlink" href="#tool-names" title="Link to this heading"></a></h3>
<p>The tool_names field controls which tool functions the AI can invoke during conversations.</p>
<p><strong>Configuration Options</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">[&quot;all&quot;]</span></code></p></td>
<td><p>Enable all available tool functions</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code> or <code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td><p>Disable all tool functions (AI can only converse)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">[&quot;tool1&quot;,</span> <span class="pre">&quot;tool2&quot;]</span></code></p></td>
<td><p>Enable only the specified tools</p></td>
</tr>
</tbody>
</table>
<p><strong>Available Tools</strong></p>
<p>See <a class="reference internal" href="ai_struct_tool.html#ai-struct-tool"><span class="std std-ref">Tool Functions</span></a> for the complete list of tools and their descriptions.</p>
<p>Example configurations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Enable</span> <span class="nb">all</span> <span class="n">tools</span>
<span class="s2">&quot;tool_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;all&quot;</span><span class="p">]</span>

<span class="o">//</span> <span class="n">Enable</span> <span class="n">only</span> <span class="n">call</span> <span class="n">transfer</span> <span class="ow">and</span> <span class="n">email</span>
<span class="s2">&quot;tool_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;connect_call&quot;</span><span class="p">,</span> <span class="s2">&quot;send_email&quot;</span><span class="p">]</span>

<span class="o">//</span> <span class="n">Enable</span> <span class="n">conversation</span> <span class="n">control</span> <span class="n">tools</span> <span class="n">only</span>
<span class="s2">&quot;tool_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;stop_service&quot;</span><span class="p">,</span> <span class="s2">&quot;stop_flow&quot;</span><span class="p">,</span> <span class="s2">&quot;set_variables&quot;</span><span class="p">]</span>

<span class="o">//</span> <span class="n">Disable</span> <span class="nb">all</span> <span class="n">tools</span> <span class="p">(</span><span class="n">conversation</span><span class="o">-</span><span class="n">only</span> <span class="n">AI</span><span class="p">)</span>
<span class="s2">&quot;tool_names&quot;</span><span class="p">:</span> <span class="p">[]</span>
</pre></div>
</div>
</section>
</section>
<section id="ai-struct-tool">
<span id="id3"></span><h2>Tool Functions<a class="headerlink" href="#ai-struct-tool" title="Link to this heading"></a></h2>
<p>Tool functions enable the AI to perform actions during voice conversations. When the AI determines that an action is needed based on the conversation context, it can invoke the appropriate tool function.</p>
<section id="id4">
<h3>Overview<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Caller</span>                      <span class="n">AI</span> <span class="n">Engine</span>                    <span class="n">VoIPBIN</span> <span class="n">Platform</span>
  <span class="o">|</span>                            <span class="o">|</span>                              <span class="o">|</span>
  <span class="o">|</span>  <span class="s2">&quot;Transfer me to sales&quot;</span>    <span class="o">|</span>                              <span class="o">|</span>
  <span class="o">+---------------------------&gt;|</span>                              <span class="o">|</span>
  <span class="o">|</span>                            <span class="o">|</span>                              <span class="o">|</span>
  <span class="o">|</span>                            <span class="o">|</span>  <span class="n">Detects</span> <span class="n">intent</span>              <span class="o">|</span>
  <span class="o">|</span>                            <span class="o">|</span>  <span class="n">Invokes</span> <span class="n">connect_call</span>        <span class="o">|</span>
  <span class="o">|</span>                            <span class="o">+-----------------------------&gt;|</span>
  <span class="o">|</span>                            <span class="o">|</span>                              <span class="o">|</span>
  <span class="o">|</span>                            <span class="o">|</span>                   <span class="n">Tool</span> <span class="n">result</span><span class="o">|</span>
  <span class="o">|</span>                            <span class="o">|&lt;-----------------------------+</span>
  <span class="o">|</span>                            <span class="o">|</span>                              <span class="o">|</span>
  <span class="o">|</span>   <span class="s2">&quot;Connecting you now...&quot;</span>  <span class="o">|</span>                              <span class="o">|</span>
  <span class="o">|&lt;---------------------------+</span>                              <span class="o">|</span>
  <span class="o">|</span>                            <span class="o">|</span>                              <span class="o">|</span>
  <span class="o">+--------------</span> <span class="n">Call</span> <span class="n">transferred</span> <span class="n">to</span> <span class="n">sales</span> <span class="o">-----------------&gt;|</span>
</pre></div>
</div>
</section>
<section id="id5">
<h3>Available Tools<a class="headerlink" href="#id5" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Tool Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>connect_call</p></td>
<td><p>Transfer or connect to another endpoint</p></td>
</tr>
<tr class="row-odd"><td><p>send_email</p></td>
<td><p>Send an email message</p></td>
</tr>
<tr class="row-even"><td><p>send_message</p></td>
<td><p>Send an SMS text message</p></td>
</tr>
<tr class="row-odd"><td><p>stop_media</p></td>
<td><p>Stop currently playing media</p></td>
</tr>
<tr class="row-even"><td><p>stop_service</p></td>
<td><p>End the AI conversation (soft stop)</p></td>
</tr>
<tr class="row-odd"><td><p>stop_flow</p></td>
<td><p>Terminate the entire flow (hard stop)</p></td>
</tr>
<tr class="row-even"><td><p>set_variables</p></td>
<td><p>Save data to flow context</p></td>
</tr>
<tr class="row-odd"><td><p>get_variables</p></td>
<td><p>Retrieve data from flow context</p></td>
</tr>
<tr class="row-even"><td><p>get_aicall_messages</p></td>
<td><p>Get message history from an AI call</p></td>
</tr>
</tbody>
</table>
</section>
<section id="connect-call">
<span id="ai-struct-tool-connect-call"></span><h3>connect_call<a class="headerlink" href="#connect-call" title="Link to this heading"></a></h3>
<p>Connects or transfers the caller to another endpoint (person, department, or phone number).</p>
<p><strong>When to use:</strong></p>
<ul class="simple">
<li><p>Caller requests a transfer: “transfer me to…”, “connect me to…”</p></li>
<li><p>Caller wants to speak to a person: “let me talk to a human”, “I need an agent”</p></li>
<li><p>Caller requests a specific department: “sales”, “support”, “billing”</p></li>
<li><p>Caller provides a phone number: “call +1234567890”</p></li>
</ul>
<p><strong>Parameters:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;run_llm&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Set true to speak after connecting. Set false for silent transfer.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">false</span>
        <span class="p">},</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
            <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;agent, conference, extension, sip, or tel&quot;</span> <span class="p">},</span>
                <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Source address/identifier&quot;</span> <span class="p">},</span>
                <span class="s2">&quot;target_name&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Display name (optional)&quot;</span> <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
            <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
                <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;agent, conference, extension, line, sip, tel&quot;</span> <span class="p">},</span>
                    <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Destination address&quot;</span> <span class="p">},</span>
                    <span class="s2">&quot;target_name&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Display name (optional)&quot;</span> <span class="p">}</span>
                <span class="p">},</span>
                <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;destinations&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Examples:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;Transfer me to sales&quot;</span>      <span class="o">-&gt;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;extension&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s2">&quot;sales&quot;</span>
<span class="s2">&quot;Call my wife at 555-1234&quot;</span>  <span class="o">-&gt;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;tel&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s2">&quot;+15551234&quot;</span>
<span class="s2">&quot;I need a human agent&quot;</span>      <span class="o">-&gt;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;agent&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">appropriate</span> <span class="n">agent</span>
</pre></div>
</div>
</section>
<section id="send-email">
<span id="ai-struct-tool-send-email"></span><h3>send_email<a class="headerlink" href="#send-email" title="Link to this heading"></a></h3>
<p>Sends an email to one or more email addresses.</p>
<p><strong>When to use:</strong></p>
<ul class="simple">
<li><p>Caller explicitly requests email: “email me”, “send me an email”</p></li>
<li><p>Caller asks for documents to be emailed</p></li>
<li><p>Caller provides an email address for receiving information</p></li>
</ul>
<p><strong>Parameters:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;run_llm&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Set true to confirm verbally after sending.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">false</span>
        <span class="p">},</span>
        <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
            <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
                <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">]</span> <span class="p">},</span>
                    <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Email address&quot;</span> <span class="p">},</span>
                    <span class="s2">&quot;target_name&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Recipient name (optional)&quot;</span> <span class="p">}</span>
                <span class="p">},</span>
                <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">&quot;subject&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Email subject line&quot;</span> <span class="p">},</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Email body content&quot;</span> <span class="p">},</span>
        <span class="s2">&quot;attachments&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
            <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
                <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;reference_type&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;recording&quot;</span><span class="p">]</span> <span class="p">},</span>
                    <span class="s2">&quot;reference_id&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;UUID of the attachment&quot;</span> <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;destinations&quot;</span><span class="p">,</span> <span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="send-message">
<span id="ai-struct-tool-send-message"></span><h3>send_message<a class="headerlink" href="#send-message" title="Link to this heading"></a></h3>
<p>Sends an SMS text message to a phone number.</p>
<p><strong>When to use:</strong></p>
<ul class="simple">
<li><p>Caller explicitly requests a text: “text me”, “send me a text”, “SMS me”</p></li>
<li><p>Caller asks for information sent to their phone</p></li>
<li><p>Caller provides a phone number for messaging</p></li>
</ul>
<p><strong>Parameters:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;run_llm&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Set true to confirm verbally after sending.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">false</span>
        <span class="p">},</span>
        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
            <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;tel&quot;</span><span class="p">]</span> <span class="p">},</span>
                <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Source phone number (+E.164)&quot;</span> <span class="p">},</span>
                <span class="s2">&quot;target_name&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Display name (optional)&quot;</span> <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">&quot;destinations&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
            <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
                <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;tel&quot;</span><span class="p">]</span> <span class="p">},</span>
                    <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Destination phone number (+E.164)&quot;</span> <span class="p">},</span>
                    <span class="s2">&quot;target_name&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Recipient name (optional)&quot;</span> <span class="p">}</span>
                <span class="p">},</span>
                <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;target&quot;</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;SMS message content&quot;</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;destinations&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="stop-media">
<span id="ai-struct-tool-stop-media"></span><h3>stop_media<a class="headerlink" href="#stop-media" title="Link to this heading"></a></h3>
<p>Stops media from a previous action that is currently playing on the call.</p>
<p><strong>When to use:</strong></p>
<ul class="simple">
<li><p>AI has finished loading and needs to stop hold music or greeting</p></li>
<li><p>Previous flow action’s media playback should stop before AI speaks</p></li>
<li><p>Transitioning from pre-recorded media to live AI conversation</p></li>
</ul>
<p><strong>Parameters:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;run_llm&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Set true to speak after stopping media.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Comparison with other stop tools:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+-------------+------------------------------------------+</span>
<span class="o">|</span> <span class="n">Tool</span>        <span class="o">|</span> <span class="n">Effect</span>                                   <span class="o">|</span>
<span class="o">+=============+==========================================+</span>
<span class="o">|</span> <span class="n">stop_media</span>  <span class="o">|</span> <span class="n">Stop</span> <span class="n">previous</span> <span class="n">action</span><span class="s1">&#39;s media playback    |</span>
<span class="o">|</span>             <span class="o">|</span> <span class="n">AI</span> <span class="n">conversation</span> <span class="n">continues</span>                <span class="o">|</span>
<span class="o">+-------------+------------------------------------------+</span>
<span class="o">|</span> <span class="n">stop_service</span><span class="o">|</span> <span class="n">End</span> <span class="n">AI</span> <span class="n">conversation</span>                      <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span> <span class="n">Flow</span> <span class="n">continues</span> <span class="n">to</span> <span class="nb">next</span> <span class="n">action</span>            <span class="o">|</span>
<span class="o">+-------------+------------------------------------------+</span>
<span class="o">|</span> <span class="n">stop_flow</span>   <span class="o">|</span> <span class="n">Terminate</span> <span class="n">everything</span>                     <span class="o">|</span>
<span class="o">|</span>             <span class="o">|</span> <span class="n">Call</span> <span class="n">ends</span><span class="p">,</span> <span class="n">no</span> <span class="n">further</span> <span class="n">actions</span>            <span class="o">|</span>
<span class="o">+-------------+------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="stop-service">
<span id="ai-struct-tool-stop-service"></span><h3>stop_service<a class="headerlink" href="#stop-service" title="Link to this heading"></a></h3>
<p>Ends the AI conversation and proceeds to the next action in the flow.</p>
<p><strong>When to use:</strong></p>
<ul class="simple">
<li><p>Caller says goodbye: “bye”, “goodbye”, “thanks, that’s all”</p></li>
<li><p>Caller indicates they’re done: “I’m all set”, “that’s everything”</p></li>
<li><p>AI has successfully completed its purpose (appointment booked, issue resolved)</p></li>
<li><p>Natural conversation conclusion</p></li>
</ul>
<p><strong>When NOT to use:</strong></p>
<ul class="simple">
<li><p>Caller is frustrated but still needs help (de-escalate instead)</p></li>
<li><p>Conversation has unresolved issues</p></li>
<li><p>Caller wants to end the entire call (use stop_flow instead)</p></li>
</ul>
<p><strong>Parameters:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Examples:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;Thanks, bye!&quot;</span>                 <span class="o">-&gt;</span> <span class="n">stop_service</span> <span class="p">(</span><span class="n">natural</span> <span class="n">end</span><span class="p">)</span>
<span class="s2">&quot;I&#39;m done here&quot;</span>                <span class="o">-&gt;</span> <span class="n">stop_service</span> <span class="p">(</span><span class="n">completion</span> <span class="n">signal</span><span class="p">)</span>
<span class="n">After</span> <span class="n">booking</span> <span class="n">appointment</span>      <span class="o">-&gt;</span> <span class="n">stop_service</span> <span class="p">(</span><span class="n">task</span> <span class="n">complete</span><span class="p">)</span>
<span class="s2">&quot;Great, that&#39;s all I needed&quot;</span>   <span class="o">-&gt;</span> <span class="n">stop_service</span>
</pre></div>
</div>
</section>
<section id="stop-flow">
<span id="ai-struct-tool-stop-flow"></span><h3>stop_flow<a class="headerlink" href="#stop-flow" title="Link to this heading"></a></h3>
<p>Immediately terminates the entire flow and call. Nothing executes after this.</p>
<p><strong>When to use:</strong></p>
<ul class="simple">
<li><p>Caller explicitly wants to end everything: “hang up”, “end the call”, “disconnect”</p></li>
<li><p>Critical error requiring full termination</p></li>
<li><p>Emergency stop needed</p></li>
</ul>
<p><strong>When NOT to use:</strong></p>
<ul class="simple">
<li><p>Caller just wants to end AI conversation (use stop_service instead)</p></li>
<li><p>Caller says casual goodbye (use stop_service instead)</p></li>
<li><p>There are more flow actions that should execute after AI</p></li>
</ul>
<p><strong>Parameters:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Examples:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;Hang up now&quot;</span>                  <span class="o">-&gt;</span> <span class="n">stop_flow</span>
<span class="s2">&quot;End this call immediately&quot;</span>    <span class="o">-&gt;</span> <span class="n">stop_flow</span>
<span class="s2">&quot;Terminate the call&quot;</span>           <span class="o">-&gt;</span> <span class="n">stop_flow</span>
</pre></div>
</div>
</section>
<section id="set-variables">
<span id="ai-struct-tool-set-variables"></span><h3>set_variables<a class="headerlink" href="#set-variables" title="Link to this heading"></a></h3>
<p>Saves key-value data to the flow context for later use by downstream actions.</p>
<p><strong>When to use:</strong></p>
<ul class="simple">
<li><p>Save information collected during conversation (name, account number, preferences)</p></li>
<li><p>Record conclusions (appointment time, issue category, resolution)</p></li>
<li><p>Store data needed by subsequent flow actions</p></li>
</ul>
<p><strong>Parameters:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;run_llm&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Set true to continue conversation after saving.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">false</span>
        <span class="p">},</span>
        <span class="s2">&quot;variables&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Key-value pairs to save&quot;</span><span class="p">,</span>
            <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;variables&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Examples:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;My name is John Smith&quot;</span>        <span class="o">-&gt;</span> <span class="n">set_variables</span><span class="p">({</span><span class="s2">&quot;customer_name&quot;</span><span class="p">:</span> <span class="s2">&quot;John Smith&quot;</span><span class="p">})</span>
<span class="s2">&quot;3pm works for me&quot;</span>             <span class="o">-&gt;</span> <span class="n">set_variables</span><span class="p">({</span><span class="s2">&quot;appointment_time&quot;</span><span class="p">:</span> <span class="s2">&quot;15:00&quot;</span><span class="p">})</span>
<span class="n">Issue</span> <span class="n">categorized</span> <span class="k">as</span> <span class="n">billing</span>   <span class="o">-&gt;</span> <span class="n">set_variables</span><span class="p">({</span><span class="s2">&quot;issue_category&quot;</span><span class="p">:</span> <span class="s2">&quot;billing&quot;</span><span class="p">})</span>
<span class="n">Account</span> <span class="n">number</span> <span class="n">provided</span>        <span class="o">-&gt;</span> <span class="n">set_variables</span><span class="p">({</span><span class="s2">&quot;account_number&quot;</span><span class="p">:</span> <span class="s2">&quot;12345&quot;</span><span class="p">})</span>
</pre></div>
</div>
</section>
<section id="get-variables">
<span id="ai-struct-tool-get-variables"></span><h3>get_variables<a class="headerlink" href="#get-variables" title="Link to this heading"></a></h3>
<p>Retrieves previously saved variables from the flow context.</p>
<p><strong>When to use:</strong></p>
<ul class="simple">
<li><p>Need context set earlier in the flow</p></li>
<li><p>Need information from previous actions (confirmation number, customer info)</p></li>
<li><p>Caller asks about something in saved context</p></li>
<li><p>Before performing an action requiring previously collected data</p></li>
</ul>
<p><strong>Parameters:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;run_llm&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Set true to respond using retrieved data.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Examples:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Need</span> <span class="n">customer</span> <span class="n">name</span> <span class="kn">from</span><span class="w"> </span><span class="nn">earlier</span> <span class="o">-&gt;</span> <span class="n">get_variables</span>
<span class="s2">&quot;What was my confirmation?&quot;</span>     <span class="o">-&gt;</span> <span class="n">get_variables</span>
<span class="n">Before</span> <span class="n">sending</span> <span class="n">SMS</span>              <span class="o">-&gt;</span> <span class="n">get_variables</span> <span class="p">(</span><span class="n">to</span> <span class="n">get</span> <span class="n">phone</span> <span class="n">number</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="get-aicall-messages">
<span id="ai-struct-tool-get-aicall-messages"></span><h3>get_aicall_messages<a class="headerlink" href="#get-aicall-messages" title="Link to this heading"></a></h3>
<p>Retrieves message history from a specific AI call session.</p>
<p><strong>When to use:</strong></p>
<ul class="simple">
<li><p>Need message history from a different AI call (not current conversation)</p></li>
<li><p>Building summaries of past conversations</p></li>
<li><p>Caller asks about previous interactions: “what did we discuss last time?”</p></li>
<li><p>Referencing a specific past call by ID</p></li>
</ul>
<p><strong>When NOT to use:</strong></p>
<ul class="simple">
<li><p>Current conversation history is sufficient (already in AI context)</p></li>
<li><p>Need saved variables, not messages (use get_variables instead)</p></li>
<li><p>No specific aicall_id to query</p></li>
</ul>
<p><strong>Parameters:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;run_llm&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Set true to respond based on retrieved messages.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">false</span>
        <span class="p">},</span>
        <span class="s2">&quot;aicall_id&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;UUID of the AI call to retrieve messages from&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;aicall_id&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="run-llm-parameter">
<h3>run_llm Parameter<a class="headerlink" href="#run-llm-parameter" title="Link to this heading"></a></h3>
<p>Most tools include a <code class="docutils literal notranslate"><span class="pre">run_llm</span></code> parameter that controls whether the AI should generate a response after the tool executes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+-------------------+--------------------------------------------------+</span>
<span class="o">|</span> <span class="n">run_llm</span> <span class="o">=</span> <span class="n">true</span>    <span class="o">|</span> <span class="n">AI</span> <span class="n">speaks</span> <span class="n">after</span> <span class="n">tool</span> <span class="n">execution</span>                   <span class="o">|</span>
<span class="o">|</span>                   <span class="o">|</span> <span class="n">Example</span><span class="p">:</span> <span class="s2">&quot;I&#39;ve sent that to your email&quot;</span>          <span class="o">|</span>
<span class="o">+-------------------+--------------------------------------------------+</span>
<span class="o">|</span> <span class="n">run_llm</span> <span class="o">=</span> <span class="n">false</span>   <span class="o">|</span> <span class="n">Tool</span> <span class="n">executes</span> <span class="n">silently</span>                           <span class="o">|</span>
<span class="o">|</span>                   <span class="o">|</span> <span class="n">Useful</span> <span class="k">for</span> <span class="n">chaining</span> <span class="n">multiple</span> <span class="n">tools</span>               <span class="o">|</span>
<span class="o">+-------------------+--------------------------------------------------+</span>
</pre></div>
</div>
<p><strong>Default:</strong> Most tools default to <code class="docutils literal notranslate"><span class="pre">run_llm</span> <span class="pre">=</span> <span class="pre">false</span></code> for silent execution.</p>
</section>
<section id="tool-execution-flow">
<h3>Tool Execution Flow<a class="headerlink" href="#tool-execution-flow" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+-----------------------------------------------------------------+</span>
<span class="o">|</span>                    <span class="n">Tool</span> <span class="n">Execution</span> <span class="n">Architecture</span>                   <span class="o">|</span>
<span class="o">+-----------------------------------------------------------------+</span>

<span class="n">Caller</span> <span class="n">speaks</span>          <span class="n">Python</span> <span class="n">Pipecat</span>              <span class="n">Go</span> <span class="n">AIcallHandler</span>
     <span class="o">|</span>                      <span class="o">|</span>                            <span class="o">|</span>
     <span class="o">|</span>  <span class="s2">&quot;Transfer me to     |                            |</span>
     <span class="o">|</span>   <span class="n">sales</span> <span class="n">please</span><span class="s2">&quot;      |                            |</span>
     <span class="o">+---------------------&gt;|</span>                            <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>                            <span class="o">|</span>
     <span class="o">|</span>               <span class="n">STT</span> <span class="n">converts</span>                        <span class="o">|</span>
     <span class="o">|</span>               <span class="n">to</span> <span class="n">text</span>                             <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>                            <span class="o">|</span>
     <span class="o">|</span>               <span class="n">LLM</span> <span class="n">detects</span> <span class="n">intent</span>                  <span class="o">|</span>
     <span class="o">|</span>               <span class="n">function_call</span><span class="p">:</span> <span class="n">connect_call</span>         <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>                            <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>  <span class="n">HTTP</span> <span class="n">POST</span>                 <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>  <span class="o">/</span><span class="n">tool</span><span class="o">/</span><span class="n">execute</span>             <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">+---------------------------&gt;|</span>
     <span class="o">|</span>                      <span class="o">|</span>                            <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>             <span class="n">Execute</span> <span class="n">tool</span>   <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>             <span class="p">(</span><span class="n">call</span><span class="o">-</span><span class="n">manager</span><span class="p">)</span> <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>                            <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>  <span class="n">Tool</span> <span class="n">result</span>               <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|&lt;---------------------------+</span>
     <span class="o">|</span>                      <span class="o">|</span>                            <span class="o">|</span>
     <span class="o">|</span>               <span class="n">LLM</span> <span class="n">generates</span>                       <span class="o">|</span>
     <span class="o">|</span>               <span class="n">response</span>                            <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>                            <span class="o">|</span>
     <span class="o">|</span>  <span class="n">TTS</span><span class="p">:</span> <span class="s2">&quot;Connecting    |                            |</span>
     <span class="o">|</span>   <span class="n">you</span> <span class="n">to</span> <span class="n">sales</span> <span class="n">now</span><span class="s2">&quot;  |                            |</span>
     <span class="o">|&lt;---------------------+</span>                            <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>                            <span class="o">|</span>
</pre></div>
</div>
</section>
<section id="best-practices">
<h3>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading"></a></h3>
<p><strong>1. Enable only needed tools</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Good</span><span class="p">:</span> <span class="n">Only</span> <span class="n">enable</span> <span class="n">tools</span> <span class="n">the</span> <span class="n">AI</span> <span class="n">actually</span> <span class="n">needs</span>
<span class="s2">&quot;tool_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;connect_call&quot;</span><span class="p">,</span> <span class="s2">&quot;stop_service&quot;</span><span class="p">]</span>

<span class="o">//</span> <span class="n">Avoid</span><span class="p">:</span> <span class="n">Enabling</span> <span class="nb">all</span> <span class="n">tools</span> <span class="n">when</span> <span class="n">only</span> <span class="n">some</span> <span class="n">are</span> <span class="n">needed</span>
<span class="s2">&quot;tool_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;all&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>2. Use stop_service vs stop_flow correctly</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stop_service</span> <span class="o">=</span> <span class="n">Soft</span> <span class="n">stop</span> <span class="p">(</span><span class="n">AI</span> <span class="n">ends</span><span class="p">,</span> <span class="n">flow</span> <span class="n">continues</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">User</span> <span class="n">says</span> <span class="s2">&quot;goodbye&quot;</span>
    <span class="o">-</span> <span class="n">Task</span> <span class="n">completed</span> <span class="n">successfully</span>

<span class="n">stop_flow</span> <span class="o">=</span> <span class="n">Hard</span> <span class="n">stop</span> <span class="p">(</span><span class="n">everything</span> <span class="n">ends</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">User</span> <span class="n">says</span> <span class="s2">&quot;hang up&quot;</span>
    <span class="o">-</span> <span class="n">Critical</span> <span class="n">error</span>
</pre></div>
</div>
<p><strong>3. Clarify ambiguous requests</strong></p>
<p>When a user says “send me that information,” the AI should ask:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;Would you like that by email or text message?&quot;</span>
</pre></div>
</div>
<p>This ensures the correct tool (send_email vs send_message) is used.</p>
<p><strong>4. Use run_llm appropriately</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Silent</span> <span class="n">operations</span> <span class="p">(</span><span class="n">chaining</span> <span class="n">tools</span><span class="p">)</span>
<span class="s2">&quot;run_llm&quot;</span><span class="p">:</span> <span class="n">false</span>

<span class="o">//</span> <span class="n">User</span><span class="o">-</span><span class="n">facing</span> <span class="n">confirmations</span>
<span class="s2">&quot;run_llm&quot;</span><span class="p">:</span> <span class="n">true</span>  <span class="o">-&gt;</span> <span class="s2">&quot;I&#39;ve connected you to the sales department&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="tutorial">
<span id="ai-tutorial"></span><h2>Tutorial<a class="headerlink" href="#tutorial" title="Link to this heading"></a></h2>
<section id="simple-ai-voice-assistant">
<h3>Simple AI Voice Assistant<a class="headerlink" href="#simple-ai-voice-assistant" title="Link to this heading"></a></h3>
<p>Create a basic AI voice assistant that answers questions during a call. The AI will listen to the caller’s speech, process it, and respond using text-to-speech.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl --location --request POST &#39;https://api.voipbin.net/v1.0/calls?token=&lt;YOUR_AUTH_TOKEN&gt;&#39; \
    --header &#39;Content-Type: application/json&#39; \
    --data-raw &#39;{
        &quot;source&quot;: {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15551234567&quot;
        },
        &quot;destinations&quot;: [
            {
                &quot;type&quot;: &quot;tel&quot;,
                &quot;target&quot;: &quot;+15559876543&quot;
            }
        ],
        &quot;actions&quot;: [
            {
                &quot;type&quot;: &quot;answer&quot;
            },
            {
                &quot;type&quot;: &quot;ai&quot;,
                &quot;option&quot;: {
                    &quot;initial_prompt&quot;: &quot;You are a helpful customer service assistant. Answer questions politely and concisely.&quot;,
                    &quot;language&quot;: &quot;en-US&quot;,
                    &quot;voice_type&quot;: &quot;female&quot;
                }
            }
        ]
    }&#39;
</pre></div>
</div>
<p>This creates a call with an AI assistant that will:
1. Answer the incoming call
2. Listen to the caller’s speech using STT (Speech-to-Text)
3. Process the input through the AI engine with the given prompt
4. Respond using TTS (Text-to-Speech)</p>
</section>
<section id="ai-talk-with-real-time-conversation">
<h3>AI Talk with Real-Time Conversation<a class="headerlink" href="#ai-talk-with-real-time-conversation" title="Link to this heading"></a></h3>
<p>Use AI Talk for more natural, low-latency conversations powered by ElevenLabs. This enables interruption detection where the AI stops speaking when the caller starts talking.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl --location --request POST &#39;https://api.voipbin.net/v1.0/calls?token=&lt;YOUR_AUTH_TOKEN&gt;&#39; \
    --header &#39;Content-Type: application/json&#39; \
    --data-raw &#39;{
        &quot;source&quot;: {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15551234567&quot;
        },
        &quot;destinations&quot;: [
            {
                &quot;type&quot;: &quot;tel&quot;,
                &quot;target&quot;: &quot;+15559876543&quot;
            }
        ],
        &quot;actions&quot;: [
            {
                &quot;type&quot;: &quot;answer&quot;
            },
            {
                &quot;type&quot;: &quot;ai_talk&quot;,
                &quot;option&quot;: {
                    &quot;initial_prompt&quot;: &quot;You are an expert sales representative for VoIPBIN. Help customers understand our calling and messaging platform. Be enthusiastic but professional.&quot;,
                    &quot;language&quot;: &quot;en-US&quot;,
                    &quot;voice_type&quot;: &quot;male&quot;
                }
            }
        ]
    }&#39;
</pre></div>
</div>
<p>AI Talk provides:
- <strong>Interruption Detection</strong>: Stops speaking when caller talks
- <strong>Low Latency</strong>: Streams responses in chunks for faster perceived response time
- <strong>Natural Voice</strong>: Uses ElevenLabs for high-quality voice output
- <strong>Context Retention</strong>: Remembers previous conversation exchanges</p>
</section>
<section id="ai-with-custom-voice-id">
<h3>AI with Custom Voice ID<a class="headerlink" href="#ai-with-custom-voice-id" title="Link to this heading"></a></h3>
<p>Customize the AI voice by specifying an ElevenLabs Voice ID using variables.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl --location --request POST &#39;https://api.voipbin.net/v1.0/calls?token=&lt;YOUR_AUTH_TOKEN&gt;&#39; \
    --header &#39;Content-Type: application/json&#39; \
    --data-raw &#39;{
        &quot;source&quot;: {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15551234567&quot;
        },
        &quot;destinations&quot;: [
            {
                &quot;type&quot;: &quot;tel&quot;,
                &quot;target&quot;: &quot;+15559876543&quot;
            }
        ],
        &quot;actions&quot;: [
            {
                &quot;type&quot;: &quot;answer&quot;
            },
            {
                &quot;type&quot;: &quot;variable_set&quot;,
                &quot;option&quot;: {
                    &quot;key&quot;: &quot;voipbin.tts.elevenlabs.voice_id&quot;,
                    &quot;value&quot;: &quot;21m00Tcm4TlvDq8ikWAM&quot;
                }
            },
            {
                &quot;type&quot;: &quot;ai_talk&quot;,
                &quot;option&quot;: {
                    &quot;initial_prompt&quot;: &quot;You are a friendly receptionist. Greet callers warmly and help them with their inquiries.&quot;,
                    &quot;language&quot;: &quot;en-US&quot;
                }
            }
        ]
    }&#39;
</pre></div>
</div>
<p>See <a class="reference internal" href="ai_overview.html#ai-overview"><span class="std std-ref">Built-in ElevenLabs Voice IDs</span></a> for available voice options.</p>
</section>
<section id="ai-summary-for-call-transcription">
<h3>AI Summary for Call Transcription<a class="headerlink" href="#ai-summary-for-call-transcription" title="Link to this heading"></a></h3>
<p>Generate an AI-powered summary of a call transcription. This is useful for post-call analysis and record-keeping.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl --location --request POST &#39;https://api.voipbin.net/v1.0/calls?token=&lt;YOUR_AUTH_TOKEN&gt;&#39; \
    --header &#39;Content-Type: application/json&#39; \
    --data-raw &#39;{
        &quot;source&quot;: {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15551234567&quot;
        },
        &quot;destinations&quot;: [
            {
                &quot;type&quot;: &quot;tel&quot;,
                &quot;target&quot;: &quot;+15559876543&quot;
            }
        ],
        &quot;actions&quot;: [
            {
                &quot;type&quot;: &quot;answer&quot;
            },
            {
                &quot;type&quot;: &quot;transcribe_start&quot;,
                &quot;option&quot;: {
                    &quot;language&quot;: &quot;en-US&quot;
                }
            },
            {
                &quot;type&quot;: &quot;talk&quot;,
                &quot;option&quot;: {
                    &quot;text&quot;: &quot;Hello! This call is being transcribed and summarized. Please tell me about your experience with our service.&quot;,
                    &quot;language&quot;: &quot;en-US&quot;
                }
            },
            {
                &quot;type&quot;: &quot;wait&quot;,
                &quot;option&quot;: {
                    &quot;duration&quot;: 30000
                }
            },
            {
                &quot;type&quot;: &quot;ai_summary&quot;,
                &quot;option&quot;: {
                    &quot;source_type&quot;: &quot;transcribe&quot;,
                    &quot;source_id&quot;: &quot;${voipbin.transcribe.id}&quot;
                }
            },
            {
                &quot;type&quot;: &quot;talk&quot;,
                &quot;option&quot;: {
                    &quot;text&quot;: &quot;Thank you for your feedback. We have recorded and summarized your call.&quot;,
                    &quot;language&quot;: &quot;en-US&quot;
                }
            }
        ]
    }&#39;
</pre></div>
</div>
<p>The AI summary will:
- Process the transcription from <code class="docutils literal notranslate"><span class="pre">transcribe_start</span></code>
- Generate a structured summary of key points
- Store the summary in <code class="docutils literal notranslate"><span class="pre">${voipbin.ai_summary.result}</span></code>
- Can be accessed via webhook or API after the call</p>
</section>
<section id="real-time-ai-summary">
<h3>Real-Time AI Summary<a class="headerlink" href="#real-time-ai-summary" title="Link to this heading"></a></h3>
<p>Get AI summaries while the call is still active. Useful for live call monitoring and agent assistance.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl --location --request POST &#39;https://api.voipbin.net/v1.0/calls?token=&lt;YOUR_AUTH_TOKEN&gt;&#39; \
    --header &#39;Content-Type: application/json&#39; \
    --data-raw &#39;{
        &quot;source&quot;: {
            &quot;type&quot;: &quot;tel&quot;,
            &quot;target&quot;: &quot;+15551234567&quot;
        },
        &quot;destinations&quot;: [
            {
                &quot;type&quot;: &quot;tel&quot;,
                &quot;target&quot;: &quot;+15559876543&quot;
            }
        ],
        &quot;actions&quot;: [
            {
                &quot;type&quot;: &quot;answer&quot;
            },
            {
                &quot;type&quot;: &quot;transcribe_start&quot;,
                &quot;option&quot;: {
                    &quot;language&quot;: &quot;en-US&quot;,
                    &quot;real_time&quot;: true
                }
            },
            {
                &quot;type&quot;: &quot;ai_summary&quot;,
                &quot;option&quot;: {
                    &quot;source_type&quot;: &quot;call&quot;,
                    &quot;source_id&quot;: &quot;${voipbin.call.id}&quot;,
                    &quot;real_time&quot;: true
                }
            },
            {
                &quot;type&quot;: &quot;connect&quot;,
                &quot;option&quot;: {
                    &quot;source&quot;: {
                        &quot;type&quot;: &quot;tel&quot;,
                        &quot;target&quot;: &quot;+15551234567&quot;
                    },
                    &quot;destinations&quot;: [
                        {
                            &quot;type&quot;: &quot;tel&quot;,
                            &quot;target&quot;: &quot;+15551111111&quot;
                        }
                    ]
                }
            }
        ]
    }&#39;
</pre></div>
</div>
<p>Real-time summaries provide:
- <strong>Live Updates</strong>: Summary updates as conversation progresses
- <strong>Agent Assistance</strong>: Provides context to agents joining mid-call
- <strong>Call Monitoring</strong>: Enables supervisors to quickly understand ongoing calls</p>
</section>
<section id="id6">
<h3>Best Practices<a class="headerlink" href="#id6" title="Link to this heading"></a></h3>
<p><strong>Initial Prompt Design:</strong>
- Be specific about the AI’s role and behavior
- Include constraints (e.g., “Keep responses under 30 seconds”)
- Define the tone (professional, friendly, technical, etc.)</p>
<p><strong>Language Support:</strong>
- AI supports multiple languages (see <a class="reference internal" href="transcribe_overview.html#transcribe-overview-supported-languages"><span class="std std-ref">supported languages</span></a>)
- Match the <code class="docutils literal notranslate"><span class="pre">language</span></code> parameter with caller’s expected language
- AI can detect and respond in multiple languages if not constrained</p>
<p><strong>Context Retention:</strong>
- AI remembers conversation history within the same call
- Variables set during the call are available to AI
- Use context to build multi-turn conversations</p>
<p><strong>Error Handling:</strong>
- Always include fallback actions after AI actions
- Handle cases where AI may not understand the input
- Provide clear instructions to callers about what they can ask</p>
<p>For more details on AI features and configuration, see <a class="reference internal" href="ai_overview.html#ai-overview"><span class="std std-ref">AI Overview</span></a>.</p>
</section>
</section>
</section>

</main>
                        <nav aria-label="Page navigation" class="py-4 my-5 clearfix font-weight-bold border-top">
    <a class="float-left" href="conversation.html" title="Previous">
        <span aria-hidden="true">←&nbsp;</span>Conversation
    </a>
    <a class="float-right" href="campaign.html" title="Next">
        Campaign <span aria-hidden="true">&nbsp;→</span>
    </a>
</nav>
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">AI</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#how-it-works">How it works</a><ul>
<li><a class="reference internal" href="#architecture-overview">Architecture Overview</a></li>
<li><a class="reference internal" href="#audio-flow">Audio Flow</a></li>
<li><a class="reference internal" href="#ai-call-lifecycle">AI Call Lifecycle</a></li>
<li><a class="reference internal" href="#action-component">Action Component</a></li>
<li><a class="reference internal" href="#tts-stt-ai-engine">TTS/STT + AI Engine</a></li>
<li><a class="reference internal" href="#voice-detection-and-play-interruption">Voice Detection and Play Interruption</a></li>
<li><a class="reference internal" href="#context-retention">Context Retention</a></li>
<li><a class="reference internal" href="#multilingual-support">Multilingual Support</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tool-functions">Tool Functions</a><ul>
<li><a class="reference internal" href="#tool-execution-architecture">Tool Execution Architecture</a></li>
<li><a class="reference internal" href="#available-tools">Available Tools</a></li>
<li><a class="reference internal" href="#configuring-tools">Configuring Tools</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-the-ai">Using the AI</a><ul>
<li><a class="reference internal" href="#initial-prompt">Initial Prompt</a><ul>
<li><a class="reference internal" href="#example-prompt">Example Prompt:</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#ai-talk">AI Talk</a><ul>
<li><a class="reference internal" href="#key-features">Key Features</a></li>
<li><a class="reference internal" href="#built-in-elevenlabs-voice-ids">Built-in ElevenLabs Voice IDs</a></li>
<li><a class="reference internal" href="#other-elevenlabs-voice-id-options">Other ElevenLabs Voice ID Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ai-summary">AI Summary</a><ul>
<li><a class="reference internal" href="#supported-resources">Supported Resources</a></li>
<li><a class="reference internal" href="#choosing-between-real-time-and-non-real-time-summaries">Choosing Between Real-time and Non-Real-time Summaries</a></li>
<li><a class="reference internal" href="#ai-summary-behavior">AI Summary Behavior</a></li>
<li><a class="reference internal" href="#ensuring-full-coverage">Ensuring Full Coverage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#external-ai-agent-integration">External AI Agent Integration</a><ul>
<li><a class="reference internal" href="#mcp-server">MCP Server</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ai-struct-ai">AI</a><ul>
<li><a class="reference internal" href="#ai-struct-ai-ai">AI</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#engine-model">Engine Model</a></li>
<li><a class="reference internal" href="#tts-type">TTS Type</a></li>
<li><a class="reference internal" href="#stt-type">STT Type</a></li>
<li><a class="reference internal" href="#tool-names">Tool Names</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ai-struct-tool">Tool Functions</a><ul>
<li><a class="reference internal" href="#id4">Overview</a></li>
<li><a class="reference internal" href="#id5">Available Tools</a></li>
<li><a class="reference internal" href="#connect-call">connect_call</a></li>
<li><a class="reference internal" href="#send-email">send_email</a></li>
<li><a class="reference internal" href="#send-message">send_message</a></li>
<li><a class="reference internal" href="#stop-media">stop_media</a></li>
<li><a class="reference internal" href="#stop-service">stop_service</a></li>
<li><a class="reference internal" href="#stop-flow">stop_flow</a></li>
<li><a class="reference internal" href="#set-variables">set_variables</a></li>
<li><a class="reference internal" href="#get-variables">get_variables</a></li>
<li><a class="reference internal" href="#get-aicall-messages">get_aicall_messages</a></li>
<li><a class="reference internal" href="#run-llm-parameter">run_llm Parameter</a></li>
<li><a class="reference internal" href="#tool-execution-flow">Tool Execution Flow</a></li>
<li><a class="reference internal" href="#best-practices">Best Practices</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tutorial">Tutorial</a><ul>
<li><a class="reference internal" href="#simple-ai-voice-assistant">Simple AI Voice Assistant</a></li>
<li><a class="reference internal" href="#ai-talk-with-real-time-conversation">AI Talk with Real-Time Conversation</a></li>
<li><a class="reference internal" href="#ai-with-custom-voice-id">AI with Custom Voice ID</a></li>
<li><a class="reference internal" href="#ai-summary-for-call-transcription">AI Summary for Call Transcription</a></li>
<li><a class="reference internal" href="#real-time-ai-summary">Real-Time AI Summary</a></li>
<li><a class="reference internal" href="#id6">Best Practices</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
                <nav aria-label="Footer">
                    <ul class="nav justify-content-center mb-2">
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="http://voipbin.net">About Us</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="http://voipbin.net">Contact</a></li>
                        
                    </ul>
                </nav>
            
            <div class="text-center">
                    &copy; Copyright 2026, VoIPBIN
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a class="text-white" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.5.0
                    </a>
                    and
                    <a class="text-white" href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 9.1.0
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=fd6eb6e6"></script>
        <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="_static/dist/theme.js"></script>
        <script type="text/javascript" src="_static/dist/vendor.js"></script>
        <script type="text/javascript" src="_static/searchtools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>