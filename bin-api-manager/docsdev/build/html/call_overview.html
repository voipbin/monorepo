<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="./">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>Overview &mdash; voipbin  documentation</title>
    
    <link rel="stylesheet" type="text/css" href="_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8e8a900e" />
      <link rel="stylesheet" type="text/css" href="_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="genindex.html" />
            <link rel="search" title="Search" href="search.html" />
            <link rel="top" title="voipbin  documentation" href="#" />
    </head>
<body>
    <script type="text/javascript" src="_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="intro.html"
                        title="voipbin"
                        class="logo navbar-brand"
                    >
                        <img src="_static/images/voipbin-high-resolution-logo-white-transparent.png" width="45" height="80" alt="voipbin"
                            class="logo-img"
                        />
                        VoIPBin Documentation
                    </a>
                
                
                    <div class="collapse navbar-collapse justify-content-end">
                        <ul class="navbar-nav">
                            
                                
                                
                                <li class="nav-item"><a class="nav-link"  href="http://voipbin.net">Project</a></li>
                            
                                
                                
                                <li class="nav-item"><a class="nav-link"  href="https://admin.voipbin.net">Admin</a></li>
                            
                        </ul>
                    </div>
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="accesskey.html">Accesskey</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdk.html">SDK(Software Development Kit)</a></li>
<li class="toctree-l1"><a class="reference internal" href="restful_api.html">RESTful API(Application Programming Interface)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="flow.html">Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow.html#activeflow">Activeflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="variable.html">Variable</a></li>
<li class="toctree-l1"><a class="reference internal" href="webhook.html">Webhook</a></li>
<li class="toctree-l1"><a class="reference internal" href="common.html">Common</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Voice &amp; Real-Time</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="call.html">Call</a></li>
<li class="toctree-l1"><a class="reference internal" href="conference.html">Conference</a></li>
<li class="toctree-l1"><a class="reference internal" href="queue.html">Queue</a></li>
<li class="toctree-l1"><a class="reference internal" href="recording.html">Recording</a></li>
<li class="toctree-l1"><a class="reference internal" href="transcribe.html">Transcribe</a></li>
<li class="toctree-l1"><a class="reference internal" href="mediastream.html">Mediastream</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Messaging</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="message.html">Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.html">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="chat.html">Chat</a></li>
<li class="toctree-l1"><a class="reference internal" href="conversation.html">Conversation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AI &amp; Automation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ai.html">AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="campaign.html">Campaign</a></li>
<li class="toctree-l1"><a class="reference internal" href="outdial.html">Outdial</a></li>
<li class="toctree-l1"><a class="reference internal" href="outplan.html">Outplan</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources &amp; Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="agent.html">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="customer.html">Customer</a></li>
<li class="toctree-l1"><a class="reference internal" href="billing_account.html">Billing Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="tag.html">Tag</a></li>
<li class="toctree-l1"><a class="reference internal" href="provider.html">Provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="route.html">Route</a></li>
<li class="toctree-l1"><a class="reference internal" href="extension.html">Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="trunk.html">Trunk</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Architecture (Deep Dive)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="websocket.html">Websocket</a></li>
<li class="toctree-l1"><a class="reference internal" href="talk.html">Talk</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">Overview</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
    <a class="btn btn-sm btn-light text-decoration-none" href="_sources/call_overview.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="overview">
<span id="call-overview"></span><h1>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h1>
<p>The VoIPBIN call API provides a straightforward and convenient way to develop high-quality call applications in the Cloud. With the VoIPBIN API, developers can leverage familiar web technologies to build scalable and feature-rich call applications, giving them the power to control inbound and outbound call flows using JSON-based VoIPBIN actions. Additionally, the API offers capabilities to record and store inbound or outbound calls, create conference calls, and send text-to-speech messages in multiple languages with different gender and accents.</p>
<p>With the VoIPBIN API you can:</p>
<ul class="simple">
<li><p>Build apps that scale with the web technologies you are already using.</p></li>
<li><p>Control the flow of inbound and outbound calls in JSON with VoIPBIN’s actions.</p></li>
<li><p>Record and store inbound or outbound calls.</p></li>
<li><p>Create conference calls.</p></li>
<li><p>Send text-to-speech messages in 50 languages with different gender and accents.</p></li>
</ul>
<section id="protocol">
<h2>Protocol<a class="headerlink" href="#protocol" title="Link to this heading"></a></h2>
<p>VoIPBIN offers support for various call/video protocols, enabling users to join the same conference room and communicate with one another seamlessly. The flexibility in protocol options ensures efficient and reliable communication between different devices and platforms.</p>
<img alt="_images/call_overview_protocol.png" src="_images/call_overview_protocol.png" />
</section>
<section id="pstn-phone-number-format">
<h2>PSTN/Phone Number Format<a class="headerlink" href="#pstn-phone-number-format" title="Link to this heading"></a></h2>
<p>In the VoIPBIN APIs, all PSTN/Phone numbers must adhere to the <a class="reference external" href="https://en.wikipedia.org/wiki/E.164">+E164</a> format. This format standardizes the representation of phone numbers to facilitate smooth communication and interoperability across different systems.</p>
<p>Key requirements for phone numbers within the VoIPBIN APIs:</p>
<ul class="simple">
<li><p>The phone number must have the ‘+’ symbol at the beginning.</p></li>
<li><p>The number should not contain any special characters, such as spaces, parentheses, or hyphens.</p></li>
</ul>
<p>For example, a US phone number should be represented as +16062067563, and a UK phone number should be represented as +442071234567.</p>
</section>
<section id="extension-number-format">
<h2>Extension Number Format<a class="headerlink" href="#extension-number-format" title="Link to this heading"></a></h2>
<p>The extension numbers used in the VoIPBIN system can be customized according to specific requirements. However, they must adhere to the following limitation:</p>
<ul class="simple">
<li><p>Extension numbers should not contain any special characters, such as spaces, parentheses, or hyphens.</p></li>
</ul>
<p>The absence of special characters ensures consistent and reliable processing of extension numbers within the VoIPBIN system, promoting smooth communication and interaction.</p>
</section>
<section id="call-lifecycle">
<h2>Call Lifecycle<a class="headerlink" href="#call-lifecycle" title="Link to this heading"></a></h2>
<p>Every call in VoIPBIN follows a predictable lifecycle from creation to termination. Understanding this lifecycle helps you build reliable applications that respond correctly to call state changes.</p>
<p><strong>State Diagram</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                               <span class="o">+--------------+</span>
                               <span class="o">|</span>   <span class="n">dialing</span>    <span class="o">|</span>
                               <span class="o">|</span> <span class="p">(</span><span class="n">call</span> <span class="n">starts</span><span class="p">)</span><span class="o">|</span>
                               <span class="o">+------+-------+</span>
                                      <span class="o">|</span>
                <span class="o">+---------------------+---------------------+</span>
                <span class="o">|</span>                     <span class="o">|</span>                     <span class="o">|</span>
                <span class="n">v</span>                     <span class="n">v</span>                     <span class="n">v</span>
         <span class="o">+------------+</span>        <span class="o">+------------+</span>        <span class="o">+------------+</span>
         <span class="o">|</span>  <span class="n">ringing</span>   <span class="o">|</span>        <span class="o">|</span> <span class="n">canceling</span>  <span class="o">|</span>        <span class="o">|</span>  <span class="n">hangup</span>    <span class="o">|</span>
         <span class="o">|</span> <span class="p">(</span><span class="n">dest</span> <span class="n">rang</span><span class="p">)</span><span class="o">|</span>        <span class="o">|</span> <span class="p">(</span><span class="n">caller</span>    <span class="o">|</span>        <span class="o">|</span> <span class="p">(</span><span class="n">failed</span><span class="p">)</span>   <span class="o">|</span>
         <span class="o">+-----+------+</span>        <span class="o">|</span>  <span class="n">cancels</span><span class="p">)</span>  <span class="o">|</span>        <span class="o">+------------+</span>
               <span class="o">|</span>               <span class="o">+-----+------+</span>
               <span class="o">|</span>                     <span class="o">|</span>
               <span class="n">v</span>                     <span class="o">|</span>
        <span class="o">+-------------+</span>              <span class="o">|</span>
        <span class="o">|</span> <span class="n">progressing</span> <span class="o">|</span>              <span class="o">|</span>
        <span class="o">|</span> <span class="p">(</span><span class="n">answered</span><span class="p">)</span>  <span class="o">|</span>              <span class="o">|</span>
        <span class="o">+------+------+</span>              <span class="o">|</span>
               <span class="o">|</span>                     <span class="o">|</span>
      <span class="o">+--------+--------+</span>            <span class="o">|</span>
      <span class="n">v</span>                 <span class="n">v</span>            <span class="o">|</span>
<span class="o">+------------+</span>   <span class="o">+------------+</span>      <span class="o">|</span>
<span class="o">|</span><span class="n">terminating</span> <span class="o">|</span>   <span class="o">|</span>  <span class="n">hangup</span>    <span class="o">|</span>      <span class="o">|</span>
<span class="o">|</span>  <span class="p">(</span><span class="n">ending</span>   <span class="o">|</span>   <span class="o">|</span>  <span class="p">(</span><span class="n">remote</span>   <span class="o">|</span>      <span class="o">|</span>
<span class="o">|</span>   <span class="n">locally</span><span class="p">)</span> <span class="o">|</span>   <span class="o">|</span>  <span class="n">hangup</span><span class="p">)</span>   <span class="o">|</span>      <span class="o">|</span>
<span class="o">+-----+------+</span>   <span class="o">+------------+</span>      <span class="o">|</span>
      <span class="o">|</span>                              <span class="o">|</span>
      <span class="o">+--------------+---------------+</span>
                     <span class="n">v</span>
              <span class="o">+------------+</span>
              <span class="o">|</span>   <span class="n">hangup</span>   <span class="o">|</span>
              <span class="o">|</span>  <span class="p">(</span><span class="n">final</span><span class="p">)</span>   <span class="o">|</span>
              <span class="o">+------------+</span>
</pre></div>
</div>
<p><strong>State Descriptions</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Status</p></th>
<th class="head"><p>What is happening</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dialing</p></td>
<td><p>Call has been created. The system is attempting to reach the
destination through the phone network.</p></td>
</tr>
<tr class="row-odd"><td><p>ringing</p></td>
<td><p>The destination device is ringing. The person being called can
now answer.</p></td>
</tr>
<tr class="row-even"><td><p>progressing</p></td>
<td><p>The call has been answered. Both parties can now hear each
other. Media (audio/video) is flowing.</p></td>
</tr>
<tr class="row-odd"><td><p>terminating</p></td>
<td><p>The system is ending the call. This happens when your
application hangs up or a flow action ends the call.</p></td>
</tr>
<tr class="row-even"><td><p>canceling</p></td>
<td><p>The caller is canceling before the destination answered.
Only happens for outgoing calls.</p></td>
</tr>
<tr class="row-odd"><td><p>hangup</p></td>
<td><p>The call has ended. This is the final state - no further
changes are possible.</p></td>
</tr>
</tbody>
</table>
<p><strong>Key Behaviors</strong></p>
<ul class="simple">
<li><p>States only move forward, never backward. A call that reached “progressing” cannot go back to “ringing”.</p></li>
<li><p>Once a call reaches “hangup”, it cannot change anymore.</p></li>
<li><p>The “canceling” state only applies to outgoing calls (when the originator hangs up before answer).</p></li>
</ul>
</section>
<section id="what-happens-at-each-stage">
<h2>What Happens At Each Stage<a class="headerlink" href="#what-happens-at-each-stage" title="Link to this heading"></a></h2>
<p><strong>During Dialing</strong></p>
<p>When you create an outbound call or receive an inbound call, the call enters the dialing state.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Your</span> <span class="n">App</span>                    <span class="n">VoIPBIN</span>                    <span class="n">Destination</span>
   <span class="o">|</span>                           <span class="o">|</span>                            <span class="o">|</span>
   <span class="o">|</span>  <span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span>           <span class="o">|</span>                            <span class="o">|</span>
   <span class="o">+--------------------------&gt;|</span>                            <span class="o">|</span>
   <span class="o">|</span>                           <span class="o">|</span>  <span class="n">SIP</span> <span class="n">INVITE</span>                <span class="o">|</span>
   <span class="o">|</span>                           <span class="o">+---------------------------&gt;|</span>
   <span class="o">|</span>                           <span class="o">|</span>                            <span class="o">|</span>
   <span class="o">|</span>  <span class="n">Call</span> <span class="nb">object</span>              <span class="o">|</span>                            <span class="o">|</span>
   <span class="o">|</span>  <span class="n">status</span><span class="p">:</span> <span class="s2">&quot;dialing&quot;</span>        <span class="o">|</span>                            <span class="o">|</span>
   <span class="o">|&lt;--------------------------+</span>                            <span class="o">|</span>
</pre></div>
</div>
<p>At this point:</p>
<ul class="simple">
<li><p>VoIPBIN is trying to reach the destination</p></li>
<li><p>No audio is flowing yet</p></li>
<li><p>The call may fail if the network is unreachable</p></li>
</ul>
<p><strong>During Ringing</strong></p>
<p>The destination device is ringing. The person can pick up the phone.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>                           <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>                           <span class="o">|</span>  <span class="mi">180</span> <span class="n">Ringing</span>               <span class="o">|</span>
<span class="o">|</span>                           <span class="o">|&lt;---------------------------+</span>
<span class="o">|</span>  <span class="n">Webhook</span><span class="p">:</span> <span class="n">call_updated</span>    <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>  <span class="n">status</span><span class="p">:</span> <span class="s2">&quot;ringing&quot;</span>        <span class="o">|</span>       <span class="n">Ring</span> <span class="n">Ring</span>            <span class="o">|</span>
<span class="o">|&lt;--------------------------+</span>                            <span class="o">|</span>
</pre></div>
</div>
<p>At this point:</p>
<ul class="simple">
<li><p>The destination phone is ringing</p></li>
<li><p>Early media (ringback tone) may be playing</p></li>
<li><p>The caller is waiting for an answer</p></li>
</ul>
<p><strong>During Progressing (Answered)</strong></p>
<p>The call has been answered. This is when real communication begins.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>                           <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>                           <span class="o">|</span>  <span class="mi">200</span> <span class="n">OK</span>                    <span class="o">|</span>
<span class="o">|</span>                           <span class="o">|&lt;---------------------------+</span>
<span class="o">|</span>  <span class="n">Webhook</span><span class="p">:</span> <span class="n">call_updated</span>    <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>  <span class="n">status</span><span class="p">:</span> <span class="s2">&quot;progressing&quot;</span>    <span class="o">|</span>   <span class="o">&lt;=====================&gt;</span>  <span class="o">|</span>
<span class="o">|&lt;--------------------------+</span>        <span class="p">(</span><span class="n">Audio</span> <span class="n">flows</span><span class="p">)</span>       <span class="o">|</span>
</pre></div>
</div>
<p>At this point:</p>
<ul class="simple">
<li><p>Both parties can hear each other</p></li>
<li><p>Flow actions start executing (if defined)</p></li>
<li><p>Recording can begin</p></li>
<li><p>Media controls (hold, mute) become available</p></li>
</ul>
<p><strong>During Hangup</strong></p>
<p>The call has ended. Check the hangup_by and hangup_reason fields to understand why.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>                           <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>                           <span class="o">|</span>  <span class="n">BYE</span>                       <span class="o">|</span>
<span class="o">|</span>                           <span class="o">|&lt;---------------------------+</span>
<span class="o">|</span>  <span class="n">Webhook</span><span class="p">:</span> <span class="n">call_updated</span>    <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>  <span class="n">status</span><span class="p">:</span> <span class="s2">&quot;hangup&quot;</span>         <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>  <span class="n">hangup_by</span><span class="p">:</span> <span class="s2">&quot;remote&quot;</span>      <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|</span>  <span class="n">hangup_reason</span><span class="p">:</span> <span class="s2">&quot;normal&quot;</span>  <span class="o">|</span>                            <span class="o">|</span>
<span class="o">|&lt;--------------------------+</span>                            <span class="o">|</span>
</pre></div>
</div>
</section>
<section id="understanding-hangup-reasons">
<h2>Understanding Hangup Reasons<a class="headerlink" href="#understanding-hangup-reasons" title="Link to this heading"></a></h2>
<p>When a call ends, VoIPBIN tells you why it ended. This helps you build appropriate responses for different scenarios.</p>
<p><strong>Hangup Reason Values</strong></p>
<p><strong>Hangup By Values</strong></p>
<p><strong>Common Scenarios</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Scenario</span><span class="p">:</span> <span class="n">Normal</span> <span class="n">conversation</span>
<span class="o">----------------------------</span>
<span class="n">hangup_by</span><span class="p">:</span> <span class="s2">&quot;remote&quot;</span>
<span class="n">hangup_reason</span><span class="p">:</span> <span class="s2">&quot;normal&quot;</span>
<span class="o">-&gt;</span> <span class="n">The</span> <span class="n">other</span> <span class="n">person</span> <span class="n">hung</span> <span class="n">up</span> <span class="n">after</span> <span class="n">talking</span>

<span class="n">Scenario</span><span class="p">:</span> <span class="n">Missed</span> <span class="n">call</span>
<span class="o">----------------------------</span>
<span class="n">hangup_by</span><span class="p">:</span> <span class="s2">&quot;remote&quot;</span>
<span class="n">hangup_reason</span><span class="p">:</span> <span class="s2">&quot;noanswer&quot;</span>
<span class="o">-&gt;</span> <span class="n">Phone</span> <span class="n">rang</span> <span class="n">but</span> <span class="n">nobody</span> <span class="n">answered</span>

<span class="n">Scenario</span><span class="p">:</span> <span class="n">Your</span> <span class="n">app</span> <span class="n">ended</span> <span class="n">the</span> <span class="n">call</span>
<span class="o">----------------------------</span>
<span class="n">hangup_by</span><span class="p">:</span> <span class="s2">&quot;local&quot;</span>
<span class="n">hangup_reason</span><span class="p">:</span> <span class="s2">&quot;normal&quot;</span>
<span class="o">-&gt;</span> <span class="n">Your</span> <span class="n">flow</span> <span class="n">action</span> <span class="ow">or</span> <span class="n">API</span> <span class="n">call</span> <span class="n">ended</span> <span class="n">it</span>

<span class="n">Scenario</span><span class="p">:</span> <span class="n">Network</span> <span class="n">problem</span>
<span class="o">----------------------------</span>
<span class="n">hangup_by</span><span class="p">:</span> <span class="s2">&quot;remote&quot;</span>
<span class="n">hangup_reason</span><span class="p">:</span> <span class="s2">&quot;failed&quot;</span>
<span class="o">-&gt;</span> <span class="n">Call</span> <span class="n">never</span> <span class="n">connected</span> <span class="n">due</span> <span class="n">to</span> <span class="n">network</span> <span class="n">issues</span>
</pre></div>
</div>
</section>
<section id="media-control-operations">
<h2>Media Control Operations<a class="headerlink" href="#media-control-operations" title="Link to this heading"></a></h2>
<p>Once a call is in the “progressing” state (answered), you can control the audio in several ways. Each operation is independent - you can combine them as needed.</p>
<p><strong>Hold</strong></p>
<p>Pauses the call. The other party hears silence (or music if MOH is enabled).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Before</span> <span class="n">Hold</span>                          <span class="n">After</span> <span class="n">Hold</span>
<span class="o">+---------+</span>     <span class="n">audio</span>      <span class="o">+---------+</span>     <span class="o">+---------+</span>     <span class="n">silence</span>   <span class="o">+---------+</span>
<span class="o">|</span> <span class="n">Caller</span>  <span class="o">|</span> <span class="o">&lt;============&gt;</span> <span class="o">|</span> <span class="n">VoIPBIN</span> <span class="o">|</span>     <span class="o">|</span> <span class="n">Caller</span>  <span class="o">|</span> <span class="o">------------&gt;</span> <span class="o">|</span> <span class="n">VoIPBIN</span> <span class="o">|</span>
<span class="o">+---------+</span>                <span class="o">+---------+</span>     <span class="o">+---------+</span>  <span class="p">(</span><span class="ow">or</span> <span class="n">music</span><span class="p">)</span>   <span class="o">+---------+</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Use hold when the caller needs to wait (e.g., while transferring)</p></li>
<li><p>The caller stays connected but cannot hear ongoing activity</p></li>
<li><p>Unhold resumes normal audio</p></li>
</ul>
<p><strong>Mute</strong></p>
<p>Silences audio in one or both directions without putting the call on hold.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Mute</span> <span class="s2">&quot;in&quot;</span>                    <span class="n">Mute</span> <span class="s2">&quot;out&quot;</span>                   <span class="n">Mute</span> <span class="s2">&quot;both&quot;</span>
<span class="o">+----+</span>  <span class="o">---</span><span class="n">X</span><span class="o">--&gt;</span>  <span class="o">+----+</span>     <span class="o">+----+</span>  <span class="o">&lt;--</span><span class="n">X</span><span class="o">---</span>  <span class="o">+----+</span>      <span class="o">+----+</span>  <span class="o">--</span><span class="n">X</span><span class="o">--</span>  <span class="o">+----+</span>
<span class="o">|</span> <span class="n">A</span>  <span class="o">|</span>  <span class="o">&lt;------</span>  <span class="o">|</span> <span class="n">B</span>  <span class="o">|</span>     <span class="o">|</span> <span class="n">A</span>  <span class="o">|</span>  <span class="o">-------&gt;</span> <span class="o">|</span> <span class="n">B</span>  <span class="o">|</span>      <span class="o">|</span> <span class="n">A</span>  <span class="o">|</span>  <span class="o">--</span><span class="n">X</span><span class="o">--</span>  <span class="o">|</span> <span class="n">B</span>  <span class="o">|</span>
<span class="o">+----+</span>           <span class="o">+----+</span>     <span class="o">+----+</span>           <span class="o">+----+</span>      <span class="o">+----+</span>         <span class="o">+----+</span>
<span class="n">A</span> <span class="n">cannot</span> <span class="n">hear</span> <span class="n">B</span>            <span class="n">A</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">heard</span>           <span class="n">Complete</span> <span class="n">silence</span>
</pre></div>
</div>
<ul class="simple">
<li><p>“in”: The call cannot hear incoming audio</p></li>
<li><p>“out”: The call’s audio is not sent to others</p></li>
<li><p>“both”: Complete silence in both directions</p></li>
</ul>
<p><strong>Recording</strong></p>
<p>Captures the call audio for later playback.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+---------+</span>         <span class="o">+---------+</span>         <span class="o">+---------+</span>
<span class="o">|</span> <span class="n">Caller</span>  <span class="o">|</span> <span class="o">&lt;=====&gt;</span> <span class="o">|</span> <span class="n">VoIPBIN</span> <span class="o">|</span> <span class="o">&lt;=====&gt;</span> <span class="o">|</span>  <span class="n">Dest</span>   <span class="o">|</span>
<span class="o">+---------+</span>         <span class="o">+----+----+</span>         <span class="o">+---------+</span>
                         <span class="o">|</span>
                         <span class="n">v</span> <span class="p">(</span><span class="n">recording</span><span class="p">)</span>
                    <span class="o">+---------+</span>
                    <span class="o">|</span>  <span class="n">File</span>   <span class="o">|</span>
                    <span class="o">+---------+</span>
</pre></div>
</div>
<ul class="simple">
<li><p>recording_id shows the current recording (if active)</p></li>
<li><p>recording_ids lists all recordings made during this call’s lifetime</p></li>
<li><p>You can start and stop recording multiple times in one call</p></li>
</ul>
</section>
<section id="call-chaining">
<h2>Call Chaining<a class="headerlink" href="#call-chaining" title="Link to this heading"></a></h2>
<p>VoIPBIN’s call concept differs from traditional 1:1 calls. A single logical conversation may involve multiple call objects linked together.</p>
<p><strong>The Two-Call Model</strong></p>
<p>When you make a call from A to B through VoIPBIN, there are actually two separate calls:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Traditional</span> <span class="n">View</span><span class="p">:</span>     <span class="n">A</span> <span class="o">-----------------------&gt;</span> <span class="n">B</span>

<span class="n">VoIPBIN</span> <span class="n">Reality</span><span class="p">:</span>      <span class="n">A</span> <span class="o">&lt;---</span> <span class="n">Call</span> <span class="mi">1</span> <span class="o">---&gt;</span> <span class="n">VoIPBIN</span> <span class="o">&lt;---</span> <span class="n">Call</span> <span class="mi">2</span> <span class="o">---&gt;</span> <span class="n">B</span>
                               <span class="o">|</span>                        <span class="o">|</span>
                               <span class="o">+------------------------+</span>
                                      <span class="p">(</span><span class="n">bridged</span> <span class="n">audio</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Why Two Calls?</strong></p>
<p>This design enables powerful features:</p>
<ul class="simple">
<li><p><strong>Recording</strong>: VoIPBIN can record both sides independently</p></li>
<li><p><strong>Conferencing</strong>: Add more parties without changing the original calls</p></li>
<li><p><strong>Transfer</strong>: Move calls between agents without dropping the caller</p></li>
<li><p><strong>Flow Control</strong>: Run different actions on each call leg</p></li>
</ul>
<p><strong>Master and Chained Calls</strong></p>
<p>When calls are related, they form a chain:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+-------------------------------------------------------+</span>
<span class="o">|</span>                    <span class="n">Master</span> <span class="n">Call</span>                        <span class="o">|</span>
<span class="o">|</span>  <span class="n">master_call_id</span><span class="p">:</span> <span class="mi">00000000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">0000</span><span class="o">-</span><span class="mi">000000000000</span> <span class="o">|</span>
<span class="o">|</span>  <span class="n">chained_call_ids</span><span class="p">:</span> <span class="p">[</span><span class="n">call</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="nb">id</span><span class="p">,</span> <span class="n">call</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="nb">id</span><span class="p">]</span>             <span class="o">|</span>
<span class="o">+-------------------------+-----------------------------+</span>
                          <span class="o">|</span>
          <span class="o">+---------------+---------------+</span>
          <span class="n">v</span>               <span class="n">v</span>               <span class="n">v</span>
    <span class="o">+----------+</span>    <span class="o">+----------+</span>    <span class="o">+----------+</span>
    <span class="o">|</span> <span class="n">Call</span> <span class="mi">2</span>   <span class="o">|</span>    <span class="o">|</span> <span class="n">Call</span> <span class="mi">3</span>   <span class="o">|</span>    <span class="o">|</span> <span class="n">Call</span> <span class="mi">4</span>   <span class="o">|</span>
    <span class="o">|</span> <span class="n">master</span><span class="p">:</span>  <span class="o">|</span>    <span class="o">|</span> <span class="n">master</span><span class="p">:</span>  <span class="o">|</span>    <span class="o">|</span> <span class="n">master</span><span class="p">:</span>  <span class="o">|</span>
    <span class="o">|</span> <span class="n">call</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="nb">id</span><span class="o">|</span>    <span class="o">|</span> <span class="n">call</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="nb">id</span><span class="o">|</span>    <span class="o">|</span> <span class="n">call</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="nb">id</span><span class="o">|</span>
    <span class="o">+----------+</span>    <span class="o">+----------+</span>    <span class="o">+----------+</span>
</pre></div>
</div>
<p><strong>Chaining Behaviors</strong></p>
<ul class="simple">
<li><p>When the master call hangs up, all chained calls automatically hang up</p></li>
<li><p>Chained calls can only be added while the master is in dialing, ringing, or progressing state</p></li>
<li><p>Each chained call tracks its master via the master_call_id field</p></li>
</ul>
<p><strong>Common Use Case: Transfer</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Step</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Caller</span> <span class="ow">and</span> <span class="n">Agent</span> <span class="n">talking</span>
<span class="o">+--------+</span>       <span class="o">+---------+</span>       <span class="o">+--------+</span>
<span class="o">|</span> <span class="n">Caller</span> <span class="o">|&lt;-----&gt;|</span> <span class="n">VoIPBIN</span> <span class="o">|&lt;-----&gt;|</span> <span class="n">Agent</span>  <span class="o">|</span>
<span class="o">+--------+</span>       <span class="o">+----+----+</span>       <span class="o">+--------+</span>
                      <span class="o">|</span>
                 <span class="n">Master</span> <span class="n">Call</span>

<span class="n">Step</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Agent</span> <span class="n">initiates</span> <span class="n">transfer</span> <span class="n">to</span> <span class="n">Supervisor</span>
<span class="o">+--------+</span>       <span class="o">+---------+</span>       <span class="o">+--------+</span>
<span class="o">|</span> <span class="n">Caller</span> <span class="o">|&lt;-----&gt;|</span> <span class="n">VoIPBIN</span> <span class="o">|</span>       <span class="o">|</span> <span class="n">Agent</span>  <span class="o">|</span> <span class="p">(</span><span class="n">on</span> <span class="n">hold</span><span class="p">)</span>
<span class="o">+--------+</span>       <span class="o">+----+----+</span>       <span class="o">+--------+</span>
                      <span class="o">|</span>
                      <span class="o">+-----------&gt;</span> <span class="o">+------------+</span>
                      <span class="o">|</span>            <span class="o">|</span> <span class="n">Supervisor</span> <span class="o">|</span> <span class="p">(</span><span class="n">ringing</span><span class="p">)</span>
                 <span class="n">Chained</span> <span class="n">Call</span>      <span class="o">+------------+</span>

<span class="n">Step</span> <span class="mi">3</span><span class="p">:</span> <span class="n">Supervisor</span> <span class="n">answers</span><span class="p">,</span> <span class="n">Agent</span> <span class="n">drops</span>
<span class="o">+--------+</span>       <span class="o">+---------+</span>       <span class="o">+------------+</span>
<span class="o">|</span> <span class="n">Caller</span> <span class="o">|&lt;-----&gt;|</span> <span class="n">VoIPBIN</span> <span class="o">|&lt;-----&gt;|</span> <span class="n">Supervisor</span> <span class="o">|</span>
<span class="o">+--------+</span>       <span class="o">+---------+</span>       <span class="o">+------------+</span>
</pre></div>
</div>
</section>
<section id="timestamps-explained">
<h2>Timestamps Explained<a class="headerlink" href="#timestamps-explained" title="Link to this heading"></a></h2>
<p>Each call tracks important moments in its lifecycle:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Timeline</span> <span class="n">of</span> <span class="n">a</span> <span class="n">successful</span> <span class="n">call</span><span class="p">:</span>

<span class="o">|</span> <span class="n">tm_create</span>                    <span class="n">tm_ringing</span>          <span class="n">tm_progressing</span>              <span class="n">tm_hangup</span>
<span class="o">|</span>     <span class="o">|</span>                            <span class="o">|</span>                    <span class="o">|</span>                          <span class="o">|</span>
<span class="n">v</span>     <span class="n">v</span>                            <span class="n">v</span>                    <span class="n">v</span>                          <span class="n">v</span>
<span class="o">------</span><span class="n">o</span><span class="o">----------------------------</span><span class="n">o</span><span class="o">--------------------</span><span class="n">o</span><span class="o">--------------------------</span><span class="n">o</span><span class="o">------&gt;</span>
      <span class="o">|</span>                            <span class="o">|</span>                    <span class="o">|</span>                          <span class="o">|</span>
      <span class="o">|&lt;---</span> <span class="n">dialing</span> <span class="o">--------------&gt;|&lt;---</span> <span class="n">ringing</span> <span class="o">------&gt;|&lt;----</span> <span class="n">progressing</span> <span class="o">-------&gt;|</span>
      <span class="o">|</span>                            <span class="o">|</span>                    <span class="o">|</span>                          <span class="o">|</span>
   <span class="n">Call</span> <span class="n">created</span>              <span class="n">Phone</span> <span class="n">started</span>           <span class="n">Call</span> <span class="n">answered</span>            <span class="n">Call</span> <span class="n">ended</span>
                               <span class="n">ringing</span>
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Timestamp</p></th>
<th class="head"><p>When it’s set</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tm_create</p></td>
<td><p>When the call object was created in VoIPBIN</p></td>
</tr>
<tr class="row-odd"><td><p>tm_ringing</p></td>
<td><p>When the destination phone started ringing</p></td>
</tr>
<tr class="row-even"><td><p>tm_progressing</p></td>
<td><p>When the call was answered</p></td>
</tr>
<tr class="row-odd"><td><p>tm_hangup</p></td>
<td><p>When the call ended</p></td>
</tr>
<tr class="row-even"><td><p>tm_update</p></td>
<td><p>Last time any call property changed</p></td>
</tr>
</tbody>
</table>
<p><strong>Calculating Durations</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Ring</span> <span class="n">duration</span> <span class="o">=</span> <span class="n">tm_progressing</span> <span class="o">-</span> <span class="n">tm_ringing</span>
<span class="n">Talk</span> <span class="n">duration</span> <span class="o">=</span> <span class="n">tm_hangup</span> <span class="o">-</span> <span class="n">tm_progressing</span>
<span class="n">Total</span> <span class="n">duration</span> <span class="o">=</span> <span class="n">tm_hangup</span> <span class="o">-</span> <span class="n">tm_create</span>
</pre></div>
</div>
</section>
<section id="route-failover">
<h2>Route Failover<a class="headerlink" href="#route-failover" title="Link to this heading"></a></h2>
<p>When an outgoing call fails during dialing or ringing, VoIPBIN can automatically try alternate routes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>+-----------------------------------------------------------------+
|                       Call Attempt Flow                         |
+-----------------------------------------------------------------+

                          Create Call
                               |
                               v
                       +--------------+
                       |   Route 1    |
                       |  (Primary)   |
                       +------+-------+
                              |
                      +-------+-------+
                      v               v
                 Connected?       Failed?
                      |               |
                      v               v
                  Success      +--------------+
                               |   Route 2    |
                               |  (Backup)    |
                               +------+-------+
                                      |
                              +-------+-------+
                              v               v
                         Connected?       Failed?
                              |               |
                              v               v
                          Success      +--------------+
                                       |   Route 3    |
                                       |  (Last try)  |
                                       +------+-------+
                                              |
                                              v
                                        Final Result
</pre></div>
</div>
<p><strong>Failover Rules</strong></p>
<p>Not all failures trigger failover. VoIPBIN only tries the next route when recovery is possible:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Hangup Reason</p></th>
<th class="head"><p>Failover</p></th>
<th class="head"><p>Why</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>failed</p></td>
<td><p>Yes</p></td>
<td><p>Network issue - another route might work</p></td>
</tr>
<tr class="row-odd"><td><p>busy</p></td>
<td><p>No</p></td>
<td><p>The person is busy - trying again won’t help</p></td>
</tr>
<tr class="row-even"><td><p>noanswer</p></td>
<td><p>No</p></td>
<td><p>They didn’t answer - their choice</p></td>
</tr>
<tr class="row-odd"><td><p>cancel</p></td>
<td><p>No</p></td>
<td><p>Caller cancelled - no need to retry</p></td>
</tr>
<tr class="row-even"><td><p>normal</p></td>
<td><p>No</p></td>
<td><p>Call succeeded - nothing to retry</p></td>
</tr>
</tbody>
</table>
<p><strong>No Failover Cases</strong></p>
<p>Failover is disabled in these situations:</p>
<ul class="simple">
<li><p>Incoming calls (the route is fixed by the caller)</p></li>
<li><p>Conference calls</p></li>
<li><p>Calls where flow execution already started (early_execution flag)</p></li>
</ul>
</section>
<section id="incoming-call">
<h2>Incoming call<a class="headerlink" href="#incoming-call" title="Link to this heading"></a></h2>
<p>The VoIPBIN system provides the functionality to receive incoming calls from external parties. This feature allows users to accept and handle incoming calls through their VoIP services. Incoming calls are crucial for various communication applications and call center setups as they enable users to receive inquiries, provide support, and engage with customers, clients, or other users.
When an incoming call is received, the VoIPBIN system processes the call request and prepares for call handling based on the specified parameters and configurations.</p>
</section>
<section id="execution-of-call-flow-for-incoming-call">
<h2>Execution of Call Flow for incoming call<a class="headerlink" href="#execution-of-call-flow-for-incoming-call" title="Link to this heading"></a></h2>
<p>The execution of the call flow for incoming calls involves a simple yet effective sequence of actions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">External</span> <span class="n">Caller</span>                <span class="n">VoIPBIN</span>                    <span class="n">Your</span> <span class="n">Flow</span>
      <span class="o">|</span>                           <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|</span>  <span class="n">INVITE</span> <span class="p">(</span><span class="n">call</span> <span class="n">request</span><span class="p">)</span>    <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">+--------------------------&gt;|</span>                           <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">|</span>  <span class="n">Lookup</span> <span class="n">destination</span>       <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">|</span>  <span class="n">Find</span> <span class="n">matching</span> <span class="n">flow</span>       <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|</span>  <span class="mi">100</span> <span class="n">Trying</span>               <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|&lt;--------------------------+</span>                           <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">|</span>  <span class="n">Execute</span> <span class="n">flow</span> <span class="n">actions</span>     <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">+--------------------------&gt;|</span>
      <span class="o">|</span>  <span class="mi">180</span> <span class="n">Ringing</span> <span class="o">/</span> <span class="mi">200</span> <span class="n">OK</span>     <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|&lt;--------------------------+&lt;--------------------------+</span>
      <span class="o">|</span>                           <span class="o">|</span>                           <span class="o">|</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Call Verification</strong>: When an incoming call is received, the VoIPBIN system verifies the call’s authenticity and checks for any potential security risks, such as spoofed or fraudulent calls. This verification process ensures that legitimate calls are allowed to proceed.</p></li>
<li><p><strong>Determine Call Flow</strong>: After successful verification, the system determines the appropriate call flow based on the destination of the incoming call. The call flow includes a set of predefined actions and configurations tailored to handle calls directed to a specific user, department, or interactive voice response (IVR) system.</p></li>
<li><p><strong>Execute Call Flow</strong>: Once the call flow is determined, the system proceeds to execute it without delay. The call flow actions are triggered in accordance with the predefined configuration for the call destination.</p></li>
<li><p><strong>End the Call</strong>: After executing the call flow actions, the system initiates the process of ending the call. The call is terminated, and the connection with the external party is disconnected.</p></li>
</ul>
<p>By following this streamlined call flow process, the VoIPBIN system efficiently handles incoming calls, ensures their secure and verified handling, and executes the appropriate flow actions based on the call destination. After executing the call flow, the system promptly ends the call, completing the call handling process for the incoming call. Customizable flow actions allow users to tailor the call handling process according to their application’s needs, optimizing user experience and call management efficiency.</p>
<img alt="_images/call_incoming.png" src="_images/call_incoming.png" />
</section>
<section id="outgoing-call">
<h2>Outgoing call<a class="headerlink" href="#outgoing-call" title="Link to this heading"></a></h2>
<p>The VoIPBIN system offers the outgoing call feature, enabling users to initiate calls to external parties through their VoIP services. This feature is commonly used in various communication applications and call center setups to establish connections with customers, clients, or other users outside the organization.
To utilize the outgoing call feature, users need to provide the necessary call parameters, such as the destination phone number, caller ID information, and any additional call settings. These parameters are submitted to the VoIPBIN system, which then processes the request and attempts to establish a connection with the specified destination.</p>
</section>
<section id="execution-of-call-flow-for-outgoing-call">
<h2>Execution of Call Flow for outgoing call<a class="headerlink" href="#execution-of-call-flow-for-outgoing-call" title="Link to this heading"></a></h2>
<p>Once the outgoing call request is initiated, the VoIPBIN system starts the process of connecting to the destination phone number. During this phase, the system waits for the called party to answer the call. The call flow refers to the sequence of actions and events that occur from the moment the call is initiated until it is successfully answered or terminated.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Your</span> <span class="n">Application</span>               <span class="n">VoIPBIN</span>                    <span class="n">Destination</span>
      <span class="o">|</span>                           <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|</span>  <span class="n">POST</span> <span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">calls</span>           <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|</span>  <span class="p">(</span><span class="k">with</span> <span class="n">flow</span> <span class="n">actions</span><span class="p">)</span>      <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">+--------------------------&gt;|</span>                           <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">|</span>  <span class="n">INVITE</span>                   <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">+--------------------------&gt;|</span>
      <span class="o">|</span>  <span class="n">Call</span> <span class="n">created</span>             <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|</span>  <span class="n">status</span><span class="p">:</span> <span class="s2">&quot;dialing&quot;</span>        <span class="o">|</span>  <span class="mi">180</span> <span class="n">Ringing</span>              <span class="o">|</span>
      <span class="o">|&lt;--------------------------+&lt;--------------------------+</span>
      <span class="o">|</span>                           <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|</span>  <span class="n">Webhook</span><span class="p">:</span> <span class="s2">&quot;ringing&quot;</span>       <span class="o">|</span>  <span class="mi">200</span> <span class="n">OK</span> <span class="p">(</span><span class="n">answered</span><span class="p">)</span>        <span class="o">|</span>
      <span class="o">|&lt;--------------------------+&lt;--------------------------+</span>
      <span class="o">|</span>                           <span class="o">|</span>                           <span class="o">|</span>
      <span class="o">|</span>  <span class="n">Webhook</span><span class="p">:</span> <span class="s2">&quot;progressing&quot;</span>   <span class="o">|</span>  <span class="o">&lt;=====================&gt;</span>  <span class="o">|</span>
      <span class="o">|&lt;--------------------------+</span>  <span class="n">Execute</span> <span class="n">flow</span> <span class="n">actions</span>     <span class="o">|</span>
      <span class="o">|</span>                           <span class="o">|</span>                           <span class="o">|</span>
</pre></div>
</div>
<p>The call flow execution occurs as follows:</p>
<ul class="simple">
<li><p><strong>Initiation</strong>: The user triggers the outgoing call request, providing the necessary call parameters.</p></li>
<li><p><strong>Call Setup</strong>: The VoIPBIN system processes the request and establishes a connection with the destination phone number.</p></li>
<li><p><strong>Wait for Call Answer</strong>: After the call setup, the system waits for the called party to answer the call. This waiting period involves ringing the called party’s phone and monitoring the call status.</p></li>
<li><p><strong>Call Answered</strong>: Once the called party answers the outgoing call, the system proceeds to execute the predefined call flow actions.</p></li>
<li><p><strong>Flow Actions Execution</strong>: The call flow actions are a set of customizable operations that are executed upon call answer. These actions can include call recording, call routing, call analytics, notifications, and post-call actions, among others.</p></li>
</ul>
<p>The call flow execution is critical for ensuring a smooth and efficient communication experience. By customizing the flow actions, users can tailor the call handling process to meet the specific requirements of their application or service, enhancing user engagement and overall call management.</p>
<img alt="_images/call_outgoing.png" src="_images/call_outgoing.png" />
</section>
<section id="error-handling-and-termination">
<h2>Error handling and Termination<a class="headerlink" href="#error-handling-and-termination" title="Link to this heading"></a></h2>
<p>During the incoming/outgoing call process, various errors may occur, such as call failures or network issues.
The VoIPBIN system have robust error handling mechanisms to gracefully manage such situations. In case of a failed call attempt or call rejection, the system log relevant information for further analysis or reporting purposes.</p>
<p><strong>Common Error Scenarios</strong></p>
</section>
<section id="call-concept">
<h2>Call concept<a class="headerlink" href="#call-concept" title="Link to this heading"></a></h2>
<p>The concept of a call in VoIPBIN departs from the traditional 1:1 call model. Here’s an overview:</p>
<p>In VoIPBIN, a call includes source, destination, and additional metadata. Moreover, the call can be associated with multiple other calls, creating a dynamic journey that goes beyond the standard 1:1 connection. Envision a call’s trajectory as it connects to an agent and then diverges to another destination.</p>
<p>In VoIPBIN, the conventional call scenario A -&gt; B is delineated by two distinct calls:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span>            <span class="n">VoIPBIN</span>            <span class="n">B</span>
<span class="o">|&lt;--</span> <span class="n">Call</span> <span class="mi">1</span> <span class="o">---&gt;|</span>               <span class="o">|</span>
<span class="o">|</span>               <span class="o">|&lt;---</span> <span class="n">Call</span> <span class="mi">2</span> <span class="o">--&gt;|</span>
<span class="o">|&lt;-----</span><span class="n">RTP</span><span class="o">-----&gt;|&lt;-----</span><span class="n">RTP</span><span class="o">-----&gt;|</span>
</pre></div>
</div>
<section id="comparison-traditional-call-concept-vs-voipbin-call-concept">
<h3>Comparison: Traditional Call Concept vs VoIPBIN Call Concept<a class="headerlink" href="#comparison-traditional-call-concept-vs-voipbin-call-concept" title="Link to this heading"></a></h3>
<p>Traditional Call Concept</p>
<ul class="simple">
<li><p>Follows a 1:1 model where a call is a direct connection between a source and a destination.</p></li>
<li><p>Typically involves a straightforward flow from the caller to the recipient.</p></li>
<li><p>Limited in handling complex call journeys or interactions with multiple parties.</p></li>
</ul>
<p>VoIPBIN Call Concept</p>
<ul class="simple">
<li><p>Deviates from the traditional 1:1 model, allowing for more intricate call structures.</p></li>
<li><p>Encompasses source, destination, and additional metadata in a call.</p></li>
<li><p>Permits connections to multiple other calls, creating dynamic call journeys.</p></li>
<li><p>Visualizes a call’s path, which may involve connecting to an agent and branching to additional destinations.</p></li>
</ul>
<p>In summary, while the traditional call concept adheres to a simple point-to-point model, the VoIPBIN call concept introduces a more flexible and multifaceted approach, accommodating diverse call scenarios and interactions.</p>
</section>
</section>
</section>

</main>
                        
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">Overview</a><ul>
<li><a class="reference internal" href="#protocol">Protocol</a></li>
<li><a class="reference internal" href="#pstn-phone-number-format">PSTN/Phone Number Format</a></li>
<li><a class="reference internal" href="#extension-number-format">Extension Number Format</a></li>
<li><a class="reference internal" href="#call-lifecycle">Call Lifecycle</a></li>
<li><a class="reference internal" href="#what-happens-at-each-stage">What Happens At Each Stage</a></li>
<li><a class="reference internal" href="#understanding-hangup-reasons">Understanding Hangup Reasons</a></li>
<li><a class="reference internal" href="#media-control-operations">Media Control Operations</a></li>
<li><a class="reference internal" href="#call-chaining">Call Chaining</a></li>
<li><a class="reference internal" href="#timestamps-explained">Timestamps Explained</a></li>
<li><a class="reference internal" href="#route-failover">Route Failover</a></li>
<li><a class="reference internal" href="#incoming-call">Incoming call</a></li>
<li><a class="reference internal" href="#execution-of-call-flow-for-incoming-call">Execution of Call Flow for incoming call</a></li>
<li><a class="reference internal" href="#outgoing-call">Outgoing call</a></li>
<li><a class="reference internal" href="#execution-of-call-flow-for-outgoing-call">Execution of Call Flow for outgoing call</a></li>
<li><a class="reference internal" href="#error-handling-and-termination">Error handling and Termination</a></li>
<li><a class="reference internal" href="#call-concept">Call concept</a><ul>
<li><a class="reference internal" href="#comparison-traditional-call-concept-vs-voipbin-call-concept">Comparison: Traditional Call Concept vs VoIPBIN Call Concept</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
                <nav aria-label="Footer">
                    <ul class="nav justify-content-center mb-2">
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="http://voipbin.net">About Us</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="http://voipbin.net">Contact</a></li>
                        
                    </ul>
                </nav>
            
            <div class="text-center">
                    &copy; Copyright 2024, Sungtae Kim
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a class="text-white" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.5.0
                    </a>
                    and
                    <a class="text-white" href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 9.1.0
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=fd6eb6e6"></script>
        <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="_static/dist/theme.js"></script>
        <script type="text/javascript" src="_static/dist/vendor.js"></script>
        <script type="text/javascript" src="_static/searchtools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>