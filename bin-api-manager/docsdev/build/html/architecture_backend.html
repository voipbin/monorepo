<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="./">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>Backend Microservices &mdash; voipbin  documentation</title>
    
    <link rel="stylesheet" type="text/css" href="_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8e8a900e" />
      <link rel="stylesheet" type="text/css" href="_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
            <link rel="index" title="Index" href="genindex.html" />
            <link rel="search" title="Search" href="search.html" />
            <link rel="top" title="voipbin  documentation" href="#" />
    </head>
<body>
    <script type="text/javascript" src="_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="intro.html"
                        title="voipbin"
                        class="logo navbar-brand"
                    >
                        <img src="_static/images/voipbin-high-resolution-logo-white-transparent.png" width="45" height="80" alt="voipbin"
                            class="logo-img"
                        />
                        VoIPBin Documentation
                    </a>
                
                
                    <div class="collapse navbar-collapse justify-content-end">
                        <ul class="navbar-nav">
                            
                                
                                
                                <li class="nav-item"><a class="nav-link"  href="http://voipbin.net">Project</a></li>
                            
                                
                                
                                <li class="nav-item"><a class="nav-link"  href="https://admin.voipbin.net">Admin</a></li>
                            
                        </ul>
                    </div>
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="common.html">Common</a></li>
<li class="toctree-l1"><a class="reference internal" href="restful_api.html">RESTful API(Application Programming Interface)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdk.html">SDK(Software Development Kit)</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="accesskey.html">Accesskey</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow.html">Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="activeflow.html">Activeflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="call.html">Call</a></li>
<li class="toctree-l1"><a class="reference internal" href="message.html">Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.html">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="agent.html">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="conference.html">Conference</a></li>
<li class="toctree-l1"><a class="reference internal" href="mediastream.html">Mediastream</a></li>
<li class="toctree-l1"><a class="reference internal" href="conversation.html">Conversation</a></li>
<li class="toctree-l1"><a class="reference internal" href="extension.html">Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="queue.html">Queue</a></li>
<li class="toctree-l1"><a class="reference internal" href="recording.html">Recording</a></li>
<li class="toctree-l1"><a class="reference internal" href="tag.html">Tag</a></li>
<li class="toctree-l1"><a class="reference internal" href="campaign.html">Campaign</a></li>
<li class="toctree-l1"><a class="reference internal" href="outdial.html">Outdial</a></li>
<li class="toctree-l1"><a class="reference internal" href="outplan.html">Outplan</a></li>
<li class="toctree-l1"><a class="reference internal" href="webhook.html">Webhook</a></li>
<li class="toctree-l1"><a class="reference internal" href="customer.html">Customer</a></li>
<li class="toctree-l1"><a class="reference internal" href="chat.html">Chat</a></li>
<li class="toctree-l1"><a class="reference internal" href="talk.html">Talk</a></li>
<li class="toctree-l1"><a class="reference internal" href="ai.html">AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="provider.html">Provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="route.html">Route</a></li>
<li class="toctree-l1"><a class="reference internal" href="variable.html">Variable</a></li>
<li class="toctree-l1"><a class="reference internal" href="websocket.html">Websocket</a></li>
<li class="toctree-l1"><a class="reference internal" href="trunk.html">Trunk</a></li>
<li class="toctree-l1"><a class="reference internal" href="billing_account.html">Billing Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="transcribe.html">Transcribe</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">Backend Microservices</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
    <a class="btn btn-sm btn-light text-decoration-none" href="_sources/architecture_backend.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="backend-microservices">
<span id="architecture-backend"></span><h1>Backend Microservices<a class="headerlink" href="#backend-microservices" title="Link to this heading"></a></h1>
<p>VoIPBIN’s backend consists of 30+ specialized Go microservices organized into functional domains. Each service owns its specific business logic and communicates with others through a message queue, enabling independent scaling, deployment, and development.</p>
<section id="microservices-organization">
<h2>Microservices Organization<a class="headerlink" href="#microservices-organization" title="Link to this heading"></a></h2>
<p>Services are organized by functional domain:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VoIPBIN</span> <span class="n">Microservices</span> <span class="n">Architecture</span>

<span class="o">+-------------------------------------------------------------+</span>
<span class="o">|</span>                   <span class="n">Communication</span> <span class="n">Services</span>                    <span class="o">|</span>
<span class="o">+-------------------------------------------------------------+</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">manager</span>        <span class="o">|</span>  <span class="n">Call</span> <span class="n">lifecycle</span> <span class="ow">and</span> <span class="n">routing</span>      <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">conference</span><span class="o">-</span><span class="n">manager</span>  <span class="o">|</span>  <span class="n">Conference</span> <span class="n">bridge</span> <span class="n">management</span>    <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">message</span><span class="o">-</span><span class="n">manager</span>     <span class="o">|</span>  <span class="n">SMS</span> <span class="n">messaging</span> <span class="p">(</span><span class="n">Telnyx</span><span class="o">/</span><span class="n">MsgBird</span><span class="p">)</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">chat</span><span class="o">-</span><span class="n">manager</span>        <span class="o">|</span>  <span class="n">Real</span><span class="o">-</span><span class="n">time</span> <span class="n">chat</span>                  <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">email</span><span class="o">-</span><span class="n">manager</span>       <span class="o">|</span>  <span class="n">Email</span> <span class="n">campaigns</span>                 <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">transfer</span><span class="o">-</span><span class="n">manager</span>    <span class="o">|</span>  <span class="n">Call</span> <span class="n">transfer</span> <span class="n">operations</span>        <span class="o">|</span>
<span class="o">+-------------------------------------------------------------+</span>

<span class="o">+-------------------------------------------------------------+</span>
<span class="o">|</span>                      <span class="n">AI</span> <span class="n">Services</span>                            <span class="o">|</span>
<span class="o">+-------------------------------------------------------------+</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">ai</span><span class="o">-</span><span class="n">manager</span>          <span class="o">|</span>  <span class="n">AI</span> <span class="n">assistants</span> <span class="ow">and</span> <span class="n">processing</span>    <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">transcribe</span><span class="o">-</span><span class="n">manager</span>  <span class="o">|</span>  <span class="n">Speech</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">text</span> <span class="n">transcription</span>    <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">tts</span><span class="o">-</span><span class="n">manager</span>         <span class="o">|</span>  <span class="n">Text</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">speech</span> <span class="n">synthesis</span>        <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">pipecat</span><span class="o">-</span><span class="n">manager</span>     <span class="o">|</span>  <span class="n">Real</span><span class="o">-</span><span class="n">time</span> <span class="n">AI</span> <span class="n">voice</span> <span class="p">(</span><span class="n">Go</span><span class="o">/</span><span class="n">Python</span><span class="p">)</span>  <span class="o">|</span>
<span class="o">+-------------------------------------------------------------+</span>

<span class="o">+-------------------------------------------------------------+</span>
<span class="o">|</span>                    <span class="n">Workflow</span> <span class="n">Services</span>                        <span class="o">|</span>
<span class="o">+-------------------------------------------------------------+</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">flow</span><span class="o">-</span><span class="n">manager</span>        <span class="o">|</span>  <span class="n">Call</span> <span class="n">flow</span> <span class="ow">and</span> <span class="n">IVR</span> <span class="n">orchestration</span> <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">queue</span><span class="o">-</span><span class="n">manager</span>       <span class="o">|</span>  <span class="n">Call</span> <span class="n">queue</span> <span class="n">management</span>           <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">campaign</span><span class="o">-</span><span class="n">manager</span>    <span class="o">|</span>  <span class="n">Outbound</span> <span class="n">campaign</span> <span class="n">automation</span>    <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">outdial</span><span class="o">-</span><span class="n">manager</span>     <span class="o">|</span>  <span class="n">Outbound</span> <span class="n">dialing</span> <span class="n">targets</span>        <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">conversation</span><span class="o">-</span><span class="n">manager</span><span class="o">|</span>  <span class="n">Conversation</span> <span class="n">tracking</span>           <span class="o">|</span>
<span class="o">+-------------------------------------------------------------+</span>

<span class="o">+-------------------------------------------------------------+</span>
<span class="o">|</span>                   <span class="n">Management</span> <span class="n">Services</span>                       <span class="o">|</span>
<span class="o">+-------------------------------------------------------------+</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">agent</span><span class="o">-</span><span class="n">manager</span>       <span class="o">|</span>  <span class="n">Agent</span> <span class="n">state</span> <span class="ow">and</span> <span class="n">presence</span>        <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">billing</span><span class="o">-</span><span class="n">manager</span>     <span class="o">|</span>  <span class="n">Usage</span> <span class="n">tracking</span> <span class="ow">and</span> <span class="n">billing</span>      <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">customer</span><span class="o">-</span><span class="n">manager</span>    <span class="o">|</span>  <span class="n">Customer</span> <span class="ow">and</span> <span class="n">API</span> <span class="n">key</span> <span class="n">management</span> <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">webhook</span><span class="o">-</span><span class="n">manager</span>     <span class="o">|</span>  <span class="n">Webhook</span> <span class="n">delivery</span>                <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">storage</span><span class="o">-</span><span class="n">manager</span>     <span class="o">|</span>  <span class="n">File</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="ow">and</span> <span class="n">recordings</span>     <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">number</span><span class="o">-</span><span class="n">manager</span>      <span class="o">|</span>  <span class="n">Phone</span> <span class="n">number</span> <span class="n">management</span>         <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">tag</span><span class="o">-</span><span class="n">manager</span>         <span class="o">|</span>  <span class="n">Customer</span> <span class="n">tag</span> <span class="n">management</span>         <span class="o">|</span>
<span class="o">+-------------------------------------------------------------+</span>

<span class="o">+-------------------------------------------------------------+</span>
<span class="o">|</span>                  <span class="n">Integration</span> <span class="n">Services</span>                       <span class="o">|</span>
<span class="o">+-------------------------------------------------------------+</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">talk</span><span class="o">-</span><span class="n">manager</span>        <span class="o">|</span>  <span class="n">Agent</span> <span class="n">UI</span> <span class="n">backend</span>                <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">hook</span><span class="o">-</span><span class="n">manager</span>        <span class="o">|</span>  <span class="n">External</span> <span class="n">webhook</span> <span class="n">gateway</span>        <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">sentinel</span><span class="o">-</span><span class="n">manager</span>    <span class="o">|</span>  <span class="n">Kubernetes</span> <span class="n">pod</span> <span class="n">monitoring</span>       <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">route</span><span class="o">-</span><span class="n">manager</span>       <span class="o">|</span>  <span class="n">Call</span> <span class="n">routing</span> <span class="ow">and</span> <span class="n">providers</span>      <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">registrar</span><span class="o">-</span><span class="n">manager</span>   <span class="o">|</span>  <span class="n">SIP</span> <span class="n">registration</span> <span class="n">management</span>     <span class="o">|</span>
<span class="o">+-------------------------------------------------------------+</span>
</pre></div>
</div>
</section>
<section id="service-characteristics">
<h2>Service Characteristics<a class="headerlink" href="#service-characteristics" title="Link to this heading"></a></h2>
<p>Each microservice follows these design principles:</p>
<p><strong>Domain Isolation</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Service</span> <span class="n">Boundary</span><span class="p">:</span>

<span class="o">+----------------------------------------+</span>
<span class="o">|</span>         <span class="nb">bin</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">manager</span>               <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|</span>  <span class="o">+----------------------------------+</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>   <span class="n">Domain</span> <span class="n">Logic</span> <span class="p">(</span><span class="n">Call</span> <span class="n">Handling</span><span class="p">)</span>   <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">+----------------------------------+</span>  <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|</span>  <span class="o">+----------------------------------+</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>   <span class="n">Data</span> <span class="n">Access</span> <span class="p">(</span><span class="n">Call</span> <span class="n">Records</span><span class="p">)</span>     <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">+----------------------------------+</span>  <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|</span>  <span class="o">+----------------------------------+</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>   <span class="n">RPC</span> <span class="n">Handlers</span> <span class="p">(</span><span class="n">Message</span> <span class="n">Queue</span><span class="p">)</span>   <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">+----------------------------------+</span>  <span class="o">|</span>
<span class="o">+----------------------------------------+</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Single Responsibility</strong>: Each service owns one specific domain</p></li>
<li><p><strong>Encapsulated Logic</strong>: Business rules contained within the service</p></li>
<li><p><strong>Data Ownership</strong>: Service owns its database tables and schema</p></li>
<li><p><strong>Clear Boundaries</strong>: Well-defined interfaces and APIs</p></li>
</ul>
<p><strong>Technology Stack</strong></p>
<p>All backend services share a common technology stack:</p>
<ul class="simple">
<li><p><strong>Language</strong>: Go (Golang) 1.21+</p></li>
<li><p><strong>HTTP Framework</strong>: Gin for REST endpoints (when needed)</p></li>
<li><p><strong>Database</strong>: MySQL 8.0 via sqlx</p></li>
<li><p><strong>Cache</strong>: Redis 7.0 via go-redis</p></li>
<li><p><strong>Message Queue</strong>: RabbitMQ via bin-common-handler</p></li>
<li><p><strong>Logging</strong>: Structured logging with logrus</p></li>
<li><p><strong>Monitoring</strong>: Prometheus metrics</p></li>
</ul>
<p><strong>Common Structure</strong></p>
<p>All services follow a consistent directory structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bin</span><span class="o">-&lt;</span><span class="n">service</span><span class="o">&gt;-</span><span class="n">manager</span><span class="o">/</span>
<span class="o">+--</span> <span class="n">cmd</span><span class="o">/</span>
<span class="o">|</span>   <span class="o">+--</span> <span class="o">&lt;</span><span class="n">service</span><span class="o">&gt;-</span><span class="n">manager</span><span class="o">/</span>
<span class="o">|</span>       <span class="o">+--</span> <span class="n">main</span><span class="o">.</span><span class="n">go</span>                 <span class="c1"># Entry point</span>
<span class="o">+--</span> <span class="n">pkg</span><span class="o">/</span>
<span class="o">|</span>   <span class="o">+--</span> <span class="o">&lt;</span><span class="n">domain</span><span class="o">&gt;</span><span class="n">handler</span><span class="o">/</span>            <span class="c1"># Business logic</span>
<span class="o">|</span>   <span class="o">+--</span> <span class="n">dbhandler</span><span class="o">/</span>                  <span class="c1"># Database operations</span>
<span class="o">|</span>   <span class="o">+--</span> <span class="n">cachehandler</span><span class="o">/</span>               <span class="c1"># Redis operations</span>
<span class="o">|</span>   <span class="o">+--</span> <span class="n">listenhandler</span><span class="o">/</span>              <span class="c1"># RabbitMQ RPC handlers</span>
<span class="o">+--</span> <span class="n">models</span><span class="o">/</span>
<span class="o">|</span>   <span class="o">+--</span> <span class="o">&lt;</span><span class="n">resource</span><span class="o">&gt;/</span>                 <span class="c1"># Data models</span>
<span class="o">+--</span> <span class="n">go</span><span class="o">.</span><span class="n">mod</span>                          <span class="c1"># Dependencies</span>
</pre></div>
</div>
</section>
<section id="api-gateway-bin-api-manager">
<h2>API Gateway - bin-api-manager<a class="headerlink" href="#api-gateway-bin-api-manager" title="Link to this heading"></a></h2>
<p>The API Gateway serves as the single entry point for all external requests, handling authentication, authorization, and request routing to backend services.</p>
<p><strong>Gateway Responsibilities</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">API</span> <span class="n">Gateway</span> <span class="n">Layer</span><span class="p">:</span>

<span class="n">External</span> <span class="n">Clients</span>
<span class="p">(</span><span class="n">Web</span><span class="p">,</span> <span class="n">Mobile</span><span class="p">,</span> <span class="n">Server</span><span class="p">)</span>
     <span class="o">|</span>
     <span class="o">|</span> <span class="n">HTTPS</span>
     <span class="n">v</span>
<span class="o">+----------------------------------------+</span>
<span class="o">|</span>        <span class="nb">bin</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">manager</span>                 <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|</span>  <span class="mf">1.</span> <span class="o">+----------------------------+</span>     <span class="o">|</span>
<span class="o">|</span>     <span class="o">|</span>  <span class="n">Authentication</span> <span class="p">(</span><span class="n">JWT</span><span class="p">)</span>      <span class="o">|</span>     <span class="o">|</span>
<span class="o">|</span>     <span class="o">+----------------------------+</span>     <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|</span>  <span class="mf">2.</span> <span class="o">+-----------------------------+</span>    <span class="o">|</span>
<span class="o">|</span>     <span class="o">|</span>  <span class="n">Authorization</span> <span class="p">(</span><span class="n">Permissions</span><span class="p">)</span><span class="o">|</span>    <span class="o">|</span>
<span class="o">|</span>     <span class="o">+-----------------------------+</span>    <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|</span>  <span class="mf">3.</span> <span class="o">+----------------------------+</span>     <span class="o">|</span>
<span class="o">|</span>     <span class="o">|</span>  <span class="n">Rate</span> <span class="n">Limiting</span> <span class="o">/</span> <span class="n">Throttling</span><span class="o">|</span>     <span class="o">|</span>
<span class="o">|</span>     <span class="o">+----------------------------+</span>     <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|</span>  <span class="mf">4.</span> <span class="o">+----------------------------+</span>     <span class="o">|</span>
<span class="o">|</span>     <span class="o">|</span>  <span class="n">Request</span> <span class="n">Routing</span> <span class="p">(</span><span class="n">RabbitMQ</span><span class="p">)</span><span class="o">|</span>     <span class="o">|</span>
<span class="o">|</span>     <span class="o">+----------------------------+</span>     <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|</span>  <span class="mf">5.</span> <span class="o">+----------------------------+</span>     <span class="o">|</span>
<span class="o">|</span>     <span class="o">|</span>  <span class="n">Response</span> <span class="n">Aggregation</span>      <span class="o">|</span>     <span class="o">|</span>
<span class="o">|</span>     <span class="o">+----------------------------+</span>     <span class="o">|</span>
<span class="o">+----------------------------------------+</span>
     <span class="o">|</span>
     <span class="o">|</span> <span class="n">RabbitMQ</span> <span class="n">RPC</span>
     <span class="n">v</span>
<span class="n">Backend</span> <span class="n">Services</span>
</pre></div>
</div>
<p><strong>Authentication Flow</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>JWT Authentication:

Client                    API Gateway              Backend Service
  |                            |                          |
  |  POST /auth/login          |                          |
  +---------------------------&gt;&gt;                          |
  |  {user, pass}              |                          |
  |                            |                          |
  |                            |  Verify credentials      |
  |                            |                          |
  |  JWT Token                 |                          |
  &lt;&lt;---------------------------+                          |
  |                            |                          |
  |                            |                          |
  |  GET /calls?token=xyz      |                          |
  +---------------------------&gt;&gt;                          |
  |                            |  1. Validate JWT         |
  |                            |  2. Extract customer_id  |
  |                            |  3. Check permissions    |
  |                            |                          |
  |                            |  RPC: GetCalls(ctx)      |
  |                            +-------------------------&gt;&gt;
  |                            |                          |
  |                            |  [Call List]             |
  |                            &lt;&lt;-------------------------+
  |                            |                          |
  |  [Call List]               |  4. Return response      |
  &lt;&lt;---------------------------+                          |
  |                            |                          |
</pre></div>
</div>
<p><strong>Authentication Components:</strong></p>
<ul class="simple">
<li><p><strong>JWT Validation</strong>: Validates token signature and expiration</p></li>
<li><p><strong>Customer Extraction</strong>: Extracts customer_id from JWT claims</p></li>
<li><p><strong>Permission Check</strong>: Verifies user has required permissions</p></li>
<li><p><strong>Context Propagation</strong>: Passes auth context to backend services</p></li>
</ul>
<p><strong>Authorization Pattern</strong></p>
<p>VoIPBIN implements authorization at the API Gateway, NOT in backend services:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Authorization</span> <span class="n">Check</span><span class="p">:</span>

<span class="o">+-----------------------------------------------------+</span>
<span class="o">|</span>              <span class="nb">bin</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">manager</span> <span class="p">(</span><span class="n">Gateway</span><span class="p">)</span>              <span class="o">|</span>
<span class="o">|</span>                                                     <span class="o">|</span>
<span class="o">|</span>  <span class="mf">1.</span> <span class="n">Fetch</span> <span class="n">Resource</span>                                  <span class="o">|</span>
<span class="o">|</span>     <span class="o">+-------&gt;</span> <span class="nb">bin</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">manager</span><span class="o">.</span><span class="n">GetCall</span><span class="p">(</span><span class="n">call_id</span><span class="p">)</span>     <span class="o">|</span>
<span class="o">|</span>     <span class="o">|</span>                                               <span class="o">|</span>
<span class="o">|</span>  <span class="mf">2.</span> <span class="n">Check</span> <span class="n">Authorization</span>                             <span class="o">|</span>
<span class="o">|</span>     <span class="o">|</span>  <span class="k">if</span> <span class="n">call</span><span class="o">.</span><span class="n">customer_id</span> <span class="o">!=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">customer_id</span><span class="p">:</span>      <span class="o">|</span>
<span class="o">|</span>     <span class="o">|</span>      <span class="k">return</span> <span class="mi">404</span> <span class="p">(</span><span class="ow">not</span> <span class="mi">403</span><span class="p">,</span> <span class="k">for</span> <span class="n">security</span><span class="p">)</span>       <span class="o">|</span>
<span class="o">|</span>     <span class="o">|</span>                                               <span class="o">|</span>
<span class="o">|</span>  <span class="mf">3.</span> <span class="n">Return</span> <span class="n">Resource</span>                                 <span class="o">|</span>
<span class="o">|</span>     <span class="o">+-------&gt;</span> <span class="k">return</span> <span class="n">call</span>                           <span class="o">|</span>
<span class="o">|</span>                                                     <span class="o">|</span>
<span class="o">+-----------------------------------------------------+</span>

<span class="o">+-----------------------------------------------------+</span>
<span class="o">|</span>           <span class="nb">bin</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">manager</span> <span class="p">(</span><span class="n">Backend</span><span class="p">)</span>                <span class="o">|</span>
<span class="o">|</span>                                                     <span class="o">|</span>
<span class="o">|</span>  <span class="n">o</span> <span class="n">NO</span> <span class="n">authentication</span> <span class="n">logic</span>                          <span class="o">|</span>
<span class="o">|</span>  <span class="n">o</span> <span class="n">NO</span> <span class="n">customer_id</span> <span class="n">validation</span>                        <span class="o">|</span>
<span class="o">|</span>  <span class="n">o</span> <span class="n">Just</span> <span class="n">process</span> <span class="n">RPC</span> <span class="n">requests</span>                        <span class="o">|</span>
<span class="o">|</span>  <span class="n">o</span> <span class="n">Return</span> <span class="n">requested</span> <span class="n">data</span>                            <span class="o">|</span>
<span class="o">|</span>                                                     <span class="o">|</span>
<span class="o">+-----------------------------------------------------+</span>
</pre></div>
</div>
<p><strong>Key Authorization Principles:</strong></p>
<ul class="simple">
<li><p><strong>Gateway-Only Auth</strong>: All authorization logic in bin-api-manager</p></li>
<li><p><strong>Fetch-Then-Check</strong>: Fetch resource first, then verify ownership</p></li>
<li><p><strong>Return 404, Not 403</strong>: Return “not found” for unauthorized access (security)</p></li>
<li><p><strong>Backend Trust</strong>: Backend services trust the gateway</p></li>
</ul>
<p><strong>Request Routing</strong></p>
<p>The gateway routes requests to appropriate backend services:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Routing</span> <span class="n">Decision</span><span class="p">:</span>

<span class="n">HTTP</span> <span class="n">Request</span>          <span class="n">Gateway</span> <span class="n">Router</span>          <span class="n">Backend</span> <span class="n">Service</span>
    <span class="o">|</span>                      <span class="o">|</span>                        <span class="o">|</span>
    <span class="o">|</span>  <span class="n">GET</span> <span class="o">/</span><span class="n">v1</span><span class="mf">.0</span><span class="o">/</span><span class="n">calls</span>     <span class="o">|</span>                        <span class="o">|</span>
    <span class="o">+---------------------&gt;&gt;</span>                        <span class="o">|</span>
    <span class="o">|</span>                      <span class="o">|</span>  <span class="n">Parse</span><span class="p">:</span> <span class="s2">&quot;calls&quot;</span>        <span class="o">|</span>
    <span class="o">|</span>                      <span class="o">|</span>  <span class="o">-&gt;</span> <span class="nb">bin</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">manager</span>   <span class="o">|</span>
    <span class="o">|</span>                      <span class="o">|</span>                        <span class="o">|</span>
    <span class="o">|</span>                      <span class="o">|</span>  <span class="n">RPC</span> <span class="n">Request</span>           <span class="o">|</span>
    <span class="o">|</span>                      <span class="o">+-----------------------&gt;&gt;</span>
    <span class="o">|</span>                      <span class="o">|</span>                        <span class="o">|</span>
    <span class="o">|</span>                      <span class="o">|</span>  <span class="n">RPC</span> <span class="n">Response</span>          <span class="o">|</span>
    <span class="o">|</span>                      <span class="o">&lt;&lt;-----------------------+</span>
    <span class="o">|</span>                      <span class="o">|</span>                        <span class="o">|</span>
    <span class="o">|</span>  <span class="n">JSON</span> <span class="n">Response</span>       <span class="o">|</span>                        <span class="o">|</span>
    <span class="o">&lt;&lt;---------------------+</span>                        <span class="o">|</span>
    <span class="o">|</span>                      <span class="o">|</span>                        <span class="o">|</span>
</pre></div>
</div>
<p><strong>Routing Table:</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>HTTP Endpoint</p></th>
<th class="head"><p>Backend Service</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>/v1.0/calls</p></td>
<td><p>bin-call-manager</p></td>
</tr>
<tr class="row-odd"><td><p>/v1.0/conferences</p></td>
<td><p>bin-conference-manager</p></td>
</tr>
<tr class="row-even"><td><p>/v1.0/messages</p></td>
<td><p>bin-message-manager</p></td>
</tr>
<tr class="row-odd"><td><p>/v1.0/chats</p></td>
<td><p>bin-chat-manager</p></td>
</tr>
<tr class="row-even"><td><p>/v1.0/emails</p></td>
<td><p>bin-email-manager</p></td>
</tr>
<tr class="row-odd"><td><p>/v1.0/agents</p></td>
<td><p>bin-agent-manager</p></td>
</tr>
<tr class="row-even"><td><p>/v1.0/queues</p></td>
<td><p>bin-queue-manager</p></td>
</tr>
<tr class="row-odd"><td><p>/v1.0/campaigns</p></td>
<td><p>bin-campaign-manager</p></td>
</tr>
<tr class="row-even"><td><p>/v1.0/outdials</p></td>
<td><p>bin-outdial-manager</p></td>
</tr>
<tr class="row-odd"><td><p>/v1.0/flows</p></td>
<td><p>bin-flow-manager</p></td>
</tr>
<tr class="row-even"><td><p>/v1.0/conversations</p></td>
<td><p>bin-conversation-manager</p></td>
</tr>
<tr class="row-odd"><td><p>/v1.0/billings</p></td>
<td><p>bin-billing-manager</p></td>
</tr>
<tr class="row-even"><td><p>/v1.0/customers</p></td>
<td><p>bin-customer-manager</p></td>
</tr>
<tr class="row-odd"><td><p>/v1.0/webhooks</p></td>
<td><p>bin-webhook-manager</p></td>
</tr>
<tr class="row-even"><td><p>/v1.0/transcribes</p></td>
<td><p>bin-transcribe-manager</p></td>
</tr>
<tr class="row-odd"><td><p>/v1.0/numbers</p></td>
<td><p>bin-number-manager</p></td>
</tr>
<tr class="row-even"><td><p>/v1.0/routes</p></td>
<td><p>bin-route-manager</p></td>
</tr>
<tr class="row-odd"><td><p>/v1.0/tags</p></td>
<td><p>bin-tag-manager</p></td>
</tr>
<tr class="row-even"><td><p>/v1.0/storage</p></td>
<td><p>bin-storage-manager</p></td>
</tr>
<tr class="row-odd"><td><p>/v1.0/transfers</p></td>
<td><p>bin-transfer-manager</p></td>
</tr>
</tbody>
</table>
</section>
<section id="special-service-architectures">
<h2>Special Service Architectures<a class="headerlink" href="#special-service-architectures" title="Link to this heading"></a></h2>
<p>Some services have unique architectures that differ from the standard microservice pattern:</p>
<p><strong>bin-pipecat-manager (Hybrid Go/Python)</strong></p>
<p>This service combines Go and Python for AI-powered voice conversations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Hybrid</span> <span class="n">Architecture</span><span class="p">:</span>

<span class="o">+------------------------------------------------------------+</span>
<span class="o">|</span>                  <span class="nb">bin</span><span class="o">-</span><span class="n">pipecat</span><span class="o">-</span><span class="n">manager</span>                       <span class="o">|</span>
<span class="o">|</span>                                                            <span class="o">|</span>
<span class="o">|</span>   <span class="n">Go</span> <span class="n">Service</span> <span class="p">(</span><span class="n">Port</span> <span class="mi">8080</span><span class="p">)</span>         <span class="n">Python</span> <span class="n">Service</span> <span class="p">(</span><span class="n">Port</span> <span class="mi">8000</span><span class="p">)</span><span class="o">|</span>
<span class="o">|</span>   <span class="o">+---------------------+</span>        <span class="o">+---------------------+</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span> <span class="n">o</span> <span class="n">RabbitMQ</span> <span class="n">RPC</span>      <span class="o">|</span>  <span class="n">HTTP</span>  <span class="o">|</span> <span class="n">o</span> <span class="n">FastAPI</span> <span class="n">server</span>    <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span> <span class="n">o</span> <span class="n">WebSocket</span> <span class="n">server</span>  <span class="o">|&lt;------&gt;|</span> <span class="n">o</span> <span class="n">Pipecat</span> <span class="n">pipelines</span> <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span> <span class="n">o</span> <span class="n">Session</span> <span class="n">lifecycle</span> <span class="o">|</span>        <span class="o">|</span> <span class="n">o</span> <span class="n">STT</span><span class="o">/</span><span class="n">LLM</span><span class="o">/</span><span class="n">TTS</span>       <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span> <span class="n">o</span> <span class="n">Audiosocket</span> <span class="p">(</span><span class="n">RTP</span><span class="p">)</span> <span class="o">|</span>        <span class="o">|</span> <span class="n">o</span> <span class="n">Tool</span> <span class="n">execution</span>    <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">+----------+----------+</span>        <span class="o">+---------------------+</span>   <span class="o">|</span>
<span class="o">|</span>              <span class="o">|</span>                                             <span class="o">|</span>
<span class="o">+--------------|---------------------------------------------+</span>
               <span class="o">|</span>
               <span class="o">|</span> <span class="n">Audiosocket</span> <span class="p">(</span><span class="mi">8</span><span class="n">kHz</span> <span class="n">PCM</span><span class="p">)</span>
               <span class="n">v</span>
          <span class="n">Asterisk</span> <span class="n">PBX</span>

<span class="n">Audio</span> <span class="n">Flow</span><span class="p">:</span>
<span class="n">Asterisk</span> <span class="p">(</span><span class="mi">8</span><span class="n">kHz</span><span class="p">)</span> <span class="o">--</span><span class="n">audiosocket</span><span class="o">--&gt;</span> <span class="n">Go</span> <span class="o">--</span><span class="n">websocket</span><span class="o">/</span><span class="n">protobuf</span><span class="o">--&gt;</span> <span class="n">Python</span>
                                    <span class="o">&lt;-----------------------</span>
<span class="n">STT</span> <span class="o">-&gt;</span> <span class="n">LLM</span> <span class="o">-&gt;</span> <span class="n">TTS</span> <span class="n">pipeline</span> <span class="n">executed</span> <span class="ow">in</span> <span class="n">Python</span><span class="o">/</span><span class="n">Pipecat</span>
</pre></div>
</div>
<p><strong>Key Features:</strong></p>
<ul class="simple">
<li><p><strong>Dual Runtime</strong>: Go for infrastructure, Python for AI pipelines</p></li>
<li><p><strong>Protobuf Frames</strong>: Efficient audio frame serialization</p></li>
<li><p><strong>Sample Rate Conversion</strong>: 8kHz (Asterisk) ↔ 16kHz (AI services)</p></li>
<li><p><strong>Tool Calling</strong>: LLM can invoke VoIP functions (connect_call, send_email)</p></li>
</ul>
<p><strong>bin-sentinel-manager (Kubernetes Monitoring)</strong></p>
<p>This service monitors pod lifecycle events in Kubernetes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Kubernetes</span> <span class="n">Monitoring</span><span class="p">:</span>

<span class="o">+-----------------------------------------------------------+</span>
<span class="o">|</span>              <span class="n">Kubernetes</span> <span class="n">Cluster</span> <span class="p">(</span><span class="n">voip</span> <span class="n">namespace</span><span class="p">)</span>          <span class="o">|</span>
<span class="o">|</span>                                                           <span class="o">|</span>
<span class="o">|</span>  <span class="o">+------------+</span>  <span class="o">+------------+</span>  <span class="o">+------------+</span>           <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span> <span class="n">asterisk</span><span class="o">-</span>  <span class="o">|</span>  <span class="o">|</span> <span class="n">asterisk</span><span class="o">-</span>  <span class="o">|</span>  <span class="o">|</span> <span class="n">asterisk</span><span class="o">-</span>  <span class="o">|</span>           <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>   <span class="n">call</span>     <span class="o">|</span>  <span class="o">|</span> <span class="n">conference</span> <span class="o">|</span>  <span class="o">|</span> <span class="n">registrar</span>  <span class="o">|</span>           <span class="o">|</span>
<span class="o">|</span>  <span class="o">+------+-----+</span>  <span class="o">+------+-----+</span>  <span class="o">+------+-----+</span>           <span class="o">|</span>
<span class="o">|</span>         <span class="o">|</span>               <span class="o">|</span>               <span class="o">|</span>                 <span class="o">|</span>
<span class="o">|</span>         <span class="o">+---------------+---------------+</span>                 <span class="o">|</span>
<span class="o">|</span>                         <span class="o">|</span>                                 <span class="o">|</span>
<span class="o">|</span>             <span class="n">Pod</span> <span class="n">Events</span> <span class="p">(</span><span class="n">Update</span><span class="o">/</span><span class="n">Delete</span><span class="p">)</span>                    <span class="o">|</span>
<span class="o">|</span>                         <span class="o">|</span>                                 <span class="o">|</span>
<span class="o">|</span>                         <span class="n">v</span>                                 <span class="o">|</span>
<span class="o">|</span>         <span class="o">+-------------------------------+</span>                 <span class="o">|</span>
<span class="o">|</span>         <span class="o">|</span>     <span class="nb">bin</span><span class="o">-</span><span class="n">sentinel</span><span class="o">-</span><span class="n">manager</span>      <span class="o">|</span>                 <span class="o">|</span>
<span class="o">|</span>         <span class="o">|</span>                               <span class="o">|</span>                 <span class="o">|</span>
<span class="o">|</span>         <span class="o">|</span>  <span class="n">o</span> <span class="n">Pod</span> <span class="n">informers</span> <span class="p">(</span><span class="n">client</span><span class="o">-</span><span class="n">go</span><span class="p">)</span>  <span class="o">|</span>                 <span class="o">|</span>
<span class="o">|</span>         <span class="o">|</span>  <span class="n">o</span> <span class="n">Label</span> <span class="n">selector</span> <span class="n">filtering</span>   <span class="o">|</span>                 <span class="o">|</span>
<span class="o">|</span>         <span class="o">|</span>  <span class="n">o</span> <span class="n">Event</span> <span class="n">publishing</span>           <span class="o">|</span>                 <span class="o">|</span>
<span class="o">|</span>         <span class="o">+---------------+---------------+</span>                 <span class="o">|</span>
<span class="o">|</span>                         <span class="o">|</span>                                 <span class="o">|</span>
<span class="o">+-------------------------|---------------------------------+</span>
                          <span class="o">|</span>
                          <span class="o">|</span> <span class="n">RabbitMQ</span> <span class="n">Events</span>
                          <span class="n">v</span>
                <span class="o">+-------------------+</span>
                <span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">manager</span> <span class="o">|</span>
                <span class="o">|</span>  <span class="p">(</span><span class="n">SIP</span> <span class="n">Recovery</span><span class="p">)</span>   <span class="o">|</span>
                <span class="o">+-------------------+</span>
</pre></div>
</div>
<p><strong>Key Features:</strong></p>
<ul class="simple">
<li><p><strong>In-Cluster Monitoring</strong>: Uses Kubernetes client-go with RBAC</p></li>
<li><p><strong>Label-Based Filtering</strong>: Watches specific pod labels (app=asterisk-<a href="#id1"><span class="problematic" id="id2">*</span></a>)</p></li>
<li><p><strong>Event Publishing</strong>: Notifies services via RabbitMQ for recovery actions</p></li>
<li><p><strong>Prometheus Metrics</strong>: Exports pod state change counters</p></li>
<li><p><strong>SIP Session Recovery</strong>: Enables call-manager to recover sessions when pods crash</p></li>
</ul>
<p><strong>bin-hook-manager (Webhook Gateway)</strong></p>
<p>This service receives external webhooks and routes them internally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">External</span> <span class="n">Webhook</span> <span class="n">Flow</span><span class="p">:</span>

<span class="n">External</span> <span class="n">Provider</span>                       <span class="n">VoIPBIN</span> <span class="n">Internal</span>
<span class="p">(</span><span class="n">Telnyx</span><span class="p">,</span> <span class="n">MessageBird</span><span class="p">)</span>                   <span class="n">Services</span>
     <span class="o">|</span>                                      <span class="o">|</span>
     <span class="o">|</span> <span class="n">HTTPS</span> <span class="n">POST</span>                           <span class="o">|</span>
     <span class="o">|</span> <span class="o">/</span><span class="n">v1</span><span class="mf">.0</span><span class="o">/</span><span class="n">hooks</span><span class="o">/</span><span class="n">messages</span>                 <span class="o">|</span>
     <span class="n">v</span>                                      <span class="o">|</span>
<span class="o">+-----------------+</span>                         <span class="o">|</span>
<span class="o">|</span> <span class="nb">bin</span><span class="o">-</span><span class="n">hook</span><span class="o">-</span><span class="n">manager</span><span class="o">|</span>                         <span class="o">|</span>
<span class="o">|</span>                 <span class="o">|</span>   <span class="n">RabbitMQ</span>              <span class="o">|</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Validate</span>      <span class="o">+------------------------&gt;|</span> <span class="nb">bin</span><span class="o">-</span><span class="n">message</span><span class="o">-</span><span class="n">manager</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Parse</span>         <span class="o">|</span>                         <span class="o">|</span> <span class="nb">bin</span><span class="o">-</span><span class="n">email</span><span class="o">-</span><span class="n">manager</span>
<span class="o">|</span> <span class="n">o</span> <span class="n">Route</span>         <span class="o">|</span>                         <span class="o">|</span> <span class="nb">bin</span><span class="o">-</span><span class="n">conversation</span><span class="o">-</span><span class="n">manager</span>
<span class="o">+-----------------+</span>                         <span class="o">|</span>
</pre></div>
</div>
<p><strong>Key Features:</strong></p>
<ul class="simple">
<li><p><strong>Public Endpoint</strong>: Receives webhooks from external providers</p></li>
<li><p><strong>Message Routing</strong>: Forwards to internal services via RabbitMQ</p></li>
<li><p><strong>Provider Support</strong>: Handles Telnyx, MessageBird delivery notifications</p></li>
<li><p><strong>Thin Proxy</strong>: No business logic, just routing</p></li>
</ul>
</section>
<section id="service-independence">
<h2>Service Independence<a class="headerlink" href="#service-independence" title="Link to this heading"></a></h2>
<p>VoIPBIN’s microservices architecture enables true service independence:</p>
<p><strong>Independent Deployment</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Service</span> <span class="n">Deployment</span><span class="p">:</span>

<span class="o">+--------------+</span>  <span class="o">+--------------+</span>  <span class="o">+--------------+</span>
<span class="o">|</span>  <span class="n">Service</span> <span class="n">A</span>   <span class="o">|</span>  <span class="o">|</span>  <span class="n">Service</span> <span class="n">B</span>   <span class="o">|</span>  <span class="o">|</span>  <span class="n">Service</span> <span class="n">C</span>   <span class="o">|</span>
<span class="o">|</span>  <span class="n">v1</span><span class="mf">.2.3</span>      <span class="o">|</span>  <span class="o">|</span>  <span class="n">v2</span><span class="mf">.0.1</span>      <span class="o">|</span>  <span class="o">|</span>  <span class="n">v1</span><span class="mf">.5.0</span>      <span class="o">|</span>
<span class="o">+------+-------+</span>  <span class="o">+------+-------+</span>  <span class="o">+------+-------+</span>
       <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>
       <span class="o">|</span>                 <span class="o">|</span>  <span class="n">Deploy</span> <span class="n">v2</span><span class="mf">.1.0</span>  <span class="o">|</span>
       <span class="o">|</span>                 <span class="o">|</span>  <span class="p">(</span><span class="n">no</span> <span class="n">impact</span><span class="p">)</span>    <span class="o">|</span>
       <span class="o">|</span>                 <span class="n">v</span>                 <span class="o">|</span>
       <span class="o">|</span>          <span class="o">+--------------+</span>         <span class="o">|</span>
       <span class="o">|</span>          <span class="o">|</span>  <span class="n">Service</span> <span class="n">B</span>   <span class="o">|</span>         <span class="o">|</span>
       <span class="o">|</span>          <span class="o">|</span>  <span class="n">v2</span><span class="mf">.1.0</span>      <span class="o">|</span>         <span class="o">|</span>
       <span class="o">|</span>          <span class="o">+--------------+</span>         <span class="o">|</span>
       <span class="o">|</span>                 <span class="o">|</span>                 <span class="o">|</span>
       <span class="o">+-----------------+-----------------+</span>
                   <span class="n">Message</span> <span class="n">Queue</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>No Downtime</strong>: Services update without affecting others</p></li>
<li><p><strong>Version Independence</strong>: Each service has its own version</p></li>
<li><p><strong>Gradual Rollout</strong>: Can deploy to subset of instances</p></li>
<li><p><strong>Quick Rollback</strong>: Easy to revert problematic deployments</p></li>
</ul>
<p><strong>Independent Scaling</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Horizontal</span> <span class="n">Scaling</span><span class="p">:</span>

<span class="n">Normal</span> <span class="n">Load</span><span class="p">:</span>              <span class="n">High</span> <span class="n">Call</span> <span class="n">Load</span><span class="p">:</span>
<span class="o">+----------+</span>              <span class="o">+----------+</span> <span class="o">+----------+</span> <span class="o">+----------+</span>
<span class="o">|</span>   <span class="n">Call</span>   <span class="o">|</span>              <span class="o">|</span>   <span class="n">Call</span>   <span class="o">|</span> <span class="o">|</span>   <span class="n">Call</span>   <span class="o">|</span> <span class="o">|</span>   <span class="n">Call</span>   <span class="o">|</span>
<span class="o">|</span>  <span class="n">Manager</span> <span class="o">|</span>              <span class="o">|</span> <span class="n">Manager</span>  <span class="o">|</span> <span class="o">|</span> <span class="n">Manager</span>  <span class="o">|</span> <span class="o">|</span> <span class="n">Manager</span>  <span class="o">|</span>
<span class="o">|</span>   <span class="n">x1</span>     <span class="o">|</span>              <span class="o">|</span>   <span class="n">x1</span>     <span class="o">|</span> <span class="o">|</span>   <span class="n">x2</span>     <span class="o">|</span> <span class="o">|</span>   <span class="n">x3</span>     <span class="o">|</span>
<span class="o">+----------+</span>              <span class="o">+----------+</span> <span class="o">+----------+</span> <span class="o">+----------+</span>
<span class="o">+----------+</span>              <span class="o">+----------+</span>
<span class="o">|</span>   <span class="n">SMS</span>    <span class="o">|</span>              <span class="o">|</span>   <span class="n">SMS</span>    <span class="o">|</span>
<span class="o">|</span>  <span class="n">Manager</span> <span class="o">|</span>              <span class="o">|</span>  <span class="n">Manager</span> <span class="o">|</span>
<span class="o">|</span>   <span class="n">x1</span>     <span class="o">|</span>              <span class="o">|</span>   <span class="n">x1</span>     <span class="o">|</span>
<span class="o">+----------+</span>              <span class="o">+----------+</span>

<span class="n">Scale</span> <span class="n">only</span> <span class="n">what</span> <span class="n">needs</span> <span class="n">scaling</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Targeted Scaling</strong>: Scale only services experiencing load</p></li>
<li><p><strong>Cost Optimization</strong>: Don’t over-provision underutilized services</p></li>
<li><p><strong>Auto-Scaling</strong>: Kubernetes HPA scales based on metrics</p></li>
<li><p><strong>Resource Efficiency</strong>: Better resource utilization</p></li>
</ul>
<p><strong>Independent Development</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Development</span> <span class="n">Isolation</span><span class="p">:</span>

<span class="n">Team</span> <span class="n">A</span>              <span class="n">Team</span> <span class="n">B</span>              <span class="n">Team</span> <span class="n">C</span>
   <span class="o">|</span>                   <span class="o">|</span>                   <span class="o">|</span>
   <span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">call</span><span class="o">-</span>        <span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">flow</span><span class="o">-</span>        <span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">ai</span><span class="o">-</span>
   <span class="o">|</span>  <span class="n">manager</span>          <span class="o">|</span>  <span class="n">manager</span>          <span class="o">|</span>  <span class="n">manager</span>
   <span class="o">|</span>                   <span class="o">|</span>                   <span class="o">|</span>
   <span class="o">|</span>  <span class="n">o</span> <span class="n">Go</span> <span class="n">codebase</span>    <span class="o">|</span>  <span class="n">o</span> <span class="n">Go</span> <span class="n">codebase</span>    <span class="o">|</span>  <span class="n">o</span> <span class="n">Go</span> <span class="n">codebase</span>
   <span class="o">|</span>  <span class="n">o</span> <span class="n">Own</span> <span class="n">git</span>        <span class="o">|</span>  <span class="n">o</span> <span class="n">Own</span> <span class="n">git</span>        <span class="o">|</span>  <span class="n">o</span> <span class="n">Own</span> <span class="n">git</span>
   <span class="o">|</span>    <span class="n">branch</span>         <span class="o">|</span>    <span class="n">branch</span>         <span class="o">|</span>    <span class="n">branch</span>
   <span class="o">|</span>  <span class="n">o</span> <span class="n">Own</span> <span class="n">CI</span><span class="o">/</span><span class="n">CD</span>      <span class="o">|</span>  <span class="n">o</span> <span class="n">Own</span> <span class="n">CI</span><span class="o">/</span><span class="n">CD</span>      <span class="o">|</span>  <span class="n">o</span> <span class="n">Own</span> <span class="n">CI</span><span class="o">/</span><span class="n">CD</span>
   <span class="o">|</span>  <span class="n">o</span> <span class="n">Own</span> <span class="n">tests</span>      <span class="o">|</span>  <span class="n">o</span> <span class="n">Own</span> <span class="n">tests</span>      <span class="o">|</span>  <span class="n">o</span> <span class="n">Own</span> <span class="n">tests</span>
   <span class="o">|</span>                   <span class="o">|</span>                   <span class="o">|</span>
   <span class="o">+-------------------+-------------------+</span>
          <span class="n">Coordinate</span> <span class="n">only</span> <span class="n">via</span><span class="p">:</span>
          <span class="n">o</span> <span class="n">Message</span> <span class="n">contracts</span>
          <span class="n">o</span> <span class="n">Database</span> <span class="n">schema</span>
          <span class="n">o</span> <span class="n">API</span> <span class="n">contracts</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Team Autonomy</strong>: Teams work independently</p></li>
<li><p><strong>Faster Development</strong>: No coordination bottleneck</p></li>
<li><p><strong>Technology Flexibility</strong>: Can use different libraries</p></li>
<li><p><strong>Clear Ownership</strong>: Each team owns specific domains</p></li>
</ul>
</section>
<section id="service-communication-patterns">
<h2>Service Communication Patterns<a class="headerlink" href="#service-communication-patterns" title="Link to this heading"></a></h2>
<p>Services communicate primarily through RabbitMQ RPC:</p>
<p><strong>Synchronous RPC (Request-Response)</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RPC</span> <span class="n">Communication</span><span class="p">:</span>

<span class="n">API</span> <span class="n">Gateway</span>                <span class="n">RabbitMQ</span>              <span class="n">Call</span> <span class="n">Manager</span>
     <span class="o">|</span>                         <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">|</span>  <span class="mf">1.</span> <span class="n">Call</span> <span class="n">Request</span>        <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">+------------------------&gt;&gt;</span>                      <span class="o">|</span>
     <span class="o">|</span>  <span class="n">Queue</span><span class="p">:</span> <span class="nb">bin</span><span class="o">-</span><span class="n">manager</span><span class="o">.</span>    <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">|</span>         <span class="n">call</span><span class="o">.</span><span class="n">request</span>    <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">|</span>                         <span class="o">|</span>  <span class="mf">2.</span> <span class="n">Dequeue</span> <span class="n">Request</span>  <span class="o">|</span>
     <span class="o">|</span>                         <span class="o">+---------------------&gt;&gt;</span>
     <span class="o">|</span>                         <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">|</span>                         <span class="o">|</span>  <span class="mf">3.</span> <span class="n">Process</span> <span class="n">Request</span>  <span class="o">|</span>
     <span class="o">|</span>                         <span class="o">|</span>      <span class="p">(</span><span class="n">create</span> <span class="n">call</span><span class="p">)</span>   <span class="o">|</span>
     <span class="o">|</span>                         <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">|</span>                         <span class="o">|</span>  <span class="mf">4.</span> <span class="n">Send</span> <span class="n">Response</span>    <span class="o">|</span>
     <span class="o">|</span>                         <span class="o">&lt;&lt;---------------------+</span>
     <span class="o">|</span>  <span class="mf">5.</span> <span class="n">Response</span>            <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">&lt;&lt;------------------------+</span>                      <span class="o">|</span>
     <span class="o">|</span>                         <span class="o">|</span>                      <span class="o">|</span>
</pre></div>
</div>
<p><strong>Asynchronous Events (Pub/Sub)</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Event</span> <span class="n">Broadcasting</span><span class="p">:</span>

<span class="n">Call</span> <span class="n">Manager</span>          <span class="n">RabbitMQ</span> <span class="n">Exchange</span>        <span class="n">Subscribers</span>
     <span class="o">|</span>                      <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">|</span>  <span class="mf">1.</span> <span class="n">Call</span> <span class="n">Created</span>     <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">|</span>  <span class="p">(</span><span class="n">publish</span> <span class="n">event</span><span class="p">)</span>     <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">+---------------------&gt;&gt;</span>                       <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>  <span class="mf">2.</span> <span class="n">Broadcast</span>         <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>      <span class="n">to</span> <span class="nb">all</span>           <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">+----------+------------+</span>
     <span class="o">|</span>                      <span class="o">|</span>          <span class="o">|</span>            <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>          <span class="n">v</span>            <span class="n">v</span>
     <span class="o">|</span>                      <span class="o">|</span>    <span class="o">+----------+</span> <span class="o">+----------+</span>
     <span class="o">|</span>                      <span class="o">|</span>    <span class="o">|</span> <span class="n">Billing</span>  <span class="o">|</span> <span class="o">|</span> <span class="n">Webhook</span>  <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>    <span class="o">|</span> <span class="n">Manager</span>  <span class="o">|</span> <span class="o">|</span> <span class="n">Manager</span>  <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>    <span class="o">+----------+</span> <span class="o">+----------+</span>
     <span class="o">|</span>                      <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>    <span class="n">Process</span> <span class="n">event</span>      <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>    <span class="n">independently</span>      <span class="o">|</span>
</pre></div>
</div>
<p><strong>Communication Patterns Used:</strong></p>
<ul class="simple">
<li><p><strong>RPC (Synchronous)</strong>: For request-response operations (GET, POST, DELETE)</p></li>
<li><p><strong>Pub/Sub (Asynchronous)</strong>: For event notifications (call.created, sms.sent)</p></li>
<li><p><strong>Webhooks</strong>: For external system notifications</p></li>
<li><p><strong>WebSocket</strong>: For real-time client updates</p></li>
</ul>
</section>
<section id="service-discovery-and-configuration">
<h2>Service Discovery and Configuration<a class="headerlink" href="#service-discovery-and-configuration" title="Link to this heading"></a></h2>
<p>VoIPBIN uses a hybrid approach for service discovery:</p>
<p><strong>Queue-Based Discovery</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Service</span> <span class="n">Registration</span><span class="p">:</span>

<span class="o">+------------------------------------------------+</span>
<span class="o">|</span>            <span class="n">RabbitMQ</span> <span class="n">Queue</span> <span class="n">Naming</span>               <span class="o">|</span>
<span class="o">|</span>                                                <span class="o">|</span>
<span class="o">|</span>  <span class="nb">bin</span><span class="o">-</span><span class="n">manager</span><span class="o">.&lt;</span><span class="n">service</span><span class="o">&gt;.&lt;</span><span class="n">operation</span><span class="o">&gt;</span>             <span class="o">|</span>
<span class="o">|</span>                                                <span class="o">|</span>
<span class="o">|</span>  <span class="n">Examples</span><span class="p">:</span>                                     <span class="o">|</span>
<span class="o">|</span>  <span class="n">o</span> <span class="nb">bin</span><span class="o">-</span><span class="n">manager</span><span class="o">.</span><span class="n">call</span><span class="o">.</span><span class="n">request</span>                    <span class="o">|</span>
<span class="o">|</span>  <span class="n">o</span> <span class="nb">bin</span><span class="o">-</span><span class="n">manager</span><span class="o">.</span><span class="n">conference</span><span class="o">.</span><span class="n">request</span>              <span class="o">|</span>
<span class="o">|</span>  <span class="n">o</span> <span class="nb">bin</span><span class="o">-</span><span class="n">manager</span><span class="o">.</span><span class="n">sms</span><span class="o">.</span><span class="n">request</span>                     <span class="o">|</span>
<span class="o">|</span>                                                <span class="o">|</span>
<span class="o">|</span>  <span class="n">Services</span> <span class="n">listen</span> <span class="n">on</span> <span class="n">their</span> <span class="n">named</span> <span class="n">queues</span>         <span class="o">|</span>
<span class="o">|</span>  <span class="n">Clients</span> <span class="n">send</span> <span class="n">to</span> <span class="n">known</span> <span class="n">queue</span> <span class="n">names</span>             <span class="o">|</span>
<span class="o">+------------------------------------------------+</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Convention-Based</strong>: Queue names follow predictable pattern</p></li>
<li><p><strong>No Registry</strong>: No central service registry needed</p></li>
<li><p><strong>Self-Registering</strong>: Services create queues on startup</p></li>
<li><p><strong>Load Balanced</strong>: Multiple instances share same queue</p></li>
</ul>
<p><strong>Configuration Management</strong></p>
<p>Services receive configuration through multiple sources:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Configuration</span> <span class="n">Sources</span><span class="p">:</span>

<span class="o">+----------------+</span>
<span class="o">|</span>   <span class="n">Service</span>      <span class="o">|</span>
<span class="o">+----+-----------+</span>
     <span class="o">|</span>
     <span class="o">+-------&gt;</span> <span class="n">Environment</span> <span class="n">Variables</span>
     <span class="o">|</span>       <span class="n">o</span> <span class="n">Database</span> <span class="n">connection</span>
     <span class="o">|</span>       <span class="n">o</span> <span class="n">RabbitMQ</span> <span class="n">address</span>
     <span class="o">|</span>       <span class="n">o</span> <span class="n">Redis</span> <span class="n">address</span>
     <span class="o">|</span>
     <span class="o">+-------&gt;</span> <span class="n">Command</span><span class="o">-</span><span class="n">Line</span> <span class="n">Flags</span>
     <span class="o">|</span>       <span class="n">o</span> <span class="n">Port</span> <span class="n">number</span>
     <span class="o">|</span>       <span class="n">o</span> <span class="n">Log</span> <span class="n">level</span>
     <span class="o">|</span>
     <span class="o">+-------&gt;</span> <span class="nb">bin</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">manager</span>
     <span class="o">|</span>       <span class="n">o</span> <span class="n">Feature</span> <span class="n">flags</span>
     <span class="o">|</span>       <span class="n">o</span> <span class="n">Business</span> <span class="n">logic</span> <span class="n">config</span>
     <span class="o">|</span>
     <span class="o">+-------&gt;</span> <span class="n">Database</span>
             <span class="n">o</span> <span class="n">Dynamic</span> <span class="n">configuration</span>
             <span class="n">o</span> <span class="n">Customer</span><span class="o">-</span><span class="n">specific</span> <span class="n">settings</span>
</pre></div>
</div>
</section>
<section id="health-monitoring">
<h2>Health Monitoring<a class="headerlink" href="#health-monitoring" title="Link to this heading"></a></h2>
<p>All services expose health check endpoints:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Health</span> <span class="n">Check</span> <span class="n">Architecture</span><span class="p">:</span>

<span class="n">Kubernetes</span>              <span class="n">Service</span> <span class="n">Health</span>          <span class="n">Dependencies</span>
     <span class="o">|</span>                       <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">|</span>  <span class="mf">1.</span> <span class="n">Health</span> <span class="n">Check</span>      <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">+----------------------&gt;&gt;</span>                       <span class="o">|</span>
     <span class="o">|</span>  <span class="n">GET</span> <span class="o">/</span><span class="n">health</span>          <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">|</span>                       <span class="o">|</span>  <span class="mf">2.</span> <span class="n">Check</span> <span class="n">MySQL</span>       <span class="o">|</span>
     <span class="o">|</span>                       <span class="o">+----------------------&gt;&gt;</span>
     <span class="o">|</span>                       <span class="o">|</span>     <span class="p">(</span><span class="n">ping</span><span class="p">)</span>            <span class="o">|</span>
     <span class="o">|</span>                       <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">|</span>                       <span class="o">|</span>  <span class="mf">3.</span> <span class="n">Check</span> <span class="n">Redis</span>       <span class="o">|</span>
     <span class="o">|</span>                       <span class="o">+----------------------&gt;&gt;</span>
     <span class="o">|</span>                       <span class="o">|</span>     <span class="p">(</span><span class="n">ping</span><span class="p">)</span>            <span class="o">|</span>
     <span class="o">|</span>                       <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">|</span>                       <span class="o">|</span>  <span class="mf">4.</span> <span class="n">Check</span> <span class="n">RabbitMQ</span>    <span class="o">|</span>
     <span class="o">|</span>                       <span class="o">+----------------------&gt;&gt;</span>
     <span class="o">|</span>                       <span class="o">|</span>     <span class="p">(</span><span class="n">connection</span><span class="p">)</span>      <span class="o">|</span>
     <span class="o">|</span>                       <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">|</span>  <span class="mi">200</span> <span class="n">OK</span> <span class="o">/</span> <span class="mi">503</span> <span class="n">Error</span>   <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">&lt;&lt;----------------------+</span>                       <span class="o">|</span>
     <span class="o">|</span>                       <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">|</span>  <span class="mf">5.</span> <span class="n">Restart</span> <span class="k">if</span> <span class="n">failed</span> <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">|</span>  <span class="p">(</span><span class="n">after</span> <span class="n">retries</span><span class="p">)</span>      <span class="o">|</span>                       <span class="o">|</span>
</pre></div>
</div>
<p><strong>Health Check Components:</strong></p>
<ul class="simple">
<li><p><strong>Liveness Probe</strong>: Is the service running?</p></li>
<li><p><strong>Readiness Probe</strong>: Is the service ready to accept traffic?</p></li>
<li><p><strong>Dependency Checks</strong>: Are database, cache, queue healthy?</p></li>
<li><p><strong>Auto-Recovery</strong>: Kubernetes restarts unhealthy pods</p></li>
</ul>
</section>
<section id="error-handling-and-resilience">
<h2>Error Handling and Resilience<a class="headerlink" href="#error-handling-and-resilience" title="Link to this heading"></a></h2>
<p>Services implement multiple resilience patterns:</p>
<p><strong>Circuit Breaker</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Circuit</span> <span class="n">Breaker</span> <span class="n">States</span><span class="p">:</span>

<span class="n">Closed</span> <span class="p">(</span><span class="n">Normal</span><span class="p">)</span>         <span class="n">Open</span> <span class="p">(</span><span class="n">Failed</span><span class="p">)</span>          <span class="n">Half</span><span class="o">-</span><span class="n">Open</span> <span class="p">(</span><span class="n">Testing</span><span class="p">)</span>
     <span class="o">|</span>                       <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">|</span>  <span class="n">Requests</span> <span class="k">pass</span>        <span class="o">|</span>  <span class="n">Requests</span> <span class="n">rejected</span>    <span class="o">|</span>  <span class="n">Limited</span> <span class="n">requests</span>
     <span class="o">|</span>  <span class="n">through</span>              <span class="o">|</span>  <span class="n">immediately</span>          <span class="o">|</span>  <span class="n">allowed</span>
     <span class="o">|</span>                       <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">|</span>  <span class="o">------------&gt;</span>        <span class="o">|</span>  <span class="o">--------</span><span class="n">X</span>            <span class="o">|</span>  <span class="o">------------&gt;</span>
     <span class="o">|</span>                       <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">|</span>  <span class="n">If</span> <span class="n">failures</span>          <span class="o">|</span>  <span class="n">After</span> <span class="n">timeout</span>        <span class="o">|</span>  <span class="n">If</span> <span class="n">success</span>
     <span class="o">|</span>  <span class="n">exceed</span> <span class="n">threshold</span>     <span class="o">|</span>  <span class="n">period</span>               <span class="o">|</span>  <span class="n">threshold</span> <span class="n">met</span>
     <span class="o">|</span>                       <span class="o">|</span>                       <span class="o">|</span>
     <span class="o">+----------------------&gt;&gt;</span>                       <span class="o">|</span>
                             <span class="o">&lt;&lt;----------------------+</span>
                             <span class="o">|</span>                       <span class="o">|</span>
                             <span class="o">+----------------------&gt;&gt;</span>
                               <span class="n">If</span> <span class="n">still</span> <span class="n">failing</span>      <span class="o">|</span>
                                                     <span class="o">|</span>
                                                     <span class="o">+------&gt;</span> <span class="n">Closed</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Prevent Cascade Failures</strong>: Stop calling failed services</p></li>
<li><p><strong>Fast Fail</strong>: Return error immediately when circuit open</p></li>
<li><p><strong>Auto-Recovery</strong>: Periodically test if service recovered</p></li>
</ul>
<p><strong>Retry with Backoff</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Exponential</span> <span class="n">Backoff</span><span class="p">:</span>

<span class="n">Attempt</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Immediate</span>
     <span class="o">|</span>
     <span class="o">|</span> <span class="n">Failed</span>
     <span class="n">v</span>
<span class="n">Attempt</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Wait</span> <span class="mi">1</span><span class="n">s</span>
     <span class="o">|</span>
     <span class="o">|</span> <span class="n">Failed</span>
     <span class="n">v</span>
<span class="n">Attempt</span> <span class="mi">3</span><span class="p">:</span> <span class="n">Wait</span> <span class="mi">2</span><span class="n">s</span>
     <span class="o">|</span>
     <span class="o">|</span> <span class="n">Failed</span>
     <span class="n">v</span>
<span class="n">Attempt</span> <span class="mi">4</span><span class="p">:</span> <span class="n">Wait</span> <span class="mi">4</span><span class="n">s</span>
     <span class="o">|</span>
     <span class="o">|</span> <span class="n">Failed</span>
     <span class="n">v</span>
<span class="n">Attempt</span> <span class="mi">5</span><span class="p">:</span> <span class="n">Wait</span> <span class="mi">8</span><span class="n">s</span>
     <span class="o">|</span>
     <span class="o">|</span> <span class="n">Failed</span>
     <span class="n">v</span>
<span class="n">Give</span> <span class="n">up</span><span class="p">,</span> <span class="k">return</span> <span class="n">error</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Transient Failures</strong>: Retry on temporary failures</p></li>
<li><p><strong>Backoff Strategy</strong>: Increase wait time between retries</p></li>
<li><p><strong>Max Attempts</strong>: Limit total number of retries</p></li>
<li><p><strong>Idempotency</strong>: Ensure operations safe to retry</p></li>
</ul>
<p><strong>Timeouts</strong></p>
<p>All RPC calls have strict timeouts:</p>
<ul class="simple">
<li><p><strong>Default Timeout</strong>: 30 seconds for most operations</p></li>
<li><p><strong>Long Operations</strong>: 120 seconds for complex workflows</p></li>
<li><p><strong>Streaming</strong>: No timeout for streaming operations</p></li>
<li><p><strong>Context Propagation</strong>: Timeout passed through call chain</p></li>
</ul>
</section>
<section id="deployment-architecture">
<h2>Deployment Architecture<a class="headerlink" href="#deployment-architecture" title="Link to this heading"></a></h2>
<p>Services deploy to Kubernetes on Google Cloud Platform:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Kubernetes</span> <span class="n">Deployment</span><span class="p">:</span>

<span class="o">+---------------------------------------------------------+</span>
<span class="o">|</span>                      <span class="n">GKE</span> <span class="n">Cluster</span>                        <span class="o">|</span>
<span class="o">|</span>                                                         <span class="o">|</span>
<span class="o">|</span>  <span class="o">+---------------------------------------------------+</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>              <span class="n">Namespace</span><span class="p">:</span> <span class="n">production</span>                <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>                                                   <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+---------------------------------------------+</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="n">Deployment</span><span class="p">:</span> <span class="nb">bin</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">manager</span>               <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+---------+</span>  <span class="o">+---------+</span>  <span class="o">+---------+</span>      <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="n">Pod</span> <span class="mi">1</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="n">Pod</span> <span class="mi">2</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="n">Pod</span> <span class="mi">3</span>  <span class="o">|</span>      <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+---------+</span>  <span class="o">+---------+</span>  <span class="o">+---------+</span>      <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="n">Replicas</span><span class="p">:</span> <span class="mi">3</span>    <span class="n">HPA</span><span class="p">:</span> <span class="mi">3</span><span class="o">-</span><span class="mi">10</span>                   <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+---------------------------------------------+</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>                                                   <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+---------------------------------------------+</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="n">Deployment</span><span class="p">:</span> <span class="nb">bin</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">manager</span>                <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+---------+</span>  <span class="o">+---------+</span>  <span class="o">+---------+</span>      <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="n">Pod</span> <span class="mi">1</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="n">Pod</span> <span class="mi">2</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="n">Pod</span> <span class="mi">3</span>  <span class="o">|</span>      <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+---------+</span>  <span class="o">+---------+</span>  <span class="o">+---------+</span>      <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="n">Replicas</span><span class="p">:</span> <span class="mi">3</span>    <span class="n">HPA</span><span class="p">:</span> <span class="mi">3</span><span class="o">-</span><span class="mi">20</span>                   <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+---------------------------------------------+</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>                                                   <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">...</span> <span class="mi">30</span><span class="o">+</span> <span class="n">more</span> <span class="n">deployments</span>                         <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>                                                   <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">+---------------------------------------------------+</span>  <span class="o">|</span>
<span class="o">|</span>                                                         <span class="o">|</span>
<span class="o">|</span>  <span class="o">+---------------------------------------------------+</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>         <span class="n">Shared</span> <span class="n">Resources</span> <span class="p">(</span><span class="n">same</span> <span class="n">cluster</span><span class="p">)</span>           <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="n">o</span> <span class="n">MySQL</span> <span class="n">StatefulSet</span>                              <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="n">o</span> <span class="n">Redis</span> <span class="n">StatefulSet</span>                              <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="n">o</span> <span class="n">RabbitMQ</span> <span class="n">StatefulSet</span>                           <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="n">o</span> <span class="n">Prometheus</span> <span class="n">Monitoring</span>                          <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">+---------------------------------------------------+</span>  <span class="o">|</span>
<span class="o">+---------------------------------------------------------+</span>
</pre></div>
</div>
<p><strong>Deployment Characteristics:</strong></p>
<ul class="simple">
<li><p><strong>Container-Based</strong>: Each service runs in Docker containers</p></li>
<li><p><strong>Replica Sets</strong>: Multiple instances for high availability</p></li>
<li><p><strong>Auto-Scaling</strong>: HPA (Horizontal Pod Autoscaler) based on CPU/memory</p></li>
<li><p><strong>Rolling Updates</strong>: Zero-downtime deployments</p></li>
<li><p><strong>Resource Limits</strong>: CPU and memory limits per container</p></li>
<li><p><strong>Health Probes</strong>: Automatic restart of failed containers</p></li>
</ul>
</section>
<section id="monitoring-and-observability">
<h2>Monitoring and Observability<a class="headerlink" href="#monitoring-and-observability" title="Link to this heading"></a></h2>
<p>Comprehensive monitoring across all services:</p>
<p><strong>Metrics Collection</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Metrics</span> <span class="n">Pipeline</span><span class="p">:</span>

<span class="n">Services</span>                <span class="n">Prometheus</span>              <span class="n">Grafana</span>
<span class="p">(</span><span class="mi">30</span><span class="o">+</span> <span class="n">services</span><span class="p">)</span>              <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">|</span>  <span class="n">Expose</span> <span class="o">/</span><span class="n">metrics</span>     <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">|</span>  <span class="n">endpoint</span>            <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">|</span>  <span class="n">Scrape</span> <span class="n">every</span> <span class="mi">15</span><span class="n">s</span>    <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">+---------------------&gt;&gt;</span>                      <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>  <span class="n">Time</span><span class="o">-</span><span class="n">series</span> <span class="n">DB</span>      <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>  <span class="n">stores</span> <span class="n">metrics</span>      <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>  <span class="n">Query</span> <span class="n">metrics</span>       <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">+---------------------&gt;&gt;</span>
     <span class="o">|</span>                      <span class="o">|</span>                      <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>  <span class="n">Visualize</span>           <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>  <span class="n">dashboards</span>          <span class="o">|</span>
     <span class="o">|</span>                      <span class="o">|</span>                      <span class="o">|</span>
</pre></div>
</div>
<p><strong>Key Metrics:</strong></p>
<ul class="simple">
<li><p><strong>Request Rate</strong>: Requests per second per service</p></li>
<li><p><strong>Error Rate</strong>: Failed requests percentage</p></li>
<li><p><strong>Latency</strong>: P50, P95, P99 response times</p></li>
<li><p><strong>Resource Usage</strong>: CPU, memory, disk per pod</p></li>
<li><p><strong>Queue Depth</strong>: RabbitMQ queue backlogs</p></li>
<li><p><strong>Database Connections</strong>: Active connections per service</p></li>
</ul>
<p><strong>Logging</strong></p>
<p>All services use structured logging:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2026-01-20T12:00:00.000Z&quot;</span><span class="p">,</span>
  <span class="s2">&quot;level&quot;</span><span class="p">:</span> <span class="s2">&quot;info&quot;</span><span class="p">,</span>
  <span class="s2">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;bin-call-manager&quot;</span><span class="p">,</span>
  <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="s2">&quot;pod-xyz&quot;</span><span class="p">,</span>
  <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Call created successfully&quot;</span><span class="p">,</span>
  <span class="s2">&quot;call_id&quot;</span><span class="p">:</span> <span class="s2">&quot;abc-123-def&quot;</span><span class="p">,</span>
  <span class="s2">&quot;customer_id&quot;</span><span class="p">:</span> <span class="s2">&quot;customer-789&quot;</span><span class="p">,</span>
  <span class="s2">&quot;duration_ms&quot;</span><span class="p">:</span> <span class="mi">45</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Structured Format</strong>: JSON logs for easy parsing</p></li>
<li><p><strong>Centralized Collection</strong>: All logs aggregated in one place</p></li>
<li><p><strong>Searchable</strong>: Full-text search across all services</p></li>
<li><p><strong>Correlation IDs</strong>: Track requests across services</p></li>
</ul>
</section>
<section id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading"></a></h2>
<p>VoIPBIN’s backend follows these best practices:</p>
<p><strong>Service Design:</strong></p>
<ul class="simple">
<li><p>One service, one responsibility</p></li>
<li><p>Services communicate via messages, not direct calls</p></li>
<li><p>Shared database, but logical isolation by tables</p></li>
<li><p>Idempotent operations for safe retries</p></li>
</ul>
<p><strong>Error Handling:</strong></p>
<ul class="simple">
<li><p>Always return errors, never panic</p></li>
<li><p>Use context for timeouts and cancellation</p></li>
<li><p>Implement circuit breakers for external dependencies</p></li>
<li><p>Log errors with full context</p></li>
</ul>
<p><strong>Performance:</strong></p>
<ul class="simple">
<li><p>Use connection pooling for database and Redis</p></li>
<li><p>Implement caching for frequently accessed data</p></li>
<li><p>Use batch operations where possible</p></li>
<li><p>Monitor and optimize hot paths</p></li>
</ul>
<p><strong>Security:</strong></p>
<ul class="simple">
<li><p>No authentication logic in backend services</p></li>
<li><p>Trust the API gateway for auth decisions</p></li>
<li><p>Validate all inputs at service boundaries</p></li>
<li><p>Use parameterized queries to prevent SQL injection</p></li>
</ul>
<p><strong>Testing:</strong></p>
<ul class="simple">
<li><p>Unit tests for business logic</p></li>
<li><p>Integration tests with mock dependencies</p></li>
<li><p>End-to-end tests for critical flows</p></li>
<li><p>Load tests before production deployment</p></li>
</ul>
</section>
</section>

</main>
                        
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">Backend Microservices</a><ul>
<li><a class="reference internal" href="#microservices-organization">Microservices Organization</a></li>
<li><a class="reference internal" href="#service-characteristics">Service Characteristics</a></li>
<li><a class="reference internal" href="#api-gateway-bin-api-manager">API Gateway - bin-api-manager</a></li>
<li><a class="reference internal" href="#special-service-architectures">Special Service Architectures</a></li>
<li><a class="reference internal" href="#service-independence">Service Independence</a></li>
<li><a class="reference internal" href="#service-communication-patterns">Service Communication Patterns</a></li>
<li><a class="reference internal" href="#service-discovery-and-configuration">Service Discovery and Configuration</a></li>
<li><a class="reference internal" href="#health-monitoring">Health Monitoring</a></li>
<li><a class="reference internal" href="#error-handling-and-resilience">Error Handling and Resilience</a></li>
<li><a class="reference internal" href="#deployment-architecture">Deployment Architecture</a></li>
<li><a class="reference internal" href="#monitoring-and-observability">Monitoring and Observability</a></li>
<li><a class="reference internal" href="#best-practices">Best Practices</a></li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
                <nav aria-label="Footer">
                    <ul class="nav justify-content-center mb-2">
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="http://voipbin.net">About Us</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="http://voipbin.net">Contact</a></li>
                        
                    </ul>
                </nav>
            
            <div class="text-center">
                    &copy; Copyright 2024, Sungtae Kim
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a class="text-white" href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.5.0
                    </a>
                    and
                    <a class="text-white" href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 9.1.0
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=fd6eb6e6"></script>
        <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="_static/dist/theme.js"></script>
        <script type="text/javascript" src="_static/dist/vendor.js"></script>
        <script type="text/javascript" src="_static/searchtools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>