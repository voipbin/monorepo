<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trunk &mdash; voipbin  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Common" href="common.html" />
    <link rel="prev" title="Websocket" href="websocket.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> voipbin
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow.html">Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="call.html">Call</a></li>
<li class="toctree-l1"><a class="reference internal" href="message.html">Message</a></li>
<li class="toctree-l1"><a class="reference internal" href="agent.html">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="conference.html">Conference</a></li>
<li class="toctree-l1"><a class="reference internal" href="conversation.html">Conversation</a></li>
<li class="toctree-l1"><a class="reference internal" href="domain.html">Domain</a></li>
<li class="toctree-l1"><a class="reference internal" href="extension.html">Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="queue.html">Queue</a></li>
<li class="toctree-l1"><a class="reference internal" href="recording.html">Recording</a></li>
<li class="toctree-l1"><a class="reference internal" href="tag.html">Tag</a></li>
<li class="toctree-l1"><a class="reference internal" href="campaign.html">Campaign</a></li>
<li class="toctree-l1"><a class="reference internal" href="outdial.html">Outdial</a></li>
<li class="toctree-l1"><a class="reference internal" href="outplan.html">Outplan</a></li>
<li class="toctree-l1"><a class="reference internal" href="webhook.html">Webhook</a></li>
<li class="toctree-l1"><a class="reference internal" href="customer.html">Customer</a></li>
<li class="toctree-l1"><a class="reference internal" href="chat.html">Chat</a></li>
<li class="toctree-l1"><a class="reference internal" href="chatbot.html">Chatbot</a></li>
<li class="toctree-l1"><a class="reference internal" href="provider.html">Provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="route.html">Route</a></li>
<li class="toctree-l1"><a class="reference internal" href="variable.html">Variable</a></li>
<li class="toctree-l1"><a class="reference internal" href="websocket.html">Websocket</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Trunk</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trunking">Trunking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#authentication">Authentication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#basic-authentication">Basic authentication</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#call-handle">Call handle</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#early-media-handle">Early media handle</a></li>
<li class="toctree-l4"><a class="reference internal" href="#realy-hangup-cause">Realy hangup cause</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#registration">Registration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#registration-handle">Registration handle</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="common.html">Common</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">voipbin</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Trunk</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/trunk.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="trunk">
<h1>Trunk<a class="headerlink" href="#trunk" title="Permalink to this headline"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>The VoIPBin’s Trunk service could be divided into trunking and registration.</p>
<p>Trunking is a voice-over internet protocol (VoIP) technology that allows businesses to make and receive phone calls over the internet using a SIP (session initiation protocol) provider. Rather than relying on traditional phone lines, SIP trunking enables voice communication through the internet, making it a more flexible, scalable, and cost-effective solution for businesses of all sizes. With SIP trunking, businesses can connect their existing phone systems to a SIP provider, which routes calls to the public switched telephone network (PSTN) and other SIP-enabled devices, such as IP phones, softphones, and mobile devices. This technology can help businesses reduce their communication costs, improve call quality, and enhance their overall communication capabilities.</p>
<p>Registration is a process by which a user or device identifies itself to a server or service to gain access to its features or resources. In telephony and VoIP systems, registration is typically used to establish a connection between a user’s device and a service provider, such as a SIP trunking provider or a PBX (private branch exchange) system. During the registration process, the user’s device sends its identification information, such as a username, password, and IP address, to the service provider. The service provider then verifies the information and grants access to the user’s device, allowing it to make and receive calls over the network. Registration is an essential step in establishing secure and reliable communication between devices and service providers, and it is a key aspect of many telephony and VoIP systems.</p>
<p>In short, trunking is needed for the making a call, and the registration is needed for the a receiving a call.</p>
</section>
<section id="trunking">
<h2>Trunking<a class="headerlink" href="#trunking" title="Permalink to this headline"></a></h2>
<p>SIP trunking is a technology that enables organizations to make telephone calls over the internet, rather than traditional phone lines. Instead of using physical phone lines to connect to the public switched telephone network (PSTN), SIP trunking uses an internet connection to carry voice and other communications. SIP trunking is cost-effective, scalable and provides a range of features and benefits, such as better call quality, enhanced disaster recovery capabilities, and the ability to easily manage multiple locations or remote workers. Additionally, SIP trunking allows organizations to consolidate their voice and data networks, reducing the complexity and cost of their telecommunications infrastructure.</p>
<section id="authentication">
<h3>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline"></a></h3>
<p>Currently, The VoIPBin’s trunking authentication supports only the Basic authentication.</p>
<ul class="simple">
<li><p>Basic authentication</p></li>
<li><p>IP base authentication(WIP)</p></li>
</ul>
<section id="basic-authentication">
<h4>Basic authentication<a class="headerlink" href="#basic-authentication" title="Permalink to this headline"></a></h4>
<p>To make a SIP outgoing call through a VoIPBin using basic authentication, you need to follow a few steps:</p>
<ol class="arabic simple">
<li><p>Choose a SIP client: You can use a software-based SIP client, such as Zoiper or X-Lite, or a hardware-based SIP phone, such as a Cisco or Grandstream phone.</p></li>
<li><p>Configure your SIP client: You need to configure your SIP client with VoIPBin credentials, such as your name, extension, password, domain info.</p></li>
<li><p>Set up your outgoing call settings: In your SIP client, you need to specify the destination address(phone number or extension) you want to call and set any additional options, such as the call type, call quality, or call duration.</p></li>
<li><p>Initiate the call: Once you have configured your SIP client and set up your outgoing call settings, you can initiate the call by clicking on the call button or using a keypad command.</p></li>
<li><p>Authenticate your credentials: When you initiate the call, your SIP client sends your authentication credentials to the VoIPBin, using the basic authentication method. The VoIPBin then verifies your credentials and authorizes the call.</p></li>
<li><p>Make the call: Once your credentials are verified, the VoIPBin establishes the call and connects you with the destination address.</p></li>
</ol>
<p>By following these steps, you can make a SIP outgoing call through VoIPBin using basic authentication. This process can be used for a variety of business and personal applications, such as remote work, conferencing, and customer support.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UA</span>                                   <span class="n">VoIPBin</span>                                 <span class="n">Destination</span>

<span class="o">|</span>                                        <span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|----------------</span> <span class="n">INVITE</span> <span class="o">---------------&gt;|</span>                                        <span class="o">|</span>
<span class="o">|&lt;--</span> <span class="mi">407</span> <span class="n">Proxy</span> <span class="n">Authentication</span> <span class="n">Required</span> <span class="o">--|</span>                                        <span class="o">|</span>
<span class="o">|----------------</span> <span class="n">ACK</span> <span class="o">------------------&gt;|</span>                                        <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|-----</span> <span class="n">INVITE</span> <span class="k">with</span> <span class="n">Authorization</span> <span class="o">-------&gt;|</span>                                        <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|----------------</span> <span class="n">INVITE</span> <span class="o">---------------&gt;|</span>
<span class="o">|</span>                                        <span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|&lt;---------------</span> <span class="mi">100</span> <span class="n">Trying</span> <span class="o">------------|</span>
<span class="o">|&lt;-------------</span> <span class="mi">100</span> <span class="n">Trying</span> <span class="o">--------------|</span>                                        <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|&lt;---------------</span> <span class="mi">180</span> <span class="n">Ringing</span> <span class="o">-----------|</span>
<span class="o">|&lt;-------------</span> <span class="mi">180</span> <span class="n">Ringing</span> <span class="o">-------------|</span>                                        <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|&lt;----------------</span> <span class="mi">200</span> <span class="n">OK</span> <span class="o">---------------|</span>
<span class="o">|&lt;-------------</span> <span class="mi">200</span> <span class="n">OK</span> <span class="o">------------------|</span>                                        <span class="o">|</span>
<span class="o">|--------------</span> <span class="n">ACK</span> <span class="o">--------------------&gt;|</span>                                        <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|-----------------</span> <span class="n">ACK</span> <span class="o">-----------------&gt;|</span>
<span class="o">|</span>                                        <span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|--------------</span> <span class="n">BYE</span> <span class="o">--------------------&gt;|</span>                                        <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|-----------------</span> <span class="n">BYE</span> <span class="o">-----------------&gt;|</span>
<span class="o">|</span>                                        <span class="o">|&lt;----------------</span> <span class="mi">200</span> <span class="n">OK</span> <span class="o">---------------|</span>
<span class="o">|&lt;-------------</span> <span class="mi">200</span> <span class="n">OK</span> <span class="o">------------------|</span>                                        <span class="o">|</span>
</pre></div>
</div>
</section>
</section>
<section id="call-handle">
<h3>Call handle<a class="headerlink" href="#call-handle" title="Permalink to this headline"></a></h3>
<p>Unlike the normal VoIPBin’s normal call handle, the VoIPBin handles trunking outbound call in a different way. The VoIPBin executes special flow for the trunking call.
It executes the follow features:</p>
<ul class="simple">
<li><p>Enable the early media.</p></li>
<li><p>Relay the hangup cause.</p></li>
</ul>
<section id="early-media-handle">
<h4>Early media handle<a class="headerlink" href="#early-media-handle" title="Permalink to this headline"></a></h4>
<p>The VoIPBin enables the the early-media feature for the trunking outbound call.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UA</span>                                   <span class="n">VoIPBin</span>                                 <span class="n">Destination</span>

<span class="o">|</span>                                        <span class="o">|</span>                                        <span class="o">|</span>
<span class="o">===================================================================================</span>
<span class="o">|-----</span> <span class="n">INVITE</span> <span class="k">with</span> <span class="n">Authorization</span> <span class="o">-------&gt;|</span>                                        <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|----------------</span> <span class="n">INVITE</span> <span class="o">---------------&gt;|</span>
<span class="o">|</span>                                        <span class="o">|&lt;---------------</span> <span class="mi">100</span> <span class="n">Trying</span> <span class="o">------------|</span>
<span class="o">|&lt;-------------</span> <span class="mi">100</span> <span class="n">Trying</span> <span class="o">--------------|</span>                                        <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|&lt;---------------</span> <span class="mi">183</span> <span class="n">Ringing</span> <span class="o">-----------|</span>
<span class="o">|&lt;-------------</span> <span class="mi">183</span> <span class="n">Ringing</span> <span class="o">-------------|</span>                                        <span class="o">|</span>
<span class="o">|&lt;-------------</span> <span class="n">RTP</span> <span class="n">Media</span> <span class="o">---------------|&lt;----------------</span> <span class="n">RTP</span> <span class="n">Media</span> <span class="o">------------|</span>
</pre></div>
</div>
</section>
<section id="realy-hangup-cause">
<h4>Realy hangup cause<a class="headerlink" href="#realy-hangup-cause" title="Permalink to this headline"></a></h4>
<p>The VoIPBin delivers the hangup cause code from the outgoing call.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UA</span>                                   <span class="n">VoIPBin</span>                                 <span class="n">Destination</span>

<span class="o">|</span>                                        <span class="o">|</span>                                        <span class="o">|</span>
<span class="o">===================================================================================</span>
<span class="o">|-----</span> <span class="n">INVITE</span> <span class="k">with</span> <span class="n">Authorization</span> <span class="o">-------&gt;|</span>                                        <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|----------------</span> <span class="n">INVITE</span> <span class="o">---------------&gt;|</span>
<span class="o">|</span>                                        <span class="o">|&lt;---------------</span> <span class="mi">100</span> <span class="n">Trying</span> <span class="o">------------|</span>
<span class="o">|&lt;-------------</span> <span class="mi">100</span> <span class="n">Trying</span> <span class="o">--------------|</span>                                        <span class="o">|</span>
<span class="o">|</span>                                        <span class="o">|&lt;---------------</span> <span class="mi">404</span> <span class="n">NOT</span> <span class="n">FOUND</span> <span class="o">---------|</span>
<span class="o">|&lt;-------------</span> <span class="mi">404</span> <span class="n">NOT</span> <span class="n">FOUND</span> <span class="o">-----------|</span>                                        <span class="o">|</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="registration">
<h2>Registration<a class="headerlink" href="#registration" title="Permalink to this headline"></a></h2>
<p>SIP registration is the process of identifying and authenticating a user or device on a SIP network. When a device wants to make or receive calls or messages on the network, it must first register with the VoIPBin by sending a REGISTER message.</p>
<p>This message includes information about the user or device, such as its address, phone number, and authentication credentials (e.g., username and password). The VoIPBin verifies the user’s credentials and then responds with a confirmation message, such as a 200 OK response.</p>
<p>Once the device is registered, it can make and receive calls and messages on the SIP network. SIP registration is important for ensuring secure and reliable communication between devices on the network, as well as for enabling advanced features like call forwarding, voicemail, and presence.</p>
<section id="registration-handle">
<h3>Registration handle<a class="headerlink" href="#registration-handle" title="Permalink to this headline"></a></h3>
<p>When a user or device sends a SIP REGISTER message to a VoIPBin with basic authentication, the VoIPBin will typically respond with a 407 Proxy Authentication Required message if the user’s credentials are not valid or not provided.</p>
<p>Here is an example of this process:</p>
<ol class="arabic simple">
<li><p>The user or device sends a REGISTER message to the VoIPBin with its identification information.</p></li>
<li><p>The VoIPBin checks the user’s credentials, and if they are not valid or not provided, it responds with a 407 Proxy Authentication Required message.</p></li>
<li><p>The 407 response includes a “Nonce” value, which is a unique and random number used to help prevent replay attacks. The user’s device must use this “Nonce” value, along with the username, password, and other information, to create an “Authorization” header for the next REGISTER message.</p></li>
<li><p>The user’s device sends a second REGISTER message with the Authorization header, including the “Nonce” value and other authentication information.</p></li>
<li><p>The VoIPBin verifies the user’s credentials using the basic authentication method, and if they are valid, it sends a 200 OK response, confirming the registration.</p></li>
</ol>
<p>Once the user’s device is registered, it can receive calls and messages on the SIP network.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UA</span>                                   <span class="n">VoIPBin</span>

<span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|--------------</span> <span class="n">REGISTER</span> <span class="o">---------------&gt;|</span>
<span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|&lt;--</span> <span class="mi">407</span> <span class="n">Proxy</span> <span class="n">Authentication</span> <span class="n">Required</span> <span class="o">--|</span>
<span class="o">|----------------</span> <span class="n">ACK</span> <span class="o">------------------&gt;|</span>
<span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|-----</span> <span class="n">REGISTER</span> <span class="k">with</span> <span class="n">Authorization</span> <span class="o">-----&gt;|</span>
<span class="o">|</span>                                        <span class="o">|</span>
<span class="o">|&lt;-------------</span> <span class="mi">200</span> <span class="n">OK</span> <span class="o">------------------|</span>
<span class="o">|--------------</span> <span class="n">ACK</span> <span class="o">--------------------&gt;|</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="websocket.html" class="btn btn-neutral float-left" title="Websocket" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="common.html" class="btn btn-neutral float-right" title="Common" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Sungtae Kim.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>